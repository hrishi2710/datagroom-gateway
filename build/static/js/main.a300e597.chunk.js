(window.webpackJsonpanalytics=window.webpackJsonpanalytics||[]).push([[0],{1:function(e,t,a){"use strict";var r={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",CLEAR:"ALERT_CLEAR"},n={REGISTER_REQUEST:"USERS_REGISTER_REQUEST",REGISTER_SUCCESS:"USERS_REGISTER_SUCCESS",REGISTER_FAILURE:"USERS_REGISTER_FAILURE",LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT",GETALL_REQUEST:"USERS_GETALL_REQUEST",GETALL_SUCCESS:"USERS_GETALL_SUCCESS",GETALL_FAILURE:"USERS_GETALL_FAILURE",DELETE_REQUEST:"USERS_DELETE_REQUEST",DELETE_SUCCESS:"USERS_DELETE_SUCCESS",DELETE_FAILURE:"USERS_DELETE_FAILURE"},s={LOAD_COLUMNS_REQUEST:"LOAD_COLUMNS_REQUEST",LOAD_COLUMNS_SUCCESS:"LOAD_COLUMNS_SUCCESS",LOAD_COLUMNS_FAILURE:"LOAD_COLUMNS_FAILURE",CLEAR_COLUMNS:"CLEAR_COLUMNS",EDIT_SINGLE_REQUEST:"EDIT_SINGLE_REQUEST",EDIT_SINGLE_SUCCESS:"EDIT_SINGLE_SUCCESS",EDIT_SINGLE_FAILURE:"EDIT_SINGLE_FAILURE",EDIT_SINGLE_DELETE_TRACKER:"EDIT_SINGLE_DELETE_TRACKER",DELETE_SINGLE_REQUEST:"DELETE_SINGLE_REQUEST",DELETE_SINGLE_SUCCESS:"DELETE_SINGLE_SUCCESS",DELETE_SINGLE_FAILURE:"DELETE_SINGLE_FAILURE",DELETE_SINGLE_DELETE_TRACKER:"DELETE_SINGLE_DELETE_TRACKER",DELETE_MANY_REQUEST:"DELETE_MANY_REQUEST",DELETE_MANY_SUCCESS:"DELETE_MANY_SUCCESS",DELETE_MANY_FAILURE:"DELETE_MANY_FAILURE",DELETE_MANY_DELETE_TRACKER:"DELETE_MANY_DELETE_TRACKER",DOWNLOAD_XLSX_REQUEST:"DOWNLOAD_XLSX_REQUEST",DOWNLOAD_XLSX_SUCCESS:"DOWNLOAD_XLSX_SUCCESS",DOWNLOAD_XLSX_FAILURE:"DOWNLOAD_XLSX_FAILURE",SET_ROW_ADD_TRACKER:"SET_ROW_ADD_TRACKER",ROW_ADD_SUCCESS:"ROW_ADD_SUCCESS",ROW_ADD_FAILURE:"ROW_ADD_FAILURE",CLEAR_ROW_ADD_TRACKER:"CLEAR_ROW_ADD_TRACKER",SET_VIEW_DEFS_REQUEST:"SET_VIEW_DEFS_REQUEST",SET_VIEW_DEFS_SUCCESS:"SET_VIEW_DEFS_SUCCESS",SET_VIEW_DEFS_FAILURE:"SET_VIEW_DEFS_FAILURE",CLEAR_VIEW_DEFS_TRACER:"CLEAR_VIEW_DEFS_TRACKER",JIRA_REFRESH_REQUEST:"JIRA_REFRESH_REQUEST",JIRA_REFRESH_SUCCESS:"JIRA_REFRESH_SUCCESS",JIRA_REFRESH_FAILURE:"JIRA_REFRESH_FAILURE",JIRA_REFRESH_DELETE_TRACKER:"JIRA_REFRESH_DELETE_TRACKER",ADD_FILTER_REQUEST:"ADD_FILTER_REQUEST",ADD_FILTER_SUCCESS:"ADD_FILTER_SUCCESS",ADD_FILTER__FAILURE:"ADD_FILTER__FAILURE",CLEAR_ADD_FILTER_TRACKER:"CLEAR_ADD_FILTER_TRACKER",EDIT_FILTER_REQUEST:"EDIT_FILTER_REQUEST",EDIT_FILTER_SUCCESS:"EDIT_FILTER_SUCCESS",EDIT_FILTER__FAILURE:"EDIT_FILTER__FAILURE",CLEAR_EDIT_FILTER_TRACKER:"CLEAR_EDIT_FILTER_TRACKER",DELETE_FILTER_REQUEST:"DELETE_FILTER_REQUEST",DELETE_FILTER_SUCCESS:"DELETE_FILTER_SUCCESS",DELETE_FILTER__FAILURE:"DELETE_FILTER__FAILURE",CLEAR_DELETE_FILTER_TRACKER:"CLEAR_DELETE_FILTER_TRACKER",CLEAR_DS:"CLEAR_DS",UPLOAD_BULK_XLS_REQUEST:"UPLOAD_BULK_XLS_REQUEST",UPLOAD_BULK_XLS_SUCCESS:"UPLOAD_BULK_XLS_SUCCESS",UPLOAD_BULK_XLS_FAILURE:"UPLOAD_BULK_XLS_FAILURE",SET_BULK_SELECTED_SHEET:"SET_BULK_SELECTED_SHEET",LOAD_BULK_FROM_RANGE_REQUEST:"LOAD_BULK_FROM_RANGE_REQUEST",LOAD_BULK_FROM_RANGE_SUCCESS:"LOAD_BULK_FROM_RANGE_SUCCESS",LOAD_BULK_FROM_RANGE_FAILURE:"LOAD_BULK_FROM_RANGE_FAILURE",CLEAR_LOADSTATUS:"CLEAR_LOADSTATUS",BULK_EDIT_REQUEST:"BULK_EDIT_REQUEST",BULK_EDIT_SUCCESS:"BULK_EDIT_SUCCESS",BULK_EDIT_FAILURE:"BULK_EDIT_FAILURE"},i={LOAD_DSLIST_REQUEST:"LOAD_DSLIST_REQUEST",LOAD_DSLIST_SUCCESS:"LOAD_DSLIST_SUCCESS",LOAD_DSLIST_FAILURE:"LOAD_DSLIST_FAILURE",SEEKING_DELETE_CONFIRM:"SEEKING_DELETE_CONFIRM",DELETE_DS_REQUEST:"DELETE_DS_REQUEST",DELETE_DS_SUCCESS:"DELETE_DS_SUCCESS",DELETE_DS_FAILURE:"DELETE_DS_FAILURE"};a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i}))},114:function(e,t,a){},124:function(e,t,a){"use strict";var r=a(5),n=a(6),s=a(10),i=a(9),l=a(11),o=a(0),c=a.n(o),d=a(127),u=a(93),m=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.show)return null;return c.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50}},c.a.createElement("div",{style:{backgroundColor:"#fff",borderRadius:5,maxWidth:600,margin:"0 auto",padding:30}},c.a.createElement(d.a.Header,null,c.a.createElement(d.a.Title,null,this.props.title)),c.a.createElement("div",{style:{height:250,overflowY:"auto"}},c.a.createElement(d.a.Body,null,this.props.children)),c.a.createElement(d.a.Footer,null,c.a.createElement(u.a,{variant:"secondary",onClick:function(){return e.props.onClose(!1)}},this.props.cancel?this.props.cancel:"Cancel"),c.a.createElement(u.a,{variant:"primary",onClick:function(){return e.props.onClose(!0)}},this.props.ok?this.props.ok:"Do It!"))))}}]),t}(c.a.Component);t.a=m},15:function(e,t,a){"use strict";var r=a(21),n=a(32);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("".concat(o.apiUrl,"/login"),a).then(d).then((function(e){return e.token&&localStorage.setItem("user",JSON.stringify(e)),e}))},logout:c,register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(o.apiUrl,"/users/register"),t).then(d)},getAll:function(){var e={method:"GET",headers:Object(n.a)()};return fetch("".concat(o.apiUrl,"/users"),e).then(d)},getById:function(e){var t={method:"GET",headers:Object(n.a)()};return fetch("".concat(o.apiUrl,"/users/").concat(e),t).then(d)},update:function(e){var t={method:"PUT",headers:i({},Object(n.a)(),{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("".concat(o.apiUrl,"/users/").concat(e.id),t).then(d)},delete:function(e){var t={method:"DELETE",headers:Object(n.a)()};return fetch("".concat(o.apiUrl,"/users/").concat(e),t).then(d)}},o={};function c(){localStorage.removeItem("user")}function d(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&c();var r=a&&a.message||e.statusText;return Promise.reject(r)}return JSON.parse(a.user)}))}o.apiUrl="";var u=a(3),m=a.n(u),h=a(7),p={fileUpload:function(e){return E.apply(this,arguments)},findHeadersInSheet:function(e){return g.apply(this,arguments)},loadHdrsFromRange:function(e){return v.apply(this,arguments)},createDs:function(e){return b.apply(this,arguments)},createDsFromDs:function(e){return C.apply(this,arguments)},csvFileUpload:function(e){return S.apply(this,arguments)},createDsViaCsv:function(e){return y.apply(this,arguments)},uploadAttachment:function(e){return w.apply(this,arguments)},deleteOneAttachment:function(e){return _.apply(this,arguments)}},f={};function E(){return(E=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"POST",body:t},r=null,e.next=5,fetch("".concat(f.apiUrl,"/upload"),a);case 5:if(!(n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:r=e.sent,console.log("uploaded",r);case 11:return console.log(n),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function g(){return(g=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(f.apiUrl,"/upload/findHeadersInSheet"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,n=null,console.log("Finished fetch"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:n=e.sent,console.log("findHeadersInSheet",n);case 13:return console.log(r),e.abrupt("return",n);case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function v(){return(v=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(f.apiUrl,"/upload/loadHdrsFromRange"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,n=null,console.log("Finished fetch"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:n=e.sent,console.log("loadHdrsFromRange: ",n);case 13:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function b(){return(b=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(f.apiUrl,"/upload/createDs"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,n=null,console.log("Finished fetch"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:n=e.sent,console.log("createDs ",n);case 13:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function S(){return(S=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"POST",body:t},r=null,e.next=5,fetch("".concat(f.apiUrl,"/uploadCsv"),a);case 5:if(!(n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:r=e.sent,console.log("uploaded csv",r);case 11:return console.log(n),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function y(){return(y=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(f.apiUrl,"/uploadCsv/createDs"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,n=null,console.log("Finished fetch"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:n=e.sent,console.log("createDs ",n);case 13:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function C(){return(C=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(f.apiUrl,"/ds/createDsFromDs"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,n=null,console.log("Finished fetch"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:n=e.sent,console.log("createDsFromDs: ",n);case 13:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function w(){return(w=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={method:"POST",body:t},r=null,e.next=5,fetch("".concat(f.apiUrl,"/uploadAttachments"),a);case 5:if(!(n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:r=e.sent,console.log("uploaded",r);case 11:return console.log(n),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function _(){return(_=Object(h.a)(m.a.mark((function e(t){var a,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(f.apiUrl,"/uploadAttachments/deleteAttachment"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,n=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:n=e.sent,console.log("deleteOneAttachment: ",n);case 13:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}f.apiUrl="";var k=a(183);a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return k.a}))},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(21),n=a(1);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.c.LOAD_COLUMNS_REQUEST:var a=i({},e);return a.dsViews||(a.dsViews={}),a.dsViews[t.dsView]={status:"loading"},a;case n.c.LOAD_COLUMNS_SUCCESS:var r=i({},e);return r.dsViews||(r.dsViews={}),r.dsViews[t.dsView]={status:"success",columns:t.columnsAndKeys.columns,columnAttrs:t.columnsAndKeys.columnAttrs,keys:t.columnsAndKeys.keys,jiraConfig:t.columnsAndKeys.jiraConfig,dsDescription:t.columnsAndKeys.dsDescription,filters:t.columnsAndKeys.filters,otherTableAttrs:t.columnsAndKeys.otherTableAttrs,aclConfig:t.columnsAndKeys.aclConfig},r;case n.c.LOAD_COLUMNS_FAILURE:var s=i({},e);return s.dsViews||(s.dsViews={}),s.dsViews[t.dsView]={status:"fail",error:t.message},s;case n.c.EDIT_SINGLE_REQUEST:var o=i({},e);return o.dsEdits||(o.dsEdits={}),o.dsEdits[t._id]={editStatus:"editing",editTracker:t.editTracker},o;case n.c.EDIT_SINGLE_SUCCESS:var c=i({},e);return c.dsEdits||(c.dsEdits={}),c.dsEdits[t._id]={editStatus:"done",serverStatus:t.serverStatus,editTracker:t.editTracker},c;case n.c.EDIT_SINGLE_FAILURE:var d=i({},e);return d.dsEdits||(d.dsEdits={}),d.dsEdits[t._id]={editStatus:"fail",editTracker:t.editTracker,error:t.message},d;case n.c.EDIT_SINGLE_DELETE_TRACKER:var u=i({},e);return u.dsEdits||(u.dsEdits={}),delete u.dsEdits[t._id],u;case n.c.CLEAR_COLUMNS:return{};case n.c.SET_ROW_ADD_TRACKER:var m=i({},e);return m.dsRowAdds||(m.dsRowAdds={}),m.dsRowAdds[t.dsView]=i({},m.dsRowAdds[t.dsView],{status:t.status,uiRow:t.uiRow}),m;case n.c.ROW_ADD_SUCCESS:var h=i({},e);return h.dsRowAdds||(h.dsRowAdds={}),h.dsRowAdds[t.dsView]=i({},h.dsRowAdds[t.dsView],{status:t.status,serverStatus:t.serverStatus}),h;case n.c.ROW_ADD_FAILURE:var p=i({},e);return p.dsRowAdds||(p.dsRowAdds={}),p.dsRowAdds[t.dsView]=i({},p.dsRowAdds[t.dsView],{status:t.status,error:t.message}),p;case n.c.CLEAR_ROW_ADD_TRACKER:return delete e.dsRowAdds,e;case n.c.DELETE_SINGLE_REQUEST:var f=i({},e);return f.dsDeletes||(f.dsDeletes={}),f.dsDeletes[t._id]={deleteStatus:"deleting",deleteTracker:t.deleteTracker},f;case n.c.DELETE_SINGLE_SUCCESS:var E=i({},e);return E.dsDeletes||(E.dsDeletes={}),E.dsDeletes[t._id]={deleteStatus:"done",serverStatus:t.serverStatus,deleteTracker:t.deleteTracker},E;case n.c.DELETE_SINGLE_FAILURE:var g=i({},e);return g.dsDeletes||(g.dsDeletes={}),g.dsDeletes[t._id]={deleteStatus:"fail",deleteTracker:t.deleteTracker,error:t.message},g;case n.c.DELETE_SINGLE_DELETE_TRACKER:var v=i({},e);return v.dsDeletes||(v.dsDeletes={}),delete v.dsDeletes[t._id],v;case n.c.SET_VIEW_DEFS_REQUEST:var b=i({},e);return b.dsSetView||(b.dsSetView={}),b.dsSetView.dsName=t.dsName,b.dsSetView.dsView=t.dsView,b.dsSetView.status="setting",b;case n.c.SET_VIEW_DEFS_SUCCESS:var S=i({},e);return S.dsSetView||(S.dsSetView={}),S.dsSetView.dsName=t.dsName,S.dsSetView.dsView=t.dsView,S.dsSetView.status="success",S.dsSetView.serverStatus=t.serverStatus,S;case n.c.SET_VIEW_DEFS_FAILURE:var y=i({},e);return y.dsSetView||(y.dsSetView={}),y.dsSetView.dsName=t.dsName,y.dsSetView.dsView=t.dsView,y.dsSetView.status="fail",y.dsSetView.message=t.message,y;case n.c.CLEAR_VIEW_DEFS_TRACER:var C=i({},e);return delete C.dsSetView,C;case n.c.JIRA_REFRESH_REQUEST:var w=i({},e);return w.dsJiraRefresh||(w.dsJiraRefresh={}),w.dsJiraRefresh.dsName=t.dsName,w.dsJiraRefresh.dsView=t.dsView,w.dsJiraRefresh.status="refreshing",w;case n.c.JIRA_REFRESH_SUCCESS:var _=i({},e);return _.dsJiraRefresh||(_.dsJiraRefresh={}),_.dsJiraRefresh.dsName=t.dsName,_.dsJiraRefresh.dsView=t.dsView,_.dsJiraRefresh.status="done",_.dsJiraRefresh.serverStatus=t.serverStatus,_;case n.c.JIRA_REFRESH_FAILURE:var k=i({},e);return k.dsJiraRefresh||(k.dsJiraRefresh={}),k.dsJiraRefresh.dsName=t.dsName,k.dsJiraRefresh.dsView=t.dsView,k.dsJiraRefresh.status="fail",k.dsJiraRefresh.message=t.message,k;case n.c.JIRA_REFRESH_DELETE_TRACKER:var A=i({},e);return A.dsJiraRefresh||(A.dsJiraRefresh={}),A.dsJiraRefresh.status="dusted",A;case n.c.DELETE_MANY_REQUEST:var O=i({},e);return O.dsDeletes||(O.dsDeletes={}),O.dsDeletes.__dg__DELETE_MANY={deleteStatus:"deleting",deleteTracker:t.deleteTracker},O;case n.c.DELETE_MANY_SUCCESS:var D=i({},e);return D.dsDeletes||(D.dsDeletes={}),D.dsDeletes.__dg__DELETE_MANY={deleteStatus:"done",serverStatus:t.serverStatus,deleteTracker:t.deleteTracker},D;case n.c.DELETE_MANY_FAILURE:var R=i({},e);return R.dsDeletes||(R.dsDeletes={}),R.dsDeletes.__dg__DELETE_MANY={deleteStatus:"fail",deleteTracker:t.deleteTracker,error:t.message},R;case n.c.DELETE_MANY_DELETE_TRACKER:var T=i({},e);return T.dsDeletes||(T.dsDeletes={}),delete T.dsDeletes.__dg__DELETE_MANY,T;case n.c.ADD_FILTER_REQUEST:var L=i({},e);return L.dsFilterAdds||(L.dsFilterAdds={}),L.dsFilterAdds[t.dsView]=i({},L.dsFilterAdds[t.dsView],{status:t.status,filter:t.filter}),L;case n.c.ADD_FILTER_SUCCESS:var F=i({},e);return F.dsFilterAdds||(F.dsFilterAdds={}),F.dsFilterAdds[t.dsView]=i({},F.dsFilterAdds[t.dsView],{status:t.status,serverStatus:t.serverStatus}),F;case n.c.ADD_FILTER__FAILURE:var j=i({},e);return j.dsFilterAdds||(j.dsFilterAdds={}),j.dsFilterAdds[t.dsView]=i({},j.dsFilterAdds[t.dsView],{status:t.status,error:t.message}),j;case n.c.CLEAR_ADD_FILTER_TRACKER:var x=i({},e);return delete x.dsFilterAdds,x;case n.c.EDIT_FILTER_REQUEST:var N=i({},e);return N.dsFilterEdits||(N.dsFilterEdits={}),N.dsFilterEdits[t.dsView]=i({},N.dsFilterEdits[t.dsView],{status:t.status,filter:t.filter}),N;case n.c.EDIT_FILTER_SUCCESS:var U=i({},e);return U.dsFilterEdits||(U.dsFilterEdits={}),U.dsFilterEdits[t.dsView]=i({},U.dsFilterEdits[t.dsView],{status:t.status,serverStatus:t.serverStatus}),U;case n.c.EDIT_FILTER__FAILURE:var I=i({},e);return I.dsFilterEdits||(I.dsFilterEdits={}),I.dsFilterEdits[t.dsView]=i({},I.dsFilterEdits[t.dsView],{status:t.status,error:t.message}),I;case n.c.CLEAR_EDIT_FILTER_TRACKER:var V=i({},e);return delete V.dsFilterEdits,V;case n.c.DELETE_FILTER_REQUEST:var P=i({},e);return P.dsFilterDeletes||(P.dsFilterDeletes={}),P.dsFilterDeletes[t.dsView]=i({},P.dsFilterDeletes[t.dsView],{status:t.status,filter:t.filter}),P;case n.c.DELETE_FILTER_SUCCESS:var H=i({},e);return H.dsFilterDeletes||(H.dsFilterDeletes={}),H.dsFilterDeletes[t.dsView]=i({},H.dsFilterDeletes[t.dsView],{status:t.status,serverStatus:t.serverStatus}),H;case n.c.DELETE_FILTER__FAILURE:var M=i({},e);return M.dsFilterDeletes||(M.dsFilterDeletes={}),M.dsFilterDeletes[t.dsView]=i({},M.dsFilterDeletes[t.dsView],{status:t.status,error:t.message}),M;case n.c.CLEAR_DELETE_FILTER_TRACKER:var B=i({},e);return delete B.dsFilterDeletes,B;case n.c.CLEAR_DS:var J=i({},e);return delete J.dsBulkEdits,J;case n.c.UPLOAD_BULK_XLS_REQUEST:var z=i({},e);return z.dsBulkEdits||(z.dsBulkEdits={}),z.dsBulkEdits.uploadStatus="uploading",z.dsBulkEdits.fileName=t.fileName,z;case n.c.UPLOAD_BULK_XLS_SUCCESS:var Q=i({},e);return Q.dsBulkEdits||(Q.dsBulkEdits={}),Q.dsBulkEdits.uploadStatus="success",Q.dsBulkEdits.fileName=t.fileName,Q.dsBulkEdits.sheetInfo=t.sheetInfo,Q;case n.c.UPLOAD_BULK_XLS_FAILURE:var G=i({},e);return G.dsBulkEdits||(G.dsBulkEdits={}),G.dsBulkEdits.uploadStatus="fail",G.dsBulkEdits.uploadError=t.message,G;case n.c.SET_BULK_SELECTED_SHEET:var K=i({},e);return K.dsBulkEdits||(K.dsBulkEdits={}),K.dsBulkEdits.selectedSheet=t.sheetName,K;case n.c.BULK_EDIT_REQUEST:var W=i({},e);return W.dsBulkEdits||(W.dsBulkEdits={}),W.dsBulkEdits.selectedRange=t.selectedRange,W;case n.c.BULK_EDIT_SUCCESS:var X=i({},e);return X.dsBulkEdits||(X.dsBulkEdits={}),X.dsBulkEdits.loadStatus=t.loadStatus,X;case n.c.BULK_EDIT_FAILURE:var Y=i({},e);return Y.dsBulkEdits||(Y.dsBulkEdits={}),Y.dsBulkEdits.loadStatus=t.loadStatus,Y;case n.c.CLEAR_LOADSTATUS:var q=i({},e);return delete q.dsBulkEdits.loadStatus,q;default:return e}}},173:function(e,t,a){"use strict";var r=a(53);t.a=function(e,t,a,n,s){var i=this,l=this,o=e.getElement(),c=e.getValue(),d=s.verticalNavigation||"editor",u="undefined"!==typeof c||null===c?c:"undefined"!==typeof s.defaultValue?s.defaultValue:"",m=document.createElement("input"),h=document.createElement("div"),p=[],f=!1,E=!0,g=!1;if(s.conditionalValues){s.values=[];for(var v=e.getRow().getData(),b=0;b<s.conditionalExprs.length;b++){var S=s.conditionalExprs[b].split(":")[0].trim(),y=r.a.parseExpr(S);if(r.a.evalExpr(y,v)){var C=s.conditionalExprs[b].split(":")[1].trim();C=JSON.parse(C),s.values=C;break}}}if(m.setAttribute("type","search"),m.style.padding="4px",m.style.width="100%",m.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(var w in s.elementAttributes)"+"==w.charAt(0)?(w=w.slice(1),m.setAttribute(w,m.getAttribute(w)+s.elementAttributes["+"+w])):m.setAttribute(w,s.elementAttributes[w]);function _(){!0===s.values?g=k():"string"===typeof s.values&&(g=k(s.values))}function k(t){var a,r={},n=l.table.getData();return(a=t?l.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(n.forEach((function(e){var t=a.getFieldValue(e);null!==t&&"undefined"!==typeof t&&""!==t&&(r[t]=!0)})),r=s.sortValuesList?"asc"==s.sortValuesList?Object.keys(r).sort():Object.keys(r).sort().reverse():Object.keys(r)):console.warn("unable to find matching column to create autocomplete lookup list:",t),r}function A(e,t){var a,r,n=[];a=g||(s.values||[]),s.searchFunc?(n=s.searchFunc(e,a))instanceof Promise?(O("undefined"!==typeof s.searchingPlaceholder?s.searchingPlaceholder:"Searching..."),n.then((function(e){T(D(e),t)})).catch((function(e){console.err("error in autocomplete search promise:",e)}))):T(D(n),t):(r=D(a),""===e?s.showListOnEmpty&&(n=r):r.forEach((function(t){null===t.value&&"undefined"===typeof t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&n.push(t)})),T(n,t))}function O(e){var t=document.createElement("div");R(),!1!==e&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,e instanceof Node?t.appendChild(e):t.innerHTML=e,h.appendChild(t))}function D(e){var t=[];if(Array.isArray(e))e.forEach((function(e){var a={};"object"===typeof e?(a.title=s.listItemFormatter?s.listItemFormatter(e.value,e.label):e.label,a.value=e.value):(a.title=s.listItemFormatter?s.listItemFormatter(e,e):e,a.value=e),t.push(a)}));else for(var a in e){var r={title:s.listItemFormatter?s.listItemFormatter(a,e[a]):e[a],value:a};t.push(r)}return t}function R(){for(;h.firstChild;)h.removeChild(h.firstChild)}function T(e,t){e.length?function(e,t){var a=!1;R(),(p=e).forEach((function(e){var r=e.element;r||((r=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),r.tabIndex=0,r.innerHTML=e.title,r.addEventListener("click",(function(t){j(e),L()})),r.addEventListener("mousedown",(function(e){E=!1,setTimeout((function(){E=!0}),10)})),e.element=r,t&&e.value==c&&(m.value=e.title,e.element.classList.add("active"),a=!0),e===f&&(e.element.classList.add("active"),a=!0)),h.appendChild(r)})),a||j(!1)}(e,t):s.emptyPlaceholder&&O(s.emptyPlaceholder)}function L(){if(x(),console.log("chooseitem single"),f)c!==f.value?(c=f.value,m.value=f.title,a(f.value)):n();else if(s.freetext)c=m.value,a(m.value);else if(s.allowEmpty&&""===m.value)c=m.value,a(m.value);else{var e=function(e){var t,a,r=[];if(t=g||(s.values||[]),s.searchFunc){if((r=s.searchFunc(e,t))instanceof Promise)return{status:!1,match:""}}else a=D(t),""===e?s.showListOnEmpty&&(r=a):a.forEach((function(t){null===t.value&&"undefined"===typeof t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&r.push(t)}));return 1===r.length?{status:!0,match:r[0].value}:{status:!1,match:""}}(m.value),t=e.status,r=e.match;t?c!==r?(console.log("Calling success now... ; single"),a(r)):(console.log("Calling cancel..; single"),n()):(console.log("Calling cancel now...; single"),n())}}function F(){if(!h.parentNode){for(;h.firstChild;)h.removeChild(h.firstChild);var e=function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}(o);h.style.minWidth=o.offsetWidth+"px",h.style.top=e.top+o.offsetHeight+"px",h.style.left=e.left+"px",document.body.appendChild(h)}}function j(e,t){f&&f.element&&f.element.classList.remove("active"),f=e,e&&e.element&&e.element.classList.add("active")}function x(){h.parentNode&&h.parentNode.removeChild(h),l.table.rowManager.element.removeEventListener("scroll",N)}function N(){x(),n()}return h.classList.add("tabulator-edit-select-list"),h.addEventListener("mousedown",(function(e){E=!1,setTimeout((function(){E=!0}),10)})),m.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=p.indexOf(f),("editor"==d||"hybrid"==d&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),j(t>0&&p[t-1]));break;case 40:t=p.indexOf(f),("editor"==d||"hybrid"==d&&t<p.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<p.length-1&&j(-1==t?p[0]:p[t+1]));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation();break;case 13:L();break;case 27:N();break;case 36:case 35:e.stopImmediatePropagation()}})),m.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:A(m.value)}})),m.addEventListener("search",(function(e){A(m.value)})),m.addEventListener("blur",(function(e){E&&L()})),m.addEventListener("focus",(function(e){var t=u;_(),F(),m.value=t,A(t,!0)})),t((function(){m.style.height="100%",m.focus({preventScroll:!0})})),s.mask&&this.table.modules.edit.maskInput(m,s),setTimeout((function(){i.table.rowManager.element.addEventListener("scroll",N)}),10),_(),m.value=u,A(u,!0),m}},178:function(e,t,a){"use strict";t.a=function(e,t,a,r,n){var s,i=e.getValue(),l=n.verticalNavigation||"hybrid",o=String(null!==i&&"undefined"!==typeof i?i:""),c=((o.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea"));if(c.style.display="block",c.style.padding="2px",c.style.height="50%",c.style.width="100%",c.style.boxSizing="border-box",c.style.whiteSpace="pre-wrap",c.style.resize="none",n.elementAttributes&&"object"==typeof n.elementAttributes)for(var d in n.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),c.setAttribute(d,c.getAttribute(d)+n.elementAttributes["+"+d])):c.setAttribute(d,n.elementAttributes[d]);function u(e){if(s){var t=s.getValue();(null===i||"undefined"===typeof i)&&""!==t||t!==i?a(t)&&(i=t):r()}}return o||(o=""),c.value=o,t((function(){c.focus({preventScroll:!0}),c.style.height="100%",window.CodeMirrorSpellChecker({codeMirrorInstance:window.CodeMirror}),s=window.CodeMirror.fromTextArea(c,{lineNumbers:!0,lineWrapping:!0,mode:"spell-checker",backdrop:"markdown",highlightFormatting:!0}),window.inlineAttachment.editors.codemirror4.attach(s,{uploadUrl:"/uploadAttachments",urlText:'<img src="{filename}" alt="{filename}" width="100%" height="100%"/>',fileUrlText:"[{filename}]({filename})",allowedTypes:"*",extraParams:{dsName:n.dsName}});var t=e._cell.element.style.height;t=t.replace("px",""),t=parseInt(t);var a=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);a>0&&(a-=70),t=Math.min(a,t),e._cell.setHeightSpecial(t),e.getRow().normalizeHeight(),s.scrollIntoView({line:s.getDoc().lineCount()-1,ch:0},50),s.getDoc().setCursor({line:s.getDoc().lineCount()-1,ch:0}),s.refresh(),s.on("keyup",(function(r,n){var i=e._cell.element.style.height;(i=1===s.getDoc().lineCount()?25:18*(s.getDoc().lineCount()+1))>a&&(i=a),e._cell.setHeightSpecial(Math.max(i,t)),e.getRow().normalizeHeight(),s.scrollIntoView()})),s.on("keydown",(function(e,t){var a=e.getCursor();switch(t.keyCode){case 13:t.ctrlKey&&u(t);break;case 27:r();break;case 38:"editor"!=l&&("hybrid"!=l||0===a.line&&0===a.ch)||(t.stopImmediatePropagation(),t.stopPropagation());break;case 40:("editor"==l||"hybrid"==l&&1!==a.outside)&&(t.stopImmediatePropagation(),t.stopPropagation());break;default:t.stopImmediatePropagation(),t.stopPropagation()}})),s.on("blur",(function(t){e.mouseDownDate||(e.mouseDownDate=0),Date.now()-e.mouseDownDate>50&&u(t)})),e.getElement().addEventListener("mousedown",(function(t){e.mouseDownDate=Date.now(),t.stopImmediatePropagation(),t.stopPropagation()}))})),n.mask&&this.table.modules.edit.maskInput(c,n),c}},183:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return l}));var r=a(3),n=a.n(r),s=a(7),i=a(314),l={loadColumnsForUserView:function(e,t,a){return c.apply(this,arguments)},editSingleAttribute:function(e){return d.apply(this,arguments)},insertOneDoc:function(e){return u.apply(this,arguments)},downloadXlsx:function(e,t,a){return m.apply(this,arguments)},getDsList:function(e){return h.apply(this,arguments)},deleteDs:function(e){return p.apply(this,arguments)},deleteOneDoc:function(e){return f.apply(this,arguments)},deleteManyDocs:function(e){return E.apply(this,arguments)},setViewDefinitions:function(e){return g.apply(this,arguments)},refreshJira:function(e){return v.apply(this,arguments)},addFilter:function(e){return b.apply(this,arguments)},editFilter:function(e){return S.apply(this,arguments)},deleteFilter:function(e){return y.apply(this,arguments)},doBulkEditRequest:function(e){return C.apply(this,arguments)}},o={};function c(){return(c=Object(s.a)(n.a.mark((function e(t,a,r){var s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t,a,r),e.next=4,fetch("".concat(o.apiUrl,"/ds/view/columns/").concat(t,"/").concat(a,"/").concat(r),{method:"get"});case 4:if(s=e.sent,i=null,console.log("Finished fetch"),!s.ok){e.next=12;break}return e.next=10,s.json();case 10:i=e.sent,console.log("loadColumnsForUserView: ",i);case 12:return e.abrupt("return",i);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function d(){return(d=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/editSingleAttribute"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("editSingleAttribute: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function u(){return(u=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/insertOneDoc"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("insertOneDoc: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function m(){return(m=Object(s.a)(n.a.mark((function t(a,r,s){var l,c,d,u,m;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Starting API call: ",a,r,s),t.next=4,fetch("".concat(o.apiUrl,"/ds/downloadXlsx/").concat(a,"/").concat(r,"/").concat(s),{method:"get"});case 4:if(l=t.sent,console.log("Finished fetch"),!l.ok){t.next=19;break}return t.next=9,l.json();case 9:if(""===(c=t.sent).output){t.next=17;break}d="export_".concat(a,"_").concat(r,"_").concat(s,".xlsx"),u=new e(c.output,"base64"),m=new Blob([u],{type:"binary/octet-stream"}),i.saveAs(m,d),t.next=19;break;case 17:throw console.log("downloadXlsx: file is empty"),new Error("downloadXlsx: file is empty");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))).apply(this,arguments)}function h(){return(h=Object(s.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting getDsList API call: ",t),e.next=4,fetch("".concat(o.apiUrl,"/ds/dsList/").concat(t),{method:"get"});case 4:if(a=e.sent,r=null,console.log("Finished API"),!a.ok){e.next=12;break}return e.next=10,a.json();case 10:r=e.sent,console.log("getDsList: ",r);case 12:return e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function p(){return(p=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting deleteDs API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/deleteDs"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("deleteDs: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function f(){return(f=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/deleteOneDoc"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("deleteOneDoc: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function E(){return(E=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/deleteManyDocs"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("deleteManyDocs: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function g(){return(g=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/setViewDefinitions"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("setViewDefinition: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function v(){return(v=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/refreshJira"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("refreshJira: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function b(){return(b=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/addFilter"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("addFilter: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function S(){return(S=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/editFilter"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("editFilter: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function y(){return(y=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/view/deleteFilter"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished API"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("deleteFilter: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function C(){return(C=Object(s.a)(n.a.mark((function e(t){var a,r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting API call: ",t),a=JSON.stringify(t).length.toString(),e.next=5,fetch("".concat(o.apiUrl,"/ds/doBulkEdit"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(r=e.sent,s=null,console.log("Finished fetch"),!r.ok){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,console.log("doBulkEditRequest: ",s);case 13:return e.abrupt("return",s);case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}o.apiUrl=""}).call(this,a(94).Buffer)},19:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(3),n=a.n(r),s=a(7),i=a(1),l=a(15),o={loadColumnsForUserView:function(e,t,a){return function(){var o=Object(s.a)(n.a.mark((function s(o){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o({type:i.c.LOAD_COLUMNS_REQUEST,dsName:e,dsView:t,dsUser:a}),n.next=4,l.a.loadColumnsForUserView(e,t,a);case 4:c=n.sent,o(c?(s=c,{type:i.c.LOAD_COLUMNS_SUCCESS,dsName:e,dsView:t,dsUser:a,columnsAndKeys:s}):r("loadColumnsForUserView failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),o(r("loadColumnsForUserView failure"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}();function r(r){return{type:i.c.LOAD_COLUMNS_FAILURE,dsName:e,dsView:t,dsUser:a,message:r}}},editSingleAttribute:function(e,t,a,r,o,c,d,u,m){return function(){var i=Object(s.a)(n.a.mark((function s(i){var E,g;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return E={_id:r,field:o,oldVal:c,newVal:d},n.prev=1,i(h(r,E)),n.next=5,l.a.editSingleAttribute({dsName:e,dsView:t,dsUser:a,column:o,selectorObj:u,editObj:m});case 5:g=n.sent,i(g?p(r,E,g):f(r,E,"loadColumnsForUserView failure")),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),i(f(r,E,"loadColumnsForUserView failure"));case 12:case"end":return n.stop()}}),s,null,[[1,9]])})));return function(e){return i.apply(this,arguments)}}();function h(r,n){return{type:i.c.EDIT_SINGLE_REQUEST,dsName:e,dsView:t,dsUser:a,_id:r,editTracker:n}}function p(r,n,s){return{type:i.c.EDIT_SINGLE_SUCCESS,dsName:e,dsView:t,dsUser:a,_id:r,editTracker:n,serverStatus:s}}function f(r,n,s){return{type:i.c.EDIT_SINGLE_FAILURE,dsName:e,dsView:t,dsUser:a,_id:r,editTracker:n,message:s}}},insertOneDoc:function(e,t,a,r,o,c){return function(){var u=Object(s.a)(n.a.mark((function s(u){var m;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,u({type:i.c.SET_ROW_ADD_TRACKER,dsName:e,dsView:t,dsUser:a,status:"inserting",uiRow:c}),n.next=4,l.a.insertOneDoc({dsName:e,dsView:t,dsUser:a,selectorObj:r,doc:o});case 4:m=n.sent,u(m?(s=m,{type:i.c.ROW_ADD_SUCCESS,dsName:e,dsView:t,dsUser:a,status:"success",serverStatus:s}):d("insertOneDoc failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),u(d("insertOneDoc failure"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return u.apply(this,arguments)}}();function d(r){return{type:i.c.ROW_ADD_FAILURE,dsName:e,dsView:t,dsUser:a,status:"fail",message:r}}},downloadXlsx:function(e,t,a){return function(){var r=Object(s.a)(n.a.mark((function r(s){return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s({type:i.c.DOWNLOAD_XLSX_REQUEST,dsName:e,dsView:t,dsUser:a}),r.next=4,l.a.downloadXlsx(e,t,a);case 4:s({type:i.c.DOWNLOAD_XLSX_SUCCESS,dsName:e,dsView:t,dsUser:a}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),s((n="downloadXlsx failure",{type:i.c.DOWNLOAD_XLSX_FAILURE,dsName:e,dsView:t,dsUser:a,message:n}));case 10:case"end":return r.stop()}var n}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()},getDsList:function(e){return function(){var a=Object(s.a)(n.a.mark((function a(r){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:i.b.LOAD_DSLIST_REQUEST,dsUser:e}),a.next=4,l.a.getDsList(e);case 4:s=a.sent,r(t(s)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),r((n="getDsList failure",{type:i.b.LOAD_DSLIST_FAILURE,message:n}));case 11:case"end":return a.stop()}var n}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}();function t(e){return{type:i.b.LOAD_DSLIST_SUCCESS,dsList:e}}},deleteDs:function(e,t){return function(){var r=Object(s.a)(n.a.mark((function r(s){var o;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s({type:i.b.DELETE_DS_REQUEST,dsName:e}),r.next=4,l.a.deleteDs({dsName:e,dsUser:t});case 4:o=r.sent,s(a(o)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),s((n="deleteDs failure",{type:i.b.LOAD_DSLIST_FAILURE,dsName:e,message:n}));case 11:case"end":return r.stop()}var n}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}();function a(t){return{type:i.b.DELETE_DS_SUCCESS,dsName:e,deleteStatus:t}}},deleteOneDoc:function(e,t,a,r,o){return function(){var i=Object(s.a)(n.a.mark((function s(i){var m,h,p;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m={_id:r,row:o},n.prev=1,(h={})._id=r,i(c(r,m)),n.next=7,l.a.deleteOneDoc({dsName:e,dsView:t,dsUser:a,selectorObj:h});case 7:p=n.sent,i(p?d(r,m,p):u(r,m,"deleteOneDoc failure")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),i(u(r,m,"deleteOneDoc failure"));case 14:case"end":return n.stop()}}),s,null,[[1,11]])})));return function(e){return i.apply(this,arguments)}}();function c(r,n){return{type:i.c.DELETE_SINGLE_REQUEST,dsName:e,dsView:t,dsUser:a,_id:r,deleteTracker:n}}function d(r,n,s){return{type:i.c.DELETE_SINGLE_SUCCESS,dsName:e,dsView:t,dsUser:a,_id:r,deleteTracker:n,serverStatus:s}}function u(r,n,s){return{type:i.c.DELETE_SINGLE_FAILURE,dsName:e,dsView:t,dsUser:a,_id:r,deleteTracker:n,message:s}}},deleteManyDocs:function(e,t,a,r,o){return function(){var i=Object(s.a)(n.a.mark((function s(i){var m,h;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return m={objects:r,rows:o},n.prev=1,i(c(m)),n.next=5,l.a.deleteManyDocs({dsName:e,dsView:t,dsUser:a,objects:r});case 5:h=n.sent,i(h?d(m,h):u(m,"deleteManyDocs failure")),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),i(u(m,"deleteManyDocs failure"));case 12:case"end":return n.stop()}}),s,null,[[1,9]])})));return function(e){return i.apply(this,arguments)}}();function c(r){return{type:i.c.DELETE_MANY_REQUEST,dsName:e,dsView:t,dsUser:a,deleteTracker:r}}function d(r,n){return{type:i.c.DELETE_MANY_SUCCESS,dsName:e,dsView:t,dsUser:a,deleteTracker:r,serverStatus:n}}function u(r,n){return{type:i.c.DELETE_MANY_FAILURE,dsName:e,dsView:t,dsUser:a,deleteTracker:r,message:n}}},setViewDefinitions:function(e,t,a,r,o,c,d,u){return function(){var h=Object(s.a)(n.a.mark((function s(h){var p;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,h({type:i.c.SET_VIEW_DEFS_REQUEST,dsName:e,dsView:t,dsUser:a}),!o){n.next=8;break}return n.next=5,l.a.setViewDefinitions({dsName:e,dsView:t,dsUser:a,viewDefs:r,jiraConfig:o,dsDescription:c,otherTableAttrs:d,aclConfig:u});case 5:p=n.sent,n.next=11;break;case 8:return n.next=10,l.a.setViewDefinitions({dsName:e,dsView:t,dsUser:a,viewDefs:r,dsDescription:c,otherTableAttrs:d,aclConfig:u});case 10:p=n.sent;case 11:h(p?(s=p,{type:i.c.SET_VIEW_DEFS_SUCCESS,dsName:e,dsView:t,dsUser:a,serverStatus:s}):m("setViewDefinitions failure")),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),h(m("setViewDefinitions failure"));case 17:case"end":return n.stop()}var s}),s,null,[[0,14]])})));return function(e){return h.apply(this,arguments)}}();function m(r){return{type:i.c.SET_VIEW_DEFS_FAILURE,dsName:e,dsView:t,dsUser:a,message:r}}},refreshJira:function(e,t,a){return function(){var o=Object(s.a)(n.a.mark((function s(o){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o({type:i.c.JIRA_REFRESH_REQUEST,dsName:e,dsView:t,dsUser:a}),n.next=4,l.a.refreshJira({dsName:e,dsView:t,dsUser:a});case 4:c=n.sent,o(c?(s=c,{type:i.c.JIRA_REFRESH_SUCCESS,dsName:e,dsView:t,dsUser:a,serverStatus:s}):r("Jira refresh failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),o(r("Jira refresh failure"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}();function r(r){return{type:i.c.JIRA_REFRESH_FAILURE,dsName:e,dsView:t,dsUser:a,message:r}}},addFilter:function(e,t,a,r){return function(){var c=Object(s.a)(n.a.mark((function s(c){var d;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:i.c.ADD_FILTER_REQUEST,dsName:e,dsView:t,dsUser:a,status:"inserting",filter:r}),n.next=4,l.a.addFilter({dsName:e,dsView:t,dsUser:a,filter:r});case 4:d=n.sent,c(d?(s=d,{type:i.c.ADD_FILTER_SUCCESS,dsName:e,dsView:t,dsUser:a,status:"success",serverStatus:s}):o("addFilter failure")),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log("Error:",n.t0),c(o("addFilter failure"));case 12:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return c.apply(this,arguments)}}();function o(r){return{type:i.c.ADD_FILTER__FAILURE,dsName:e,dsView:t,dsUser:a,status:"fail",message:r}}},editFilter:function(e,t,a,r){return function(){var c=Object(s.a)(n.a.mark((function s(c){var d;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:i.c.EDIT_FILTER_REQUEST,dsName:e,dsView:t,dsUser:a,status:"editing",filter:r}),n.next=4,l.a.editFilter({dsName:e,dsView:t,dsUser:a,filter:r});case 4:d=n.sent,c(d?(s=d,{type:i.c.EDIT_FILTER_SUCCESS,dsName:e,dsView:t,dsUser:a,status:"success",serverStatus:s}):o("editFilter failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),c(o("editFilter failure"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return c.apply(this,arguments)}}();function o(r){return{type:i.c.EDIT_FILTER__FAILURE,dsName:e,dsView:t,dsUser:a,status:"fail",message:r}}},deleteFilter:function(e,t,a,r){return function(){var c=Object(s.a)(n.a.mark((function s(c){var d;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:i.c.DELETE_FILTER_REQUEST,dsName:e,dsView:t,dsUser:a,status:"deleting",filter:r}),n.next=4,l.a.deleteFilter({dsName:e,dsView:t,dsUser:a,filter:r});case 4:d=n.sent,c(d?(s=d,{type:i.c.DELETE_FILTER_SUCCESS,dsName:e,dsView:t,dsUser:a,status:"success",serverStatus:s}):o("deleteFilter failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),c(o("deleteFilter failure"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return c.apply(this,arguments)}}();function o(r){return{type:i.c.DELETE_FILTER__FAILURE,dsName:e,dsView:t,dsUser:a,status:"fail",message:r}}},clearBulkEditStore:function(){return function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:i.c.CLEAR_DS});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},uploadBulkEditXlsFile:function(e,t){return function(){var i=Object(s.a)(n.a.mark((function s(i){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(a(e)),n.prev=1,n.next=4,l.b.fileUpload(t);case 4:c=n.sent,i(c?r(e,c):o("Upload failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),i(o("Uploading xls file failed"));case 11:case"end":return n.stop()}}),s,null,[[1,8]])})));return function(e){return i.apply(this,arguments)}}();function a(e){return{type:i.c.UPLOAD_BULK_XLS_REQUEST,fileName:e}}function r(e,t){return{type:i.c.UPLOAD_BULK_XLS_SUCCESS,fileName:e,sheetInfo:t}}function o(e){return{type:i.c.UPLOAD_BULK_XLS_FAILURE,message:e}}},setSelectedSheet:function(e){return function(){var a=Object(s.a)(n.a.mark((function a(r){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r(t(e));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function t(e){return{type:i.c.SET_BULK_SELECTED_SHEET,sheetName:e}}},loadHdrsFromRange:function(e,t,a){return function(){var i=Object(s.a)(n.a.mark((function s(i){var d;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(r(a)),n.next=4,l.b.loadHdrsFromRange({fileName:e,sheetName:t,selectedRange:a});case 4:d=n.sent,i(d?o(e,t,d):c("Load Data from Range failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(c("Load Data from Range failure"));case 11:case"end":return n.stop()}}),s,null,[[0,8]])})));return function(e){return i.apply(this,arguments)}}();function r(e){return{type:i.c.LOAD_BULK_FROM_RANGE_REQUEST,selectedRange:e}}function o(e,t,a){return{type:i.c.LOAD_BULK_FROM_RANGE_SUCCESS,fileName:e,sheetName:t,loadStatus:a}}function c(e){return{type:i.c.LOAD_BULK_FROM_RANGE_FAILURE,message:e}}},doBulkEditRequest:function(e,t,a,r,o,c,d){return function(){var i=Object(s.a)(n.a.mark((function s(i){var p;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(u(r)),n.next=4,l.a.doBulkEditRequest({dsName:e,fileName:t,sheetName:a,selectedRange:r,setRowsFrmSheet:o,setColsFrmSheet:c,doIt:d});case 4:p=n.sent,i(p?m(t,a,p):h("validate BulkEdit request failed")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(h("Validate BulkEdit request failure"));case 11:case"end":return n.stop()}}),s,null,[[0,8]])})));return function(e){return i.apply(this,arguments)}}();function u(e){return{type:i.c.BULK_EDIT_REQUEST,selectedRange:e}}function m(e,t,a){return{type:i.c.BULK_EDIT_SUCCESS,fileName:e,sheetName:t,loadStatus:a}}function h(e){return{type:i.c.BULK_EDIT_FAILURE,message:e}}}}},231:function(e,t,a){},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return h}));var r=a(3),n=a.n(r),s=a(7),i=a(21),l=a(15);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={CLEAR_DS:"CLEAR_DS",UPLOAD_XLS_REQUEST:"UPLOAD_XLS_REQUEST",UPLOAD_XLS_SUCCESS:"UPLOAD_XLS_SUCCESS",UPLOAD_XLS_FAILURE:"UPLOAD_XLS_FAILURE",UPLOAD_CSV_REQUEST:"UPLOAD_CSV_REQUEST",UPLOAD_CSV_SUCCESS:"UPLOAD_CSV_SUCCESS",UPLOAD_CSV_FAILURE:"UPLOAD_CSV_FAILURE",SET_SELECTED_SHEET:"SET_SELECTED_SHEET",SET_SELECTED_KEYS:"SET_SELECTED_KEYS",FIND_HDRS_INXLS_REQUEST:"FIND_HDRS_INXLS_REQUEST",FIND_HDRS_INXLS_SUCCESS:"FIND_HDRS_INXLS_SUCCESS",FIND_HDRS_INXLS_FAILURE:"FIND_HDRS_INXLS_FAILURE",LOAD_FROM_RANGE_REQUEST:"LOAD_FROM_RANGE_REQUEST",LOAD_FROM_RANGE_SUCCESS:"LOAD_FROM_RANGE_SUCCESS",LOAD_FROM_RANGE_FAILURE:"LOAD_FROM_RANGE_FAILURE",CREATE_DS_REQUEST:"CREATE_DS_REQUEST",CREATE_DS_SUCCESS:"CREATE_DS_SUCCESS",CREATE_DS_FAILURE:"CREATE_DS_FAILURE"},u={};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.CLEAR_DS:return{};case d.UPLOAD_XLS_REQUEST:case d.UPLOAD_CSV_REQUEST:return{uploadStatus:"uploading",fileName:t.fileName};case d.UPLOAD_XLS_SUCCESS:return{uploadStatus:"success",fileName:t.fileName,sheetInfo:t.sheetInfo};case d.UPLOAD_CSV_SUCCESS:return{uploadStatus:"success",fileName:t.fileName,hdrs:t.hdrs};case d.UPLOAD_XLS_FAILURE:case d.UPLOAD_CSV_FAILURE:return{uploadStatus:"fail",uploadError:t.message};case d.SET_SELECTED_SHEET:return c({},e,{selectedSheet:t.sheetName});case d.LOAD_FROM_RANGE_REQUEST:return c({},e,{selectedRange:t.selectedRange});case d.LOAD_FROM_RANGE_SUCCESS:case d.LOAD_FROM_RANGE_FAILURE:return c({},e,{loadStatus:t.loadStatus});case d.SET_SELECTED_KEYS:return c({},e,{selectedKeys:t.selectedKeys});case d.CREATE_DS_REQUEST:return c({},e,{dsName:t.dsName});case d.CREATE_DS_SUCCESS:return c({},e,{createStatus:t.createStatus});case d.CREATE_DS_FAILURE:return c({},e,{createStatus:{status:"fail",error:t.message}});default:return e}}var h={clearReduxStore:function(){return function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:d.CLEAR_DS});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},uploadXlsFile:function(e,t){return function(){var o=Object(s.a)(n.a.mark((function s(o){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(a(e)),n.prev=1,n.next=4,l.b.fileUpload(t);case 4:c=n.sent,o(c?r(e,c):i("Upload failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),o(i("Uploading xls file failed"));case 11:case"end":return n.stop()}}),s,null,[[1,8]])})));return function(e){return o.apply(this,arguments)}}();function a(e){return{type:d.UPLOAD_XLS_REQUEST,fileName:e}}function r(e,t){return{type:d.UPLOAD_XLS_SUCCESS,fileName:e,sheetInfo:t}}function i(e){return{type:d.UPLOAD_XLS_FAILURE,message:e}}},setSelectedSheet:function(e){return function(){var a=Object(s.a)(n.a.mark((function a(r){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r(t(e));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function t(e){return{type:d.SET_SELECTED_SHEET,sheetName:e}}},findHeadersInSheet:function(e,t){return function(){var i=Object(s.a)(n.a.mark((function s(i){var o;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i({type:d.FIND_HDRS_INXLS_REQUEST}),n.next=4,l.b.findHeadersInSheet({fileName:e,sheetName:t});case 4:o=n.sent,i(o?a(e,t,o):r("Upload failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(r("Finding Hdrs failed failed"));case 11:case"end":return n.stop()}}),s,null,[[0,8]])})));return function(e){return i.apply(this,arguments)}}();function a(e,t,a){return{type:d.FIND_HDRS_INXLS_SUCCESS,fileName:e,sheetName:t,hdrsInSheet:a}}function r(e){return{type:d.FIND_HDRS_INXLS_FAILURE,message:e}}},loadHdrsFromRange:function(e,t,a){return function(){var c=Object(s.a)(n.a.mark((function s(c){var d;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(r(a)),n.next=4,l.b.loadHdrsFromRange({fileName:e,sheetName:t,selectedRange:a});case 4:d=n.sent,c(d?i(e,t,d):o("Load Data from Range failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),c(o("Load Data from Range failure"));case 11:case"end":return n.stop()}}),s,null,[[0,8]])})));return function(e){return c.apply(this,arguments)}}();function r(e){return{type:d.LOAD_FROM_RANGE_REQUEST,selectedRange:e}}function i(e,t,a){return{type:d.LOAD_FROM_RANGE_SUCCESS,fileName:e,sheetName:t,loadStatus:a}}function o(e){return{type:d.LOAD_FROM_RANGE_FAILURE,message:e}}},setSelectedKeys:function(e){return function(){var a=Object(s.a)(n.a.mark((function a(r){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r(t(e));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function t(e){return{type:d.SET_SELECTED_KEYS,selectedKeys:e}}},createDs:function(e,t,a,r,i,o){return function(){var m=Object(s.a)(n.a.mark((function s(m){var h;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,m(c(i)),n.next=4,l.b.createDs({fileName:e,sheetName:t,selectedRange:a,selectedKeys:r,dsName:i,dsUser:o});case 4:h=n.sent,m(h?(s=h,{type:d.CREATE_DS_SUCCESS,fileName:e,sheetName:t,selectedRange:a,selectedKeys:r,dsName:i,createStatus:s}):u("Create Ds failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),m(u("Create Ds exception"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return m.apply(this,arguments)}}();function c(e){return{type:d.CREATE_DS_REQUEST,dsName:e}}function u(e){return{type:d.CREATE_DS_FAILURE,message:e}}},uploadCsvFile:function(e,t){return function(){var o=Object(s.a)(n.a.mark((function s(o){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o(a(e)),n.prev=1,n.next=4,l.b.csvFileUpload(t);case 4:c=n.sent,o(c?r(e,c):i("Upload failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),o(i("Uploading csv file failed"));case 11:case"end":return n.stop()}}),s,null,[[1,8]])})));return function(e){return o.apply(this,arguments)}}();function a(e){return{type:d.UPLOAD_CSV_REQUEST,fileName:e}}function r(e,t){return{type:d.UPLOAD_CSV_SUCCESS,fileName:e,hdrs:t}}function i(e){return{type:d.UPLOAD_CSV_FAILURE,message:e}}},createDsViaCsv:function(e,t,a,r){return function(){var c=Object(s.a)(n.a.mark((function s(c){var u;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(i(a)),n.next=4,l.b.createDsViaCsv({fileName:e,selectedKeys:t,dsName:a,dsUser:r});case 4:u=n.sent,c(u?(s=u,{type:d.CREATE_DS_SUCCESS,fileName:e,selectedKeys:t,dsName:a,createStatus:s}):o("Create Ds failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),c(o("Create Ds exception"));case 11:case"end":return n.stop()}var s}),s,null,[[0,8]])})));return function(e){return c.apply(this,arguments)}}();function i(e){return{type:d.CREATE_DS_REQUEST,dsName:e}}function o(e){return{type:d.CREATE_DS_FAILURE,message:e}}},createDsFromDs:function(e,t,a,r){return function(){var o=Object(s.a)(n.a.mark((function s(o){var c;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o((u=t,{type:d.CREATE_DS_REQUEST,dsName:u})),n.next=4,l.b.createDsFromDs({fromDsName:e,toDsName:t,dsUser:a,retainData:r});case 4:c=n.sent,o(c?(s=c,{type:d.CREATE_DS_SUCCESS,fromDsName:e,toDsName:t,createStatus:s}):i("Create DsFromDs failure")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),o(i("Create DsFromDs exception"));case 11:case"end":return n.stop()}var s,u}),s,null,[[0,8]])})));return function(e){return o.apply(this,arguments)}}();function i(e){return{type:d.CREATE_DS_FAILURE,message:e}}}}},290:function(e,t,a){"use strict";(function(e){var r=a(3),n=a.n(r),s=a(7),i=a(21),l=a(54),o=a(5),c=a(6),d=a(10),u=a(9),m=a(2),h=a(11),p=a(0),f=a.n(p),E=a(17),g=a(37),v=a(26),b=a(20),S=a(19),y=a(1),C=a(25),w=a(60),_=a(81),k=a(178),A=a(80),O=a.n(A),D=(a(328),a(90)),R=a(173),T=a(291),L=a(124),F=a(297),j=a(53),x=(a(230),a(231),a(174),a(465),a(466),a(114),a(299));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=new a(118)({linkify:!0,html:!0}).use(a(119)).use(a(120)).use(a(58),"code").use(a(58),"indent1").use(a(58),"indent2").use(a(58),"indent3").use(a(163)).use(x.a).use(a(851),{imageFormat:"png"}).use(a(58),"slide").use(a(853).markdownItFancyListPlugin),V=I.renderer.rules.link_open||function(e,t,a,r,n){return n.renderToken(e,t,a)};I.renderer.rules.link_open=function(e,t,a,r,n){var s=e[t].attrIndex("target");return s<0?e[t].attrPush(["target","_blank"]):e[t].attrs[s][1]="_blank",V(e,t,a,r,n)};var P={apiUrl:""},H=a(856).connect(P.apiUrl),M=function(t){function a(e){var t;Object(o.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={firstTime:!0,filterButtonText:"Enable Filters",editingButtonText:"Disable Editing",pageSize:30,totalRecs:0,refresh:0,initialHeaderFilter:[],initialSort:[],filterColumnAttrs:{},currentColumnAttrs:{},filter:"",frozenCol:"",showModal:!1,modalTitle:"Title of modal",modalQuestion:"",modalCallback:null,modalStatus:"",modalCancel:"Cancel",modalOk:"Do It!",chronologyDescending:!1,singleClickEdit:!1,showAllFilters:!1,disableEditing:!1,showColorPicker:!1,colorPickerLeft:0,colorPickerTop:0,color:0,connectedState:!1},t.ref=null,t.timers={},t.lockedByOthersCells={},t.firstRenderCompleted=!1,t.cellImEditing=null,t.mouseDownOnHtmlLink=!1,t.mouseDownOnBadgeCopyIcon=!1,t.applyHtmlLinkAndBadgeClickHandlers=t.applyHtmlLinkAndBadgeClickHandlers.bind(Object(m.a)(t)),t.renderComplete=t.renderComplete.bind(Object(m.a)(t)),t.cellEditing=t.cellEditing.bind(Object(m.a)(t)),t.cellEdited=t.cellEdited.bind(Object(m.a)(t)),t.cellEditCancelled=t.cellEditCancelled.bind(Object(m.a)(t)),t.cellEditCheck=t.cellEditCheck.bind(Object(m.a)(t)),t.cellForceEditTrigger=t.cellForceEditTrigger.bind(Object(m.a)(t)),t.fixImgSizeForClipboard=t.fixImgSizeForClipboard.bind(Object(m.a)(t)),t.copyFormatted=t.copyFormatted.bind(Object(m.a)(t)),t.startPreso=t.startPreso.bind(Object(m.a)(t)),t.myCopyToClipboard=t.myCopyToClipboard.bind(Object(m.a)(t)),t.recordRef=t.recordRef.bind(Object(m.a)(t)),t.downloadXlsx=t.downloadXlsx.bind(Object(m.a)(t)),t.toggleFilters=t.toggleFilters.bind(Object(m.a)(t)),t.toggleEditing=t.toggleEditing.bind(Object(m.a)(t)),t.addRow=t.addRow.bind(Object(m.a)(t)),t.deleteRowHandler=t.deleteRowHandler.bind(Object(m.a)(t)),t.deleteRowQuestion=t.deleteRowQuestion.bind(Object(m.a)(t)),t.deleteAllRowsInViewQuestion=t.deleteAllRowsInViewQuestion.bind(Object(m.a)(t)),t.deleteAllRowsInView=t.deleteAllRowsInView.bind(Object(m.a)(t)),t.deleteAllRowsInQuery=t.deleteAllRowsInQuery.bind(Object(m.a)(t)),t.duplicateAndAddRowHandler=t.duplicateAndAddRowHandler.bind(Object(m.a)(t)),t.toggleSingleFilter=t.toggleSingleFilter.bind(Object(m.a)(t)),t.freezeColumn=t.freezeColumn.bind(Object(m.a)(t)),t.unfreezeColumn=t.unfreezeColumn.bind(Object(m.a)(t)),t.setFreezeColumn=t.setFreezeColumn.bind(Object(m.a)(t)),t.pageSizeChange=t.pageSizeChange.bind(Object(m.a)(t)),t.ajaxResponse=t.ajaxResponse.bind(Object(m.a)(t)),t.ajaxURLGenerator=t.ajaxURLGenerator.bind(Object(m.a)(t)),t.cellClickEvents=t.cellClickEvents.bind(Object(m.a)(t)),t.copyToClipboard=t.copyToClipboard.bind(Object(m.a)(t)),t.copyCellToClipboard=t.copyCellToClipboard.bind(Object(m.a)(t)),t.pickFillColorHandler=t.pickFillColorHandler.bind(Object(m.a)(t)),t.handleColorPickerClose=t.handleColorPickerClose.bind(Object(m.a)(t)),t.handleColorPickerOnChangeComplete=t.handleColorPickerOnChangeComplete.bind(Object(m.a)(t)),t.jiraRefreshHandler=t.jiraRefreshHandler.bind(Object(m.a)(t)),t.jiraRefreshStatus=t.jiraRefreshStatus.bind(Object(m.a)(t)),t.toggleModal=t.toggleModal.bind(Object(m.a)(t)),t.processFilterChange=t.processFilterChange.bind(Object(m.a)(t)),t.isKey=t.isKey.bind(Object(m.a)(t)),t.hideColumn=t.hideColumn.bind(Object(m.a)(t)),t.showAllCols=t.showAllCols.bind(Object(m.a)(t)),t.hideColumnFromCell=t.hideColumnFromCell.bind(Object(m.a)(t)),t.columnResized=t.columnResized.bind(Object(m.a)(t)),t.columnVisibilityChanged=t.columnVisibilityChanged.bind(Object(m.a)(t)),t.retainColumnAttrs=t.retainColumnAttrs.bind(Object(m.a)(t)),t.applyFilterColumnAttrs=t.applyFilterColumnAttrs.bind(Object(m.a)(t)),t.normalizeAllImgRows=t.normalizeAllImgRows.bind(Object(m.a)(t)),t.applyHighlightJsBadge=t.applyHighlightJsBadge.bind(Object(m.a)(t)),t.displayConnectedStatus=t.displayConnectedStatus.bind(Object(m.a)(t));var r=localStorage.getItem("chronologyDescending");r=JSON.parse(r),t.state.chronologyDescending=r;var n=localStorage.getItem("singleClickEdit");n=JSON.parse(n),t.state.singleClickEdit=n;var s=localStorage.getItem("showAllFilters");s=JSON.parse(s),t.state.showAllFilters=s;var i=localStorage.getItem("disableEditing");return i=JSON.parse(i),t.state.disableEditing=i,t}return Object(h.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,r=t.match,n=t.user,s=t.dsHome,i=r.params.dsName,l=r.params.dsView;Object.keys(s).length&&s.dsViews&&s.dsViews[l]||a(S.a.loadColumnsForUserView(i,l,n.user));var o=this;H.on("connect",(function(e){H.emit("Hello",{user:n.user}),o.setState({connectedState:!0})})),H.on("disconnect",(function(e){o.setState({connectedState:!1})})),H.on("Hello",(function(e){})),H.on("activeLocks",(function(t){o.setState({connectedState:!0}),t=JSON.parse(t),console.log("Active locks: ",t);for(var a=Object.keys(t),r=0;r<a.length;r++){var n=a[r],s=o.ref.table.searchRows("_id","=",n);if(s.length){console.log("Found row!");for(var i=Object.keys(t[n]),l=0;l<i.length;l++){var c=i[l];console.log("Field is: ",c);var d=s[0].getCell(c);console.log("Cell is: ",d),t[n][c]=d,d&&(o.cellImEditing===d&&(console.log("Whoops, someone else got there first.."),d.cancelEdit()),d.getElement().style.backgroundColor="lightGray")}}}e.lockedByOthersCells=t})),H.on("locked",(function(e){if(console.log("Received locked: ",e),o.ref&&o.ref.table&&i===e.dsName){var t=o.ref.table.searchRows("_id","=",e._id);if(!t.length)return;var a=t[0].getCell(e.field);o.lockedByOthersCells[e._id]||(o.lockedByOthersCells[e._id]={}),o.lockedByOthersCells[e._id][e.field]=a,o.cellImEditing===a&&(console.log("Whoops, someone else got there first.."),a.cancelEdit()),a.getElement().style.backgroundColor="lightGray"}})),H.on("unlocked",(function(e){var t=!1;try{if(!o.ref||!o.ref.table)return;if(i===e.dsName&&o.lockedByOthersCells[e._id][e.field]){var a=o.lockedByOthersCells[e._id][e.field];if(delete o.lockedByOthersCells[e._id][e.field],void 0!==e.newVal&&null!==e.newVal){var r={_id:e._id};r[e.field]=e.newVal,o.ref.table.updateData([r]),t=!0}a.getElement().style.backgroundColor="";var n=a.getColumn().getDefinition();n.formatter(a,n.formatterParams)}else if(i===e.dsName&&e.newVal){var s=o.ref.table.searchRows("_id","=",e._id);if(!s.length)return;s[0].getCell(e.field);var l={_id:e._id};l[e.field]=e.newVal,o.ref.table.updateData([l]),t=!0}}catch(c){}t&&!o.cellImEditing&&(o.timers["post-cell-edited"]&&(clearTimeout(o.timers["post-cell-edited"]),o.timers["post-cell-edited"]=null),o.timers["post-cell-edited"]=setTimeout((function(){o.cellImEditing?console.log("Skipping adjusttablesie (unlockReq)... "):(console.log("Doing adjusttablesize (unlockReq)... "),o.ref.table.rowManager.adjustTableSize(!1),o.normalizeAllImgRows(),o.applyHighlightJsBadge())}),500)),console.log("Received unlocked: ",e)}))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:y.c.CLEAR_COLUMNS})}},{key:"renderComplete",value:function(){var e=this.props.match.params.dsName;H.emit("getActiveLocks",e),this.normalizeAllImgRows(),this.applyHighlightJsBadge()}},{key:"applyHtmlLinkAndBadgeClickHandlers",value:function(){for(var e=this,t=document.getElementById("tabulator").getElementsByTagName("a"),a=0,r=t.length;a<r;a++)t[a].onclick=function(t){return e.mouseDownOnHtmlLink=!0,t.stopPropagation(),setTimeout((function(){return e.mouseDownOnHtmlLink=!1}),1e3),!0};for(a=0,r=(t=document.getElementById("tabulator").querySelectorAll(".code-badge-copy-icon")).length;a<r;a++)t[a].setAttribute("tabindex",0),t[a].addEventListener("focus",(function(t){var a=t.srcElement;if(console.log("Classlist is: ".concat(a.classList)),a.classList.contains("code-badge-copy-icon"))return e.mouseDownOnBadgeCopyIcon=!0,setTimeout((function(){return e.mouseDownOnBadgeCopyIcon=!1}),1e3),!0}))}},{key:"applyHighlightJsBadge",value:function(){var e=this;this.timers.applyHighlightJsBadge&&(clearTimeout(this.timers.applyHighlightJsBadge),this.timers.applyHighlightJsBadge=null),this.timers.applyHighlightJsBadge=setTimeout((function(){window.highlightJsBadge(),e.applyHtmlLinkAndBadgeClickHandlers()}),1e3)}},{key:"fixImgSizeForClipboard",value:function(e){for(var t=document.querySelectorAll("img"),a={},r=0;r<t.length;r++){var n={};n.src=t[r].getAttribute("src"),n.width=t[r].width,n.height=t[r].height,a[n.src]=n}for(var s=Object(l.a)(e.matchAll(/<img src="(.*?)"/gi)),i=0;i<s.length;i++){var o=s[i][1];if(a[o]&&!/data:image/.test(o)){var c='<img src="'.concat(o,'" alt="').concat(o,'" width=".*" height=".*"'),d='<img src="'.concat(o,'" alt="').concat(o,'" width=').concat(a[o].width," height=").concat(a[o].height);e=e.replace(new RegExp(c),d)}}return e=e.replaceAll('<img src="/attachments/','<img src="'.concat(window.location.origin,"/attachments/"))}},{key:"normalizeAllImgRows",value:function(){var e=this;this.timers.normalizeAllImgRows&&(clearInterval(this.timers.normalizeAllImgRows),this.timers.normalizeAllImgRows=null);var t=0;this.timers.normalizeAllImgRows=setInterval((function(){if("complete"===document.readyState){for(var a=document.querySelectorAll("img"),r=!0,n=0;n<a.length;n++)if(!a[n].complete){r=!1,t=0;break}if(r){if(2===t)if(a.length&&!e.cellImEditing){for(var s=e.ref.table.getRows(),i=0;i<s.length;i++)s[i].normalizeHeight();e.ref.table.rowManager.adjustTableSize(!1)}else console.log("Skipping normalize as there are no images or some editing in progress...");t>=10&&(t=0,clearInterval(e.timers.normalizeAllImgRows),e.timers.normalizeAllImgRows=null),t++}}}),300)}},{key:"showAllCols",value:function(){for(var e=this.ref.table.getColumns(),t=0;t<e.length;t++)e[t].isVisible()||e[t].show()}},{key:"hideColumn",value:function(e,t){var a=this.props,r=a.match;a.dsHome,r.params.dsName,r.params.dsView;this.isKey(t.getField())||t.hide()}},{key:"hideColumnFromCell",value:function(e,t){var a=t.getColumn();this.isKey(a.getField())||a.hide()}},{key:"columnResized",value:function(e){var t=this.state.currentColumnAttrs[e.getField()];if(t||(t={}),t.width!==e.getWidth()){var a=U({},this.state.currentColumnAttrs);t.width=e.getWidth(),a[e.getField()]=t,this.setState({currentColumnAttrs:a})}}},{key:"columnVisibilityChanged",value:function(e,t){var a=this.state.currentColumnAttrs[e.getField()];if(a||(a={}),a.hidden!==!t){var r=U({},this.state.currentColumnAttrs);a.hidden=!t,r[e.getField()]=a,this.setState({currentColumnAttrs:r})}}},{key:"isKey",value:function(e){var t=this.props,a=t.match,r=t.dsHome,n=(a.params.dsName,a.params.dsView);if(r.dsViews[n].keys&&r.dsViews[n].keys.length)for(var s=0;s<r.dsViews[n].keys.length;s++){if(e===r.dsViews[n].keys[s])return!0}return!1}},{key:"toggleModal",value:function(e){this.state.modalCallback(e),this.setState({showModal:!this.state.showModal})}},{key:"cellClickEvents",value:function(e,t){"dblclick"!==e.type||this.state.singleClickEdit||this.state.disableEditing||!this.cellEditCheckForConflicts(t)||t.edit(!0)}},{key:"cellEditCheckForConflicts",value:function(e){try{var t=e.getColumn().getField(),a=e.getRow().getData()._id;if(this.lockedByOthersCells[a][t])return!1}catch(r){}return!this.mouseDownOnHtmlLink&&!this.mouseDownOnBadgeCopyIcon}},{key:"cellEditCheck",value:function(e){return!!this.state.singleClickEdit&&(!this.state.disableEditing&&(!!this.state.connectedState&&this.cellEditCheckForConflicts(e)))}},{key:"cellForceEditTrigger",value:function(t){return console.log("In cellForceEditTrigger"),!!this.state.singleClickEdit&&(!this.state.disableEditing&&(!!this.state.connectedState&&void(this.cellEditCheckForConflicts(t)&&e((function(){console.log("Going to call force edit"),t.edit(!0)})))))}},{key:"cellEditCancelled",value:function(e){var t=this,a=this.props.match,r=a.params.dsName,n=a.params.dsView,s=e.getColumn().getField(),i=e.getRow().getData()._id;if(i){var l=this;this.cellImEditing===e?this.cellImEditing=null:console.log("Not nullifying cellImEditing as it is not me!");var o={_id:i,field:s,dsName:r,dsView:n};H.emit("unlockReq",o),this.timers["post-cell-edited"]&&(clearTimeout(this.timers["post-cell-edited"]),this.timers["post-cell-edited"]=null),this.timers["post-cell-edited"]=setTimeout((function(){l.cellImEditing?console.log("Skipping adjusttablesize (cellEditCancelled)..."):(console.log("Doing adjusttablesize (cellEditCancelled)... "),t.ref.table.rowManager.adjustTableSize(!1),t.normalizeAllImgRows(),t.applyHighlightJsBadge())}),500),this.ref.table.element.focus({preventScroll:!1})}}},{key:"cellEditing",value:function(e){var t=this.props.match,a=t.params.dsName,r=t.params.dsView,n=e.getColumn().getField(),s=e.getRow().getData()._id;if(s){this.cellImEditing=e;var i={_id:s,field:n,dsName:a,dsView:r};H.emit("lockReq",i),this.timers["post-cell-edited"]&&(clearTimeout(this.timers["post-cell-edited"]),this.timers["post-cell-edited"]=null)}}},{key:"toggleFilters",value:function(){var e=this.props,t=e.dsHome,a=e.match.params.dsView;this.ref.table.clearHeaderFilter();for(var r,n=this.ref.table.getColumnDefinitions(),s=0;s<n.length;s++){r=!n[s].headerFilter&&"input";try{r&&t.dsViews[a].columnAttrs[s].headerFilterType&&(r=t.dsViews[a].columnAttrs[s].headerFilterType)}catch(i){}n[s].headerFilter=r}this.ref.table.setColumns(n),this.setState({filterButtonText:r?"Disable Filtering":"Enable Filtering"})}},{key:"toggleEditing",value:function(){for(var e,t=this.props,a=t.dsHome,r=t.match.params.dsView,n=this.ref.table.getColumnDefinitions(),s=0;s<n.length;s++){e=!n[s].editor&&"input",n[s].editor=e;try{e&&(n[s].editor=a.dsViews[r].columnAttrs[s].editor,"textarea"===n[s].editor?n[s].editor=_.a:"codemirror"===n[s].editor?n[s].editor=k.a:"date"===n[s].editor&&(n[s].editor=O.a),console.log("Field: ",n[s].field,"editor: ",a.dsViews[r].columnAttrs[s].editor))}catch(l){}}var i=this.ref.table.getHeaderFilters();this.ref.table.setColumns(n),this.setState({editingButtonText:e?"Disable Editing":"Enable Editing",initialHeaderFilter:i,refresh:this.state.refresh+1})}},{key:"addRow",value:function(){var e=Object(s.a)(n.a.mark((function e(t,a,r){var s,i,l,o,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.props,s.dispatch,i=s.match,l=s.dsHome,o=i.params.dsView,r||(r={}),e.prev=3,!Object.keys(l.dsRowAdds[o]).length){e.next=7;break}return console.log("A row add is in progress.."),e.abrupt("return");case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:return e.next=13,this.ref.table.addRow(r,!0);case 13:c=e.sent,console.log("Row is: ",c);case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"startPreso",value:function(){for(var e=!1,t="",a=document.querySelectorAll(".slide"),r=0;r<a.length;r++){var n=a[r];e=!0,t+='<section class="top">'.concat(n.innerHTML,"</section>")}e&&(t=t.replace(/<pre class="code-badge-pre"[\s\S]*?(<code [\s\S]*?<\/code>)<\/pre>/gi,"<pre>$1</pre>"),localStorage.setItem("revealjsSections",t),window.open("/revealjs","_blank"))}},{key:"myCopyToClipboard",value:function(){var e=this.ref.table.modules.export.getHtml(!0,!0,null,"clipboard");this.copyFormatted(null,e)}},{key:"copyToClipboard",value:function(){this.myCopyToClipboard()}},{key:"copyFormatted",value:function(e,t){var a=document.createElement("div");e&&(t=e.innerHTML),t=(t=(t=this.fixImgSizeForClipboard(t)).replace(/<pre class="code-badge-pre"[\s\S]*?(<code [\s\S]*?<\/code>)<\/pre>/gi,"<pre>$1</pre>")).replace(/<code class="hljs">/gi,'<code class="hljs" style="background-color:white; font-size:12px">'),a.innerHTML=t,a.style.position="fixed",a.style.pointerEvents="none",a.style.opacity=0;var r=Array.prototype.slice.call(document.styleSheets).filter((function(e){return!e.disabled}));document.body.appendChild(a),window.getSelection().removeAllRanges();var n=document.createRange();n.selectNode(a),window.getSelection().addRange(n),document.execCommand("copy");for(var s=0;s<r.length;s++)/static\/css/.test(r[s].href)||(r[s].disabled=!0);document.execCommand("copy");for(s=0;s<r.length;s++)/static\/css/.test(r[s].href)||(r[s].disabled=!1);document.body.removeChild(a)}},{key:"copyFormattedBetter",value:function(e){window.getSelection().removeAllRanges();var t=document.createRange();t.selectNode(e),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges()}},{key:"copyCellToClipboard",value:function(e,t){var a=t.getColumn().getDefinition();a.formatter(t,a.formatterParams);this.copyFormatted(null,'<div style="font-family:verdana; font-size:12px; background-color: white">'.concat(t.getElement().innerHTML,"</div>"))}},{key:"step1",value:function(){var e=this.props,t=e.match,a=e.dsHome,r=t.params.dsView;!Object.keys(a).length||!a.dsViews||a.dsViews[r];try{a.dsViews[r].columns}catch(n){}return""}},{key:"recordRef",value:function(e){return this.ref=e,!0}},{key:"downloadXlsx",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.user,n=a.params.dsName,s=a.params.dsView;t(S.a.downloadXlsx(n,s,r.user))}},{key:"addRowStatus",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.dsHome,n=a.params.dsView,s="";try{if("filling"===r.dsRowAdds[n].status)return"";"fail"===r.dsRowAdds[n].status?s="New row add api failed":"fail"===r.dsRowAdds[n].serverStatus.status?s="Row addition failed, key might already be used. Try a different key.":"success"===r.dsRowAdds[n].serverStatus.status&&(console.log("Updating with: ",r.dsRowAdds[n].serverStatus._id),r.dsRowAdds[n].uiRow.update({_id:r.dsRowAdds[n].serverStatus._id}),t({type:y.c.CLEAR_ROW_ADD_TRACKER}))}catch(i){}return f.a.createElement("b",{style:{color:"red"}}," ",s," ")}},{key:"cellEditStatus",value:function(){var e=this,t=this.props,a=t.dispatch,r=t.match,n=(t.user,t.dsHome),s=r.params.dsName,i=r.params.dsView,l=this.state.modalStatus,o=!1;try{Object.entries(n.dsEdits).map((function(t){var r=t[0];if("done"===n.dsEdits[r].editStatus&&"fail"===n.dsEdits[r].serverStatus.status&&n.dsEdits[r].serverStatus.hasOwnProperty("value")){var c={_id:r};c[n.dsEdits[r].serverStatus.column]=n.dsEdits[r].serverStatus.value,console.log("Update: ",c),e.ref.table.updateData([c]),l+='Update <b style="color:red">failed</b>, [key, RejectedValue]: ['.concat(n.dsEdits[r].serverStatus.column,", ").concat(n.dsEdits[r].editTracker.newVal,"]<br/><br/>"),o=!0,e.cellImEditing=null;var d={_id:r,field:n.dsEdits[r].editTracker.field,dsName:s,dsView:i};H.emit("unlockReq",d),a({type:y.c.EDIT_SINGLE_DELETE_TRACKER,_id:r})}else if("done"===n.dsEdits[r].editStatus&&"fail"===n.dsEdits[r].serverStatus.status&&n.dsEdits[r].serverStatus.hasOwnProperty("error")){var u={_id:r};u[n.dsEdits[r].editTracker.field]=n.dsEdits[r].editTracker.oldVal,e.ref.table.updateData([u]),l+='Update <b style="color:red">failed</b>, (error: '.concat(n.dsEdits[r].serverStatus.error,"), reverted [key, RejectedValue]: [").concat(n.dsEdits[r].editTracker.field,", ").concat(n.dsEdits[r].editTracker.newVal,"]<br/><br/>"),o=!0,e.cellImEditing=null;var m={_id:r,field:n.dsEdits[r].editTracker.field,dsName:s,dsView:i};H.emit("unlockReq",m),a({type:y.c.EDIT_SINGLE_DELETE_TRACKER,_id:r})}else if("done"===n.dsEdits[r].editStatus&&"success"===n.dsEdits[r].serverStatus.status){o=!1,e.cellImEditing=null;var h=n.dsEdits[r].editTracker.field,p=n.dsEdits[r].editTracker.newVal,f={_id:r,field:h,dsName:s,dsView:i,newVal:p};H.emit("unlockReq",f),a({type:y.c.EDIT_SINGLE_DELETE_TRACKER,_id:r})}else if("fail"===n.dsEdits[r].editStatus){var E={_id:r};E[n.dsEdits[r].editTracker.field]=n.dsEdits[r].editTracker.oldVal,e.ref.table.updateData([E]),l+='Update <b style="color:red">failed</b>, reverted [key, RejectedValue]: ['.concat(n.dsEdits[r].editTracker.field,", ").concat(n.dsEdits[r].editTracker.newVal,"]<br/><br/>"),o=!0,e.cellImEditing=null;var g={_id:r,field:n.dsEdits[r].editTracker.field,dsName:s,dsView:i};H.emit("unlockReq",g),a({type:y.c.EDIT_SINGLE_DELETE_TRACKER,_id:r})}}))}catch(u){}if(o){var c=this,d=l?f.a.createElement("div",{dangerouslySetInnerHTML:{__html:l}}):f.a.createElement("div",{dangerouslySetInnerHTML:{__html:'<b style="color:green">Edit Success</b>'}});this.setState({modalTitle:"Edit Status",modalQuestion:d,modalStatus:l,modalOk:"Dismiss",modalCallback:function(e){c.setState({showModal:!1,modalQuestion:"",modalStatus:""})},showModal:!0})}return f.a.createElement("b",{style:{color:"red"}}," ",""," ")}},{key:"cellEdited",value:function(e){var t=this,a=this.props,r=a.dispatch,n=a.match,s=a.user,i=a.dsHome,l=n.params.dsName,o=n.params.dsView;e.getRow().normalizeHeight(),this.timers["post-cell-edited"]&&(clearTimeout(this.timers["post-cell-edited"]),this.timers["post-cell-edited"]=null),this.timers["post-cell-edited"]=setTimeout((function(){t.ref.table.rowManager.adjustTableSize(!1),t.normalizeAllImgRows(),t.applyHighlightJsBadge()}),500);var c=e.getColumn().getField(),d=e.getRow().getData()._id;if(d){var u=this.fixValueType(e,c,i,o),m=u.oldVal,h=u.newVal,p={};p._id=d;for(var f=0;f<i.dsViews[o].keys.length;f++){var E=i.dsViews[o].keys[f];p[E]=e.getRow().getData()[E]}p[c]=m;var g={};g[c]=h,r(S.a.editSingleAttribute(l,o,s.user,d,c,m,h,p,g))}else{var v={};console.log("Looks like new row edit... ");var b=this.fixValueType(e,c,i,o);b.oldVal,b.newVal;if(i.dsViews[o].keys&&i.dsViews[o].keys.length){for(var y=!1,C=0;C<i.dsViews[o].keys.length;C++){var w=i.dsViews[o].keys[C];e.getRow().getData()[w]&&(y=!0),v[w]=e.getRow().getData()[w]}if(!y)return void console.log("Not ready, all keys empty")}var _=e.getRow().getData();console.log("rowData: ",_);var k=e.getRow();r(S.a.insertOneDoc(l,o,s.user,v,_,k))}}},{key:"fixValueType",value:function(e,t,a,r){var n=e.getOldValue(),s="tbd";""!==n&&(s=typeof n),console.log("Type of old val:",s),console.log("oldvalue is: ",n);var i=e.getValue();""===i||Number.isNaN(Number(i))||(i=Number(i)),"string"==s&&(i=i.toString());var l="string";try{for(var o=0;o<a.dsViews[r].columnAttrs.length;o++){var c=a.dsViews[r].columnAttrs[o];if(c.field==t){"number"==c.headerFilterType&&(l="number");break}}}catch(d){}return"string"==l?i=i.toString():"number"==l&&(""===i||Number.isNaN(Number(i))||(i=Number(i))),e.setValue(i),{oldVal:n,newVal:i}}},{key:"duplicateAndAddRowHandler",value:function(e,t){console.log("Duplicate and add row called..");var a=JSON.parse(JSON.stringify(t.getData()));delete a._id,console.log("newData: ",a),this.addRow(null,t,a)}},{key:"rowDeleteStatus",value:function(){var e=this.props,t=e.dispatch,a=e.dsHome,r="";try{Object.entries(a.dsDeletes).map((function(e){var n=e[0];if("done"===a.dsDeletes[n].deleteStatus&&"fail"===a.dsDeletes[n].serverStatus.status)r+="Delete failed on server ";else if("done"===a.dsDeletes[n].deleteStatus&&"success"===a.dsDeletes[n].serverStatus.status){a.dsDeletes[n].deleteTracker.row.delete(),t({type:y.c.DELETE_SINGLE_DELETE_TRACKER,_id:n})}else"fail"===a.dsDeletes[n].deleteStatus&&(r+="Delete API failed")}))}catch(n){}return f.a.createElement("b",{style:{color:"red"}}," ",r," ")}},{key:"deleteRowHandler",value:function(e,t,a){var r=this.props,n=r.dispatch,s=r.match,i=r.user,l=(r.dsHome,s.params.dsName),o=s.params.dsView;if(console.log("Delete row handler called...:",a),a){var c=t.getRow().getData()._id;if(!c)return void t.getRow().delete();n(S.a.deleteOneDoc(l,o,i.user,c,t.getRow()))}this.setState({showModal:!this.state.showModal})}},{key:"deleteRowQuestion",value:function(e,t){var a=this;this.setState({modalTitle:"Delete current row?",modalQuestion:"This will delete the current row. Please confirm. Undoing support is not yet available!",modalCallback:function(r){return a.deleteRowHandler(e,t,r)},showModal:!this.state.showModal})}},{key:"deleteAllRowsStatus",value:function(){var e=this,t=this.props,a=t.dispatch,r=t.dsHome,n="";try{Object.entries(r.dsDeletes).map((function(t){var s=t[0];"done"===r.dsDeletes[s].deleteStatus&&"fail"===r.dsDeletes[s].serverStatus.status?n+="Delete failed on server ":"done"===r.dsDeletes[s].deleteStatus&&"success"===r.dsDeletes[s].serverStatus.status?(e.ref.table.clearData(),a({type:y.c.DELETE_MANY_DELETE_TRACKER,_id:s})):"fail"===r.dsDeletes[s].deleteStatus&&(n+="Delete API failed")}))}catch(s){}return f.a.createElement("b",{style:{color:"red"}}," ",n," ")}},{key:"deleteAllRowsInView",value:function(e){var t=this.props,a=t.dispatch,r=t.match,n=t.user,s=(t.dsHome,r.params.dsName),i=r.params.dsView;if(console.log("Confirmed is: ",e),e){var l=this.ref.table.getRows(),o=[];console.log("Will now delete Rows: ",l);for(var c=0;c<l.length;c++){var d=l[c].getData()._id;d&&o.push(d)}a(S.a.deleteManyDocs(s,i,n.user,o,l))}this.setState({showModal:!this.state.showModal})}},{key:"deleteAllRowsInViewQuestion",value:function(){var e=this.ref.table.getRows();this.setState({modalTitle:"Delete all rows in view?",modalQuestion:"This will delete ".concat(e.length," rows. Please confirm. Undoing support is not yet available!"),modalCallback:this.deleteAllRowsInView,showModal:!this.state.showModal})}},{key:"deleteAllRowsInQuery",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t,a,r,i,l,o,c,d,u,m,h,p,f=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.match,r=t.user,i=a.params.dsName,l=a.params.dsView,o={},c="".concat(P.apiUrl,"/ds/deleteFromQuery/").concat(i,"/").concat(l,"/").concat(r.user),d=this.ref.table.getHeaderFilters(),u=this.ajaxURLGenerator(c,{},{filters:d,pretend:!0}),m=JSON.stringify(o).length.toString(),e.next=10,fetch(u,{method:"post",body:JSON.stringify(o),headers:{"Content-Type":"application/json","Content-Length":m}});case 10:if(h=e.sent,p=null,!h.ok){e.next=18;break}return e.next=15,h.json();case 15:p=e.sent,console.log("deleteFromQuery responseJson total: ",p.total),this.setState({modalTitle:"Delete all Rows in query?",modalQuestion:"This will delete ".concat(p.total," rows. Please confirm. Undoing support is not yet available!"),modalCallback:function(){var e=Object(s.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return u=f.ajaxURLGenerator(c,{},{filters:d,pretend:!1}),a=JSON.stringify(o).length.toString(),e.next=5,fetch(u,{method:"post",body:JSON.stringify(o),headers:{"Content-Type":"application/json","Content-Length":a}});case 5:if(!(r=e.sent).ok){e.next=11;break}return e.next=9,r.json();case 9:e.sent.count==p.total&&f.ref.table.clearData();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),showModal:!this.state.showModal});case 18:return e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jiraRefreshStatus",value:function(){var e=this.props,t=e.dispatch,a=e.dsHome;a&&a.dsJiraRefresh&&"done"===a.dsJiraRefresh.status&&(this.setState({refresh:this.state.refresh+1}),t({type:y.c.JIRA_REFRESH_DELETE_TRACKER}))}},{key:"jiraRefreshHandler",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.user,n=a.params.dsName,s=a.params.dsView,i=this.ref.table.getHeaderFilters();this.setState({initialHeaderFilter:i}),t(S.a.refreshJira(n,s,r.user))}},{key:"setFreezeColumn",value:function(e,t,a){var r=this.props,n=r.match,s=(r.dsHome,n.params.dsName,n.params.dsView,this.ref.table.getColumnDefinitions());if(s[s.length-1].field!==t.getField()){var i=this.ref.table.getHeaderFilters();this.setState({initialHeaderFilter:i}),a?this.setState({frozenCol:t.getField(),refresh:this.state.refresh+1}):this.setState({frozenCol:"",refresh:this.state.refresh+1})}}},{key:"freezeColumn",value:function(e,t){this.setFreezeColumn(e,t,!0)}},{key:"unfreezeColumn",value:function(e,t){this.setFreezeColumn(e,t,!1)}},{key:"toggleSingleFilter",value:function(e,t){for(var a,r=this.props,n=r.match,s=r.dsHome,i=(n.params.dsName,n.params.dsView),l=this.ref.table.getColumnDefinitions(),o=0;o<l.length;o++)if(l[o].field===t.getField()){a=!l[o].headerFilter&&"input";try{a&&s.dsViews[i].columnAttrs[o].headerFilterType&&(a=s.dsViews[i].columnAttrs[o].headerFilterType)}catch(e){}l[o].headerFilter=a,this.ref.table.updateColumnDefinition(l[o].field,{headerFilter:a})}}},{key:"handleColorPickerClose",value:function(){this.setState({showColorPicker:!1})}},{key:"handleColorPickerOnChangeComplete",value:function(e){console.log("Got back color: ",e),this.setState({showColorPicker:!0,color:e.hex})}},{key:"pickFillColorHandler",value:function(e,t){var a=this.props,r=(a.dispatch,a.match);a.user,a.dsHome,r.params.dsName,r.params.dsView;console.log("pickFillColorHandler called: ",e);t.getRow().getData()._id;this.setState({showColorPicker:!0,colorPickerLeft:e.pageX,colorPickerTop:e.pageY})}},{key:"setColumnDefinitions",value:function(){for(var e=this,t=this.props,a=t.match,r=t.dsHome,n=a.params.dsName,s=a.params.dsView,i=[{label:"Toggle Filters",action:this.toggleSingleFilter},{label:"Freeze",action:this.freezeColumn},{label:"Unfreeze",action:this.unfreezeColumn}],l=[{label:"Toggle Filters",action:this.toggleSingleFilter},{label:"Freeze",action:this.freezeColumn},{label:"Unfreeze",action:this.unfreezeColumn},{label:"<i class='fas fa-eye-slash'></i> Hide Column",action:this.hideColumn},{label:"<i class='fas fa-eye'></i> Unhide all Columns",action:this.showAllCols}],o=[{label:"Duplicate row & add...",action:this.duplicateAndAddRowHandler},{label:"Add empty row...",action:this.addRow},{label:"Copy cell to clipboard...",action:this.copyCellToClipboard},{label:"Generate slides...",action:this.startPreso},{label:"<i class='fas fa-eye-slash'></i> Hide Column",action:this.hideColumnFromCell},{label:"<i class='fas fa-eye'></i> Unhide all Columns",action:this.showAllCols},{separator:!0},{label:"Delete all rows in view...",action:this.deleteAllRowsInViewQuestion},{label:"Delete all rows in query...",action:this.deleteAllRowsInQuery},{label:"Delete row...",action:this.deleteRowQuestion}],c=[],d=function(t){var a=JSON.parse(JSON.stringify(r.dsViews[s].columnAttrs[t]));function d(e,t){if(t&&t.conditionalFormatting)for(var a=e.getRow().getData(),r=0;r<t.conditionalExprs.length;r++){var n=t.conditionalExprs[r].split("->")[0].trim(),s=j.a.parseExpr(n);if(j.a.evalExpr(s,a)){var i=t.conditionalExprs[r].split("->")[1].trim();(i=JSON.parse(i)).backgroundColor&&(e.getElement().style.backgroundColor=i.backgroundColor),i.color&&(e.getElement().style.color=i.color);break}}}if(e.isKey(a.field)?(a.headerMenu=i,a.titleFormatter=function(e,t){return"<u>".concat(e.getValue(),"</u>")}):a.headerMenu=l,a.contextMenu=o,a.editable=e.cellEditCheck,a.cellForceEditTrigger=e.cellForceEditTrigger,e.state.showAllFilters&&(a.headerFilter="input",a.headerFilterType&&(a.headerFilter=a.headerFilterType)),"input"===a.editor&&(a.formatter=function(e,t){var a=e.getValue();return d(e,t),void 0===a?"":a}),("textarea"===a.editor||"codemirror"===a.editor||!1===a.editor&&"textarea"===a.formatter||"autocomplete"===a.editor)&&(a.formatter=function(e,t){var a=e.getValue();return d(e,t),void 0===a?"":"string"!=typeof a?a:(a=I.render(a),'<div style="white-space:normal;word-wrap:break-word;margin-bottom:-12px;">'.concat(a,"</div>"))},a.formatterClipboard=function(e,t){var a=e.getRow().getCell(e.getField())._cell.element;return a=a.cloneNode(!0),e.getElement().style.backgroundColor=a.style.backgroundColor,e.getElement().style.color=a.style.color,a},a.variableHeight=!0,"textarea"===a.editor||"codemirror"===a.editor)){a.editorParams.dsName=n,"textarea"===a.editor?a.editor=_.a:a.editor=k.a;var u=e;a.cellEditCancelled=function(e){u.cellImEditing?console.log("Skipping normalize, Inside second editcancelled"):(console.log("Normalize, Inside second editcancelled.."),e.getRow().normalizeHeight())}}"autocomplete"===a.editor&&a.editorParams.multiselect?(a.editor=D.a,a.editorParams.verticalNavigation||(a.editorParams.verticalNavigation="table")):"autocomplete"!==a.editor||a.editorParams.multiselect||(a.editor=R.a,a.editorParams.verticalNavigation||(a.editorParams.verticalNavigation="table")),"date"===a.editor&&(a.editor=O.a,a.editorParams={format:"MM/DD/YYYY"}),c.push(a)},u=0;u<r.dsViews[s].columnAttrs.length;u++)d(u);if(this.state.frozenCol){var m=!0;for(u=0;u<c.length;u++){var h=c[u];m?h.frozen=!0:delete h.frozen,h.field===this.state.frozenCol&&(m=!1)}}else for(var p=0;p<c.length;p++){delete c[p].frozen}return c}},{key:"ajaxResponse",value:function(e,t,a){return this.setState({totalRecs:a.total}),a}},{key:"generateParamsList",value:function(e,t){var a=this,r=[];if(t=t||"",Array.isArray(e))e.forEach((function(e,n){r=r.concat(a.generateParamsList(e,t?t+"["+n+"]":n))}));else if("object"===typeof e)for(var n in e)r=r.concat(a.generateParamsList(e[n],t?t+"["+n+"]":n));else r.push({key:t,value:e});return r}},{key:"serializeParams",value:function(e){var t=this.generateParamsList(e),a=[];return t.forEach((function(e){a.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value))})),a.join("&")}},{key:"ajaxURLGenerator",value:function(e,t,a){return e&&a&&Object.keys(a).length&&(a.chronology=this.state.chronologyDescending?"desc":"asc",t.method&&"get"!=t.method.toLowerCase()||(t.method="get",e+=(e.includes("?")?"&":"?")+this.serializeParams(a))),e}},{key:"step2",value:function(){var e=this.props,t=e.match,a=e.user,r=e.dsHome,n=(t.params.dsName,t.params.dsView),s="",i=!1,l=void 0;try{i=r.dsViews[n].otherTableAttrs.fixedHeight}catch(d){}if(i&&((l=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0))?(l-=50,l+="px"):l=void 0),r&&r.dsViews&&r.dsViews[n]&&r.dsViews[n].columns){var o=this.setColumnDefinitions(),c=this;s=f.a.createElement(g.a,null,f.a.createElement("div",{id:"tabulator"},f.a.createElement(w.a,{columns:o,data:[],options:{ajaxURL:"".concat(P.apiUrl,"/ds/view/").concat(this.props.match.params.dsName,"/").concat(n,"/").concat(a.user),ajaxURLGenerator:this.ajaxURLGenerator,chronology:this.state.chronologyDescending,forceRefresh:this.state.refresh,pagination:"remote",paginationDataSent:{page:"page",size:"per_page"},paginationDataReceived:{last_page:"total_pages"},current_page:1,paginationSize:this.state.pageSize,paginationSizeSelector:[5,10,25,30,50,100,500,1e3,2e3,5e3,!0],ajaxResponse:this.ajaxResponse,ajaxError:function(e){console.log("ajaxError",e)},cellEdited:this.cellEdited,cellEditing:this.cellEditing,cellEditCancelled:this.cellEditCancelled,cellClick:this.cellClickEvents,cellDblClick:this.cellClickEvents,index:"_id",ajaxSorting:!0,ajaxFiltering:!0,initialHeaderFilter:this.state.initialHeaderFilter,initialSort:JSON.parse(JSON.stringify(this.state.initialSort)),height:l,clipboard:"fullTableCopyOnly",clipboardCopyFormatter:function(e,t){return"html"===e&&(t=(t=(t=(t=c.fixImgSizeForClipboard(t)).replaceAll("<th>",'<th style="border: 1px solid #ddd; padding: 8px; padding-top: 12px; padding-bottom: 12px; text-align: left; background-color: darkgreen;color: white;">')).replaceAll("<td>",'<td style="border: 1px solid #ddd; padding: 8px;">')).replace(/<pre class="code-badge-pre"[\s\S]*?(<code [\s\S]*?<\/code>)<\/pre>/gi,"<pre>$1</pre>")),t},rowFormatter:function(e){e.getData()._id?e.getElement().style.backgroundColor="white":e.getElement().style.backgroundColor="lightGray"},cellMouseEnter:function(e,t){"#fcfcfc"!==t.getElement().style.backgroundColor&&(t.__dg__prevBgColor=t.getElement().style.backgroundColor)},cellMouseLeave:function(e,t){delete t.__dg__prevBgColor},renderComplete:this.renderComplete},innerref:this.recordRef})))}return s}},{key:"processFilterChange",value:function(e){var t=this.props,a=t.match,r=t.history,n=t.dsHome,s=a.params.dsView,i=a.url,l=a.url.split("/");i="/"+l[1]+"/"+l[2]+"/"+l[3],e&&(i+="/"+e);var o=[],c=[],d={};if(e)try{o=JSON.parse(JSON.stringify(n.dsViews[s].filters[e].hdrFilters)),c=JSON.parse(JSON.stringify(n.dsViews[s].filters[e].hdrSorters)),n.dsViews[s].filters[e].filterColumnAttrs&&(d=JSON.parse(JSON.stringify(n.dsViews[s].filters[e].filterColumnAttrs))),JSON.stringify(this.state.initialHeaderFilter)===JSON.stringify(o)&&JSON.stringify(this.state.initialSort)===JSON.stringify(c)&&JSON.stringify(this.state.filterColumnAttrs)===JSON.stringify(d)||(this.setState({showAllFilters:!0,filter:e,initialHeaderFilter:o,initialSort:c,filterColumnAttrs:d,refresh:this.state.refresh+1}),console.log("moving to :",i),r.push(i))}catch(u){console.log("I am getting an exception...: ",u),this.state.filter!==e&&(this.setState({filter:e}),r.push(i))}else o=[],c=[],d={},0===this.state.initialHeaderFilter.length&&0===this.state.initialSort.length&&0===Object.keys(this.state.filterColumnAttrs).length?console.log("should not be coming here"):this.setState({filter:e,initialHeaderFilter:o,initialSort:c,filterColumnAttrs:d,refresh:this.state.refresh+1}),i!==this.props.location.pathname&&r.push(i);this.applyFilterColumnAttrs()}},{key:"applyFilterColumnAttrs",value:function(){try{console.log("Applying for: ",this.state.filter);var e=this.ref.table.getColumns();if(Object.keys(this.state.filterColumnAttrs))for(var t in this.state.filterColumnAttrs)for(var a=this.state.filterColumnAttrs[t],r=0;r<e.length;r++)e[r].getField()===t&&(a.hidden&&e[r].isVisible()&&e[r].hide(),e[r].getWidth()!==a.width&&e[r].setWidth(a.width));else this.showAllCols()}catch(n){console.log("Exception while applying for: ",this.state.filter,n)}}},{key:"retainColumnAttrs",value:function(){try{var e=this.ref.table.getColumns();for(var t in this.state.currentColumnAttrs)for(var a=this.state.currentColumnAttrs[t],r=0;r<e.length;r++)e[r].getField()===t&&(a.hidden&&e[r].isVisible()&&e[r].hide(),e[r].getWidth()!==a.width&&e[r].setWidth(a.width))}catch(n){}}},{key:"fixOneTimeLocalStorage",value:function(){var e=this.props.match,t=e.params.dsName,a=e.params.dsView,r="tabulator-".concat(t,"_").concat(a,"-columns"),n=localStorage.getItem(r);n=JSON.parse(n),this.state.firstTime&&n&&n.length&&(this.setState({firstTime:!1}),n.forEach((function(e){delete e.editor,delete e.headerFilter,delete e.editorParams,delete e.headerMenu,delete e.contextMenu})),localStorage.setItem(r,JSON.stringify(n)))}},{key:"pageSizeChange",value:function(e){e&&e.value?(console.log("Setting pageSize to: ",e.value),this.setState({pageSize:e.value})):(console.log("Setting pageSize to: ",20),this.setState({pageSize:20}))}},{key:"displayConnectedStatus",value:function(){return this.state.connectedState?f.a.createElement("span",null,f.a.createElement("i",{class:"fas fa-server"})," ",f.a.createElement("b",null,"Server connection:")," ",f.a.createElement("b",{style:{color:"darkgreen"}},"Connected")):f.a.createElement("span",null,f.a.createElement("i",{class:"fas fa-server"})," ",f.a.createElement("b",null,"Server connection:")," ",f.a.createElement("b",{style:{color:"red"}},"Disconnected"))}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.dsHome,r=t.params.dsName,n=t.params.dsView,s=this;this.fixOneTimeLocalStorage();var i="";console.log("In DsView render.."),document.title!=r&&(document.title=r);try{a.dsViews[n].jiraConfig.jira&&(i=f.a.createElement(f.a.Fragment,null," | ",f.a.createElement("button",{className:"btn btn-link",onClick:this.jiraRefreshHandler}," ",f.a.createElement("i",{class:"fas fa-redo"})," Refresh Jira ")," "),a&&a.dsJiraRefresh&&"refreshing"===a.dsJiraRefresh.status&&(i=f.a.createElement(f.a.Fragment,null," | ",f.a.createElement("button",{className:"btn btn-link",onClick:this.jiraRefreshHandler,disabled:!0}," ",f.a.createElement("i",{class:"fas fa-redo"})," Refresh Jira ")," ")))}catch(c){}var l="";try{var o=I.render(a.dsViews[n].dsDescription.dsDescription);l=f.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}})}catch(c){}return this.processFilterChange(this.state.filter),f.a.createElement("div",null,f.a.createElement(g.a,null,f.a.createElement(v.a,{md:12,sm:12,xs:12},f.a.createElement("h3",{style:{float:"center"}}," ",t.params.dsName))),f.a.createElement(g.a,null,f.a.createElement(v.a,{md:10,sm:10,xs:10},l)),this.step1(),f.a.createElement("br",null),f.a.createElement(g.a,null,f.a.createElement("button",{className:"btn btn-link",onClick:this.downloadXlsx}," ",f.a.createElement("i",{class:"fas fa-file-export"})," Get xlsx ")," |",f.a.createElement("button",{className:"btn btn-link",onClick:this.copyToClipboard}," ",f.a.createElement("i",{class:"fas fa-clipboard"})," Copy-to-clipboard ")," |",f.a.createElement("button",{className:"btn btn-link",onClick:this.addRow}," ",f.a.createElement("i",{class:"fas fa-plus"})," Add Row "),i,this.cellEditStatus(),this.addRowStatus(),this.rowDeleteStatus(),this.deleteAllRowsStatus(),this.jiraRefreshStatus()),f.a.createElement(g.a,null,f.a.createElement(v.a,{md:12,sm:12,xs:12},f.a.createElement("input",{type:"checkbox",checked:this.state.chronologyDescending,onChange:function(e){var t=e.target.checked,a=s.ref.table.getHeaderFilters();s.setState({chronologyDescending:t,initialHeaderFilter:a}),localStorage.setItem("chronologyDescending",JSON.stringify(t))}}),"\xa0 Desc order ",f.a.createElement("i",{class:"fas fa-level-down-alt"}),"\xa0\xa0| \xa0",f.a.createElement("input",{type:"checkbox",label:"\xa01-click editing",checked:this.state.singleClickEdit,onChange:function(e){var t=e.target.checked;s.setState({singleClickEdit:t}),localStorage.setItem("singleClickEdit",JSON.stringify(t))}}),"\xa0 1-click editing ",f.a.createElement("i",{class:"fas fa-bolt"}),"\xa0\xa0| \xa0",f.a.createElement("input",{type:"checkbox",label:"\xa0Show filters",checked:this.state.showAllFilters,onChange:function(e){var t=e.target.checked;s.setState({showAllFilters:t}),localStorage.setItem("showAllFilters",JSON.stringify(t)),s.toggleFilters()}}),"\xa0 Show filters ",f.a.createElement("i",{class:"fas fa-filter"}),"\xa0\xa0| \xa0",f.a.createElement("input",{type:"checkbox",label:"\xa0Disable Editing",checked:this.state.disableEditing,onChange:function(e){var t=e.target.checked;s.setState({disableEditing:t}),localStorage.setItem("disableEditing",JSON.stringify(t)),s.toggleEditing()}}),"\xa0 Disable Editing ",f.a.createElement("i",{class:"fas fa-ban"}),"\xa0\xa0")),f.a.createElement(E.b,{exact:!0,path:"".concat(t.path,"/:filter"),render:function(e){var t=e.match.params.filter;t!==s.state.filter&&s.processFilterChange(t)}}),f.a.createElement(F.a,{show:s.state.showAllFilters,dsName:r,dsView:n,tableRef:s.ref,onFilterChange:s.processFilterChange,defaultValue:s.state.filter}),f.a.createElement("br",null),f.a.createElement(g.a,null,f.a.createElement(v.a,{md:12,sm:12,xs:12},f.a.createElement("b",null,f.a.createElement("i",{class:"fas fa-clone"})," Total records: ",this.state.totalRecs," | "),f.a.createElement(C.a,{to:"/dsEditLog/".concat(t.params.dsName),target:"_blank"},f.a.createElement("i",{class:"fas fa-file-alt"})," ",f.a.createElement("b",null,"Edit-log"))," |\xa0",f.a.createElement(C.a,{to:"/dsViewEdit/".concat(t.params.dsName,"/").concat(t.params.dsView),target:"_blank"},f.a.createElement("i",{class:"fas fa-edit"})," ",f.a.createElement("b",null,"Edit-view"))," |\xa0",f.a.createElement(C.a,{to:"/dsBulkEdit/".concat(t.params.dsName),target:"_blank"},f.a.createElement("i",{class:"fas fa-edit"})," ",f.a.createElement("b",null,"Bulk-edit"))," |\xa0",f.a.createElement(C.a,{to:"/dsAttachments/".concat(t.params.dsName),target:"_blank"},f.a.createElement("i",{class:"fas fa-file-alt"})," ",f.a.createElement("b",null,"Attachments"))," |\xa0",this.displayConnectedStatus())),this.step2(),f.a.createElement(L.a,{show:this.state.showModal,onClose:this.toggleModal,title:this.state.modalTitle,cancel:this.state.modalCancel,ok:this.state.modalOk},this.state.modalQuestion),this.state.showColorPicker?f.a.createElement(T.a,{left:this.state.colorPickerLeft,top:this.state.colorPickerTop,color:this.state.color,onChangeComplete:this.handleColorPickerOnChangeComplete,handleClose:this.handleColorPickerClose}):"")}}]),a}(p.Component);var B=Object(b.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(M);t.a=B}).call(this,a(326).setImmediate)},291:function(e,t,a){"use strict";var r=a(5),n=a(6),s=a(10),i=a(9),l=a(11),o=a(0),c=a.n(o),d=a(292),u=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props,t=e.left,a=e.top,r=e.color,n=e.handleClose,s=e.onChangeComplete;console.log("left, top: ",t,a);var i={position:"absolute",zIndex:2,left:t,top:a};return c.a.createElement("div",null,c.a.createElement("div",{style:i},c.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:n}),c.a.createElement(d.SketchPicker,{color:r,onChangeComplete:s})))}}]),t}(c.a.Component);t.a=u},297:function(e,t,a){"use strict";var r=a(5),n=a(6),s=a(10),i=a(9),l=a(2),o=a(11),c=a(0),d=a.n(c),u=a(20),m=a(37),h=a(26),p=a(93),f=a(181),E=a(19),g=a(27),v=a(1),b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={save:!1,saveName:null,saveErrorMsg:"",saveDescription:null,saveAsNew:!1,saveAsNewName:"",saveAsNewDescription:"",saveAsNewErrorMsg:"",deleteFilter:!1,deleteFilterErrorMsg:""},a.deleteFilterControls=a.deleteFilterControls.bind(Object(l.a)(a)),a.saveControls=a.saveControls.bind(Object(l.a)(a)),a.saveAsNewControls=a.saveAsNewControls.bind(Object(l.a)(a)),a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"deleteFilterControls",value:function(){var e=this,t="",a=this,r=this.props,n=r.dispatch,s=r.dsName,i=r.dsView,l=r.user,o=r.dsHome,c=this.props.defaultValue;if(this.state.deleteFilter){try{"success"===o.dsFilterDeletes[i].status&&"success"===o.dsFilterDeletes[i].serverStatus.status&&this.state.deleteFilter&&(n({type:v.c.CLEAR_DELETE_FILTER_TRACKER}),this.setState({deleteFilter:!1}))}catch(u){}t=d.a.createElement(d.a.Fragment,null,d.a.createElement(m.a,null,d.a.createElement(h.a,{md:4,sm:4,xs:4},d.a.createElement("b",null,"Delete:")," ",c," ? \xa0\xa0",d.a.createElement(p.a,{size:"sm",onClick:function(){a.props.tableRef&&e.props.defaultValue&&(a.setState({deleteFilterErrorMsg:""}),console.log("State: ",a.state),n(E.a.deleteFilter(s,i,l.user,{name:c})),setTimeout((function(){n(E.a.loadColumnsForUserView(s,i,l.user))}),500),a.setState({saveName:null,saveDescription:null}),a.props.onFilterChange(null))}},"Confirm delete"),this.state.deleteFilterErrorMsg&&d.a.createElement("b",{style:{color:"red"}}," ",this.state.deleteFilterErrorMsg," "))))}return t}},{key:"saveControls",value:function(){var e=this,t="",a=this,r=this.props,n=r.dispatch,s=r.dsName,i=r.dsView,l=r.user,o=r.dsHome,c=this.props.defaultValue;if(this.state.save){try{this.state.saveName!==c&&this.setState({saveName:c,saveDescription:o.dsViews[i].filters[c].description})}catch(u){return""}try{if("fail"===o.dsFilterEdits[i].status||"fail"===o.dsFilterEdits[i].serverStatus.status){"save failed"!==this.state.saveErrorMsg&&this.setState({saveErrorMsg:"save failed"})}}catch(u){}try{"success"===o.dsFilterEdits[i].status&&"success"===o.dsFilterEdits[i].serverStatus.status&&this.state.save&&(n({type:v.c.CLEAR_EDIT_FILTER_TRACKER}),this.setState({save:!1}))}catch(u){}t=d.a.createElement(d.a.Fragment,null,d.a.createElement(m.a,null,d.a.createElement(h.a,{md:2,sm:2,xs:2},d.a.createElement("b",null,"Saving to:")),d.a.createElement(h.a,{md:4,sm:4,xs:4},c))," ",d.a.createElement("br",null),d.a.createElement(m.a,null,d.a.createElement(h.a,{md:2,sm:2,xs:2},d.a.createElement("b",null,"Description: ")),d.a.createElement(h.a,{md:4,sm:4,xs:4},d.a.createElement(f.a.Control,{as:"textarea",size:"sm",rows:"3",value:this.state.saveDescription,onChange:function(e){var t=e.target.value;a.setState({saveDescription:t})}})),d.a.createElement(h.a,{md:4,sm:4,xs:4},d.a.createElement(p.a,{size:"sm",onClick:function(){if(a.props.tableRef&&e.props.defaultValue){a.setState({saveErrorMsg:""});for(var t=a.props.tableRef.table.getHeaderFilters(),r=a.props.tableRef.table.getSorters(),o=[],d=0;d<r.length;d++){var u={};u.column=r[d].field,u.dir=r[d].dir,o.push(u)}for(var m={},h=a.props.tableRef.table.getColumns(),p=0;p<h.length;p++){var f=h[p].getField(),g={};h[p].isVisible()||(g.hidden=!0),g.width=h[p].getWidth(),m[f]=g}console.log("State: ",a.state);var v={};v.name=c,v.description=a.state.saveDescription,v.hdrFilters=t,v.hdrSorters=o,v.filterColumnAttrs=m,console.log("Save Filter object: ",v),n(E.a.editFilter(s,i,l.user,v)),setTimeout((function(){n(E.a.loadColumnsForUserView(s,i,l.user))}),500)}}},"Save"),this.state.saveErrorMsg&&d.a.createElement("b",{style:{color:"red"}}," ",this.state.saveErrorMsg," "))))}return t}},{key:"saveAsNewControls",value:function(){var e=this,t="",a=this,r=this.props,n=r.dispatch,s=r.dsName,i=r.dsView,l=r.user,o=r.dsHome;if(this.state.saveAsNew){try{if("fail"===o.dsFilterAdds[i].status||"fail"===o.dsFilterAdds[i].serverStatus.status){var c='save as new failed, try with new name maybe. Or try "save" instead';this.state.saveAsNewErrorMsg!==c&&this.setState({saveAsNewErrorMsg:c})}}catch(u){}try{"success"===o.dsFilterAdds[i].status&&"success"===o.dsFilterAdds[i].serverStatus.status&&this.state.saveAsNew&&(n({type:v.c.CLEAR_ADD_FILTER_TRACKER}),this.setState({saveAsNew:!1,saveAsNewName:"",saveAsNewDescription:""}))}catch(u){}t=d.a.createElement(d.a.Fragment,null,d.a.createElement(m.a,null,d.a.createElement(h.a,{md:2,sm:2,xs:2},d.a.createElement("b",null,"Filter name:")),d.a.createElement(h.a,{md:4,sm:4,xs:4},d.a.createElement(f.a.Control,{type:"text",size:"sm",value:this.state.saveAsNewName,onChange:function(e){var t=e.target.value;(!t||t.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/g)&&t.length<=64)&&a.setState({saveAsNewName:e.target.value})}})),d.a.createElement(h.a,{md:4,sm:4,xs:4},d.a.createElement(p.a,{size:"sm",onClick:function(){if(a.props.tableRef)if(e.state.saveAsNewName){a.setState({saveAsNewErrorMsg:""});for(var t=a.props.tableRef.table.getHeaderFilters(),r=a.props.tableRef.table.getSorters(),o=[],c=0;c<r.length;c++){var d={};d.column=r[c].field,d.dir=r[c].dir,o.push(d)}for(var u={},m=a.props.tableRef.table.getColumns(),h=0;h<m.length;h++){var p=m[h].getField(),f={};m[h].isVisible()||(f.hidden=!0),f.width=m[h].getWidth(),u[p]=f}var g={};g.name=e.state.saveAsNewName,g.description=e.state.saveAsNewDescription,g.hdrFilters=t,g.hdrSorters=o,g.filterColumnAttrs=u,console.log("New Filter object: ",g),n(E.a.addFilter(s,i,l.user,g)),setTimeout((function(){n(E.a.loadColumnsForUserView(s,i,l.user))}),500),a.setState({saveName:null,saveDescription:null}),console.log("Calling onFilterChange with:",e.state.saveAsNewName),a.props.onFilterChange(e.state.saveAsNewName)}else a.setState({saveAsNewErrorMsg:"Name is mandatory"})}},"Create"),this.state.saveAsNewErrorMsg&&d.a.createElement("b",{style:{color:"red"}}," ",this.state.saveAsNewErrorMsg," "))),d.a.createElement(m.a,null,d.a.createElement(h.a,{md:2,sm:2,xs:2},d.a.createElement("b",null,"Description: ")),d.a.createElement(h.a,{md:4,sm:4,xs:4},d.a.createElement(f.a.Control,{as:"textarea",size:"sm",rows:"3",value:this.state.saveAsNewDescription,onChange:function(e){var t=e.target.value;a.setState({saveAsNewDescription:t})}}))))}return t}},{key:"render",value:function(){var e=this,t=this.props,a=(t.dispatch,t.dsName,t.dsView),r=(t.user,t.dsHome),n=this;if(!this.props.show)return n.props.onFilterChange(null),null;var s=[],i=-1,l="";try{for(var o=Object.keys(r.dsViews[a].filters),c=0;c<o.length;c++)if("_id"!==o[c]){var u={};u.value=o[c],u.label=o[c],this.props.defaultValue===o[c]&&(i=c-1,console.log("Setting defaultValueIdx to:",i),l=r.dsViews[a].filters[o[c]].description),s.push(u)}}catch(p){}return d.a.createElement(d.a.Fragment,null,d.a.createElement("br",null),d.a.createElement(m.a,null,d.a.createElement(h.a,{md:1,sm:1,xs:1},d.a.createElement("b",null,"Filters:")),d.a.createElement(h.a,{md:8,sm:8,xs:8},d.a.createElement(g.a,{key:"my_unique_select_key__".concat(JSON.stringify(s[i])),className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"sheetOptions",defaultValue:s[i],value:s[i],options:s,onChange:function(e){n.setState({saveName:null,saveDescription:null}),e?n.props.onFilterChange(e.value):(n.setState({saveAsNew:!1,save:!1}),n.props.onFilterChange(null))}}))),l&&d.a.createElement("br",null),d.a.createElement(m.a,null,l&&d.a.createElement(h.a,{md:1,sm:1,xs:1},d.a.createElement("b",null,"Filter Desc:")),l&&d.a.createElement(h.a,{md:8,sm:8,xs:8},l)),l&&d.a.createElement("br",null),d.a.createElement(m.a,null,d.a.createElement("button",{className:"btn btn-link",onClick:function(){n.setState({saveAsNew:!e.state.saveAsNew,save:!1,deleteFilter:!1})}}," ",d.a.createElement("i",{class:"fas fa-filter"})," Save-as-new-filter ")," |",d.a.createElement("button",{className:"btn btn-link",onClick:function(){n.setState({save:!e.state.save,saveAsNew:!1,deleteFilter:!1})}}," ",d.a.createElement("i",{class:"fas fa-save"})," Save ")," |",d.a.createElement("button",{className:"btn btn-link",onClick:function(){n.setState({deleteFilter:!e.state.deleteFilter,save:!1,saveAsNew:!1})}}," ",d.a.createElement("i",{class:"fas fa-trash-alt"})," Delete-filter ")),this.saveAsNewControls(),this.saveControls(),this.deleteFilterControls())}}]),t}(d.a.Component);var S=Object(u.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(b);t.a=S},300:function(e,t,a){e.exports=a(887)},32:function(e,t,a){"use strict";var r=a(36),n=Object(r.a)(),s=a(67),i=a(288),l=(a(310),a(1)),o=JSON.parse(localStorage.getItem("user")),c=o?{loggedIn:!0,user:o}:{};var d=a(78),u=a(21);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=a(29),f=a(169);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={};var b=Object(s.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.d.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case l.d.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user};case l.d.LOGIN_FAILURE:case l.d.LOGOUT:return{};default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case l.d.REGISTER_REQUEST:return{registering:!0};case l.d.REGISTER_SUCCESS:case l.d.REGISTER_FAILURE:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.d.GETALL_REQUEST:return{loading:!0};case l.d.GETALL_SUCCESS:return{items:t.users};case l.d.GETALL_FAILURE:return{error:t.error};case l.d.DELETE_REQUEST:return h({},e,{items:e.items.map((function(e){return e.id===t.id?h({},e,{deleting:!0}):e}))});case l.d.DELETE_SUCCESS:return{items:e.items.filter((function(e){return e.id!==t.id}))};case l.d.DELETE_FAILURE:return h({},e,{items:e.items.map((function(e){if(e.id===t.id){e.deleting;return h({},Object(d.a)(e,["deleting"]),{deleteError:t.error})}return e}))});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a.SUCCESS:return{type:"alert-success",message:t.message};case l.a.ERROR:return{type:"alert-danger",message:t.message};case l.a.CLEAR:return{};default:return e}},allDs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.b.LOAD_DSLIST_REQUEST:return{dsListStatus:"loading"};case l.b.LOAD_DSLIST_SUCCESS:return{dsListStatus:"success",dsList:t.dsList};case l.b.LOAD_DSLIST_FAILURE:return{dsListStatus:"fail"};case l.b.SEEKING_DELETE_CONFIRM:var a={};return e.deleteConfirm&&(a=e.deleteConfirm),a[t.dsName]=1,g({},e,{deleteConfirm:a});case l.b.DELETE_DS_REQUEST:var r={};return e.deleteInProgress&&(r=e.deleteInProgress),r[t.dsName]=1,g({},e,{deleteInProgress:r});case l.b.DELETE_DS_SUCCESS:delete e.deleteInProgress[t.dsName],delete e.deleteConfirm[t.dsName];for(var n=e.dsList.dbList,s=[],i=0;i<n.length;i++)n[i].name!==t.dsName&&s.push(n[i]);return e.dsList.dbList=s,g({},e);default:return e}},newDs:p.a,dsHome:f.a}),S=function(){var e=[i.a];return Object(s.d)(b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),s.a.apply(void 0,e))}();function y(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return S})),a.d(t,"a",(function(){return y}))},323:function(e,t,a){},53:function(e,t,a){"use strict";t.a={parseExpr:function(e){var t={},a=(e=(e=e.replace(/^\s*'/,"")).replace(/\s*'$/,"")).match(/^\s*"(.*?)"\s*=\s*"(.*?)"\s*$/);if(a&&a.length>=2){t["="]={};var r=a[1],n=a[2];t["="].key=r,t["="].value=n}if((a=e.match(/^\s*"(.*?)"\s*=~\s*"(.*?)"\s*$/))&&a.length>=2){t["=~"]={};var s=a[1],i=a[2];t["=~"].key=s,t["=~"].regex=i}return t},evalExpr:function(e,t){for(var a in e){if("="===a){var r=e[a];return t[r.key]===r.value}if("=~"===a){var n=e[a],s=t[n.key];return!!new RegExp(n.regex,"i").test(s)}}}}},60:function(e,t,a){"use strict";var r=a(5),n=a(6),s=a(10),i=a(9),l=a(2),o=a(11),c=a(0),d=a.n(c),u=a(79),m=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).recordTabRef=a.recordTabRef.bind(Object(l.a)(a)),a.ref=null,a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.options.paginationSize!==e.options.paginationSize||this.props.options.chronology!==e.options.chronology||this.props.options.forceRefresh!==e.options.forceRefresh||this.props.options.height!==e.options.height}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.ref=null}},{key:"recordTabRef",value:function(e){var t=this.props.innerref;return this.ref=e,t(e),!0}},{key:"render",value:function(){return d.a.createElement(u.ReactTabulator,Object.assign({},this.props,{ref:this.recordTabRef}))}}]),t}(c.Component);t.a=m},602:function(e,t,a){var r={"./locale":264,"./locale.js":264};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=602},81:function(e,t,a){"use strict";t.a=function(e,t,a,r,n){var s=e.getValue(),i=n.verticalNavigation||"hybrid",l=String(null!==s&&"undefined"!==typeof s?s:""),o=((l.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),c=0;if(o.style.display="block",o.style.padding="2px",o.style.height="100%",o.style.width="100%",o.style.boxSizing="border-box",o.style.whiteSpace="pre-wrap",o.style.resize="none",n.elementAttributes&&"object"==typeof n.elementAttributes)for(var d in n.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),o.setAttribute(d,o.getAttribute(d)+n.elementAttributes["+"+d])):o.setAttribute(d,n.elementAttributes[d]);function u(e){(null===s||"undefined"===typeof s)&&""!==o.value||o.value!==s?a(o.value)&&(s=o.value):r()}return o.value=l,t((function(){o.focus({preventScroll:!0}),o.style.height="100%"})),o.addEventListener("change",u),o.addEventListener("blur",u),o.addEventListener("keyup",(function(){var t=o.scrollHeight;c||(c=t),t!=c&&(console.log("ScrollHeight, heightNow",c,t),o.style.height=t+"px",c=t,e.getRow().normalizeHeight())})),o.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:e.ctrlKey&&u();break;case 27:r();break;case 33:case 34:e.preventDefault();var t="PageUp"===e.key?0:e.target.textLength;e.target.setSelectionRange(t,t);case 35:case 36:e.stopImmediatePropagation(),e.stopPropagation();break;case 38:("editor"==i||"hybrid"==i&&o.selectionStart)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 40:("editor"==i||"hybrid"==i&&o.selectionStart!==o.value.length)&&(e.stopImmediatePropagation(),e.stopPropagation())}})),n.mask&&this.table.modules.edit.maskInput(o,n),o}},882:function(e,t){},885:function(e,t,a){},886:function(e,t,a){},887:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(23),i=a.n(s),l=a(17),o=a(20),c=a(5),d=a(6),u=a(10),m=a(9),h=a(2),p=a(11),f=a(21);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var g=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({setState:function(t){return e.setState(t)},getState:function(){return e.state}},t)},v=function(e,t){return n.a.Children.map(e,(function(e){return n.a.cloneElement(e,t)}))},b=a(13),S=a.n(b),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.shared,r=t.className,s=t.children,i=a.getState().opened,l=i===this.element;return n.a.createElement("li",{role:"presentation",ref:function(t){return e.element=t},className:S()(r,{open:l})},v(s,{opened:i,toggleMenu:function(t){return a.toggle(e.element,t)}}))}}]),t}(r.Component);y.Content=function(e){var t=e.children,a=e.className,r=e.open,s=e.toggleMenu;return n.a.createElement("a",{href:"#!",className:S()("dropdown-toggle",a),"aria-expanded":r,onClick:s},t)},y.SubMenu=function(e){var t=e.children,a=e.className;return n.a.createElement("ul",{className:S()("dropdown-menu",a),role:"menu"},t)};var C=y,w=window.document.body;var _=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={opened:null},a.shared=g(Object(h.a)(a),{toggle:function(e,t){t&&t.preventDefault();var r=e===a.state.opened?null:e;console.log("opened",r),a.setState({opened:r}),a.closeOnClick.target(r)}}),a.closeOnClick=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={on:s,off:i,target:function(e){return n=e,e?s():i()}},r=!1,n=null;return t?s():a;function s(){return r||(window.document.body.addEventListener("click",l),r=!0),a}function i(){return r&&(w.removeEventListener("click",l),r=!1),a}function l(t){console.log(t.path.indexOf(n)),-1===t.path.indexOf(n)&&e(t,i)}}((function(e){return a.shared.toggle(null)}),!1),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.shared;return n.a.createElement("ul",{className:"nav navbar-nav navbar-right"},v(this.props.children,{shared:e}))}}]),t}(r.Component);_.Item=C;var k=_,A=a(3),O=a.n(A),D=a(7),R=a(1),T=a(15),L=a(32),F={login:function(e,t){return function(){var n=Object(D.a)(O.a.mark((function n(s){var i;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(a({username:e})),s(j.clear()),n.prev=2,n.next=5,T.c.login(e,t);case 5:i=n.sent,console.log("user",i),s(r(i)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(2),s((l="Login incorrect: username or password is wrong",{type:R.d.LOGIN_FAILURE,error:l})),s(j.error("Login incorrect: username or password is wrong"));case 14:case"end":return n.stop()}var l}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}();function a(e){return{type:R.d.LOGIN_REQUEST,user:e}}function r(e){return{type:R.d.LOGIN_SUCCESS,user:e}}},logout:function(){return T.c.logout(),{type:R.d.LOGOUT}},register:function(e){return function(t){t(function(e){return{type:R.d.REGISTER_REQUEST,user:e}}(e)),T.c.register(e).then((function(e){t(function(e){return{type:R.d.REGISTER_SUCCESS,user:e}}()),L.b.push("/login"),t(j.success("Registration successful"))}),(function(e){t(function(e){return{type:R.d.REGISTER_FAILURE,error:e}}(e.toString())),t(j.error(e.toString()))}))}},getAll:function(){return function(e){e({type:R.d.GETALL_REQUEST}),T.c.getAll().then((function(t){return e(function(e){return{type:R.d.GETALL_SUCCESS,users:e}}(t))}),(function(t){return e(function(e){return{type:R.d.GETALL_FAILURE,error:e}}(t.toString()))}))}},delete:function(e){return function(t){t(function(e){return{type:R.d.DELETE_REQUEST,id:e}}(e)),T.c.delete(e).then((function(a){return t(function(e){return{type:R.d.DELETE_SUCCESS,id:e}}(e))}),(function(a){return t(function(e,t){return{type:R.d.DELETE_FAILURE,id:e,error:t}}(e,a.toString()))}))}}};var j={success:function(e){return{type:R.a.SUCCESS,message:e}},error:function(e){return{type:R.a.ERROR,message:e}},clear:function(){return{type:R.a.CLEAR}}};var x,N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).logout=a.logout.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"logout",value:function(){F.logout()}},{key:"render",value:function(){var e=this.props.user;return n.a.createElement(C,this.props,n.a.createElement(C.Content,{className:"user-profile"},e.user,n.a.createElement("span",{className:" fa fa-angle-down"})),n.a.createElement(C.SubMenu,{className:"dropdown-usermenu pull-right"},n.a.createElement("li",null,n.a.createElement("a",{href:"#!"}," Profile")),n.a.createElement("li",null,n.a.createElement("a",{href:"#!"},n.a.createElement("span",{className:"badge bg-red pull-right"},"50%"),n.a.createElement("span",null,"Settings"))),n.a.createElement("li",null,n.a.createElement("a",{href:"#!"},"Help")),n.a.createElement("li",null,n.a.createElement("a",{href:"/",onClick:this.logout},n.a.createElement("i",{className:"fa fa-sign-out pull-right"})," Log Out"))))}}]),t}(r.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.toggleCb,r=e.needMargin;return n.a.createElement("div",{className:r?"top_nav":""},n.a.createElement("div",{className:"nav_menu"},n.a.createElement("nav",null,n.a.createElement("div",{className:"nav toggle"},n.a.createElement("a",{href:"##",id:"menu_toggle",onClick:a},n.a.createElement("i",{className:"fas fa-bars"}))),n.a.createElement(k,null,n.a.createElement(N,{user:t})))))}}]),t}(r.Component),I=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user;return e.visible?n.a.createElement("div",{className:"col-md-3 left_col"},n.a.createElement("div",{className:"left_col scroll-view"},n.a.createElement("div",{className:"navbar nav_title",style:{border:0}},n.a.createElement("a",{href:"/",className:"site_title"},n.a.createElement("span",null,"Datagroom"))),n.a.createElement("div",{className:"clearfix"}),n.a.createElement("div",{className:"profile clearfix"},n.a.createElement("div",{className:"profile_info"},n.a.createElement("span",null,"Welcome,"),n.a.createElement("h5",{style:{color:"white"}},t.user))),n.a.createElement("br",null),this.props.children,n.a.createElement("div",{className:"sidebar-footer hidden-small"},n.a.createElement("a",{href:"##","data-toggle":"tooltip","data-placement":"top",title:"Settings"},n.a.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})),n.a.createElement("a",{href:"##","data-toggle":"tooltip","data-placement":"top",title:"FullScreen"},n.a.createElement("span",{className:"glyphicon glyphicon-fullscreen","aria-hidden":"true"})),n.a.createElement("a",{href:"##","data-toggle":"tooltip","data-placement":"top",title:"Lock"},n.a.createElement("span",{className:"glyphicon glyphicon-eye-close","aria-hidden":"true"})),n.a.createElement("a",{"data-toggle":"tooltip","data-placement":"top",title:"Logout",href:"login.html"},n.a.createElement("span",{className:"glyphicon glyphicon-off","aria-hidden":"true"}))))):n.a.createElement("div",null)}}]),t}(r.Component),V=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.needMargin;return n.a.createElement("footer",{style:e?null:{"margin-left":"0px"}},n.a.createElement("div",{className:"text-center"}),n.a.createElement("div",{className:"clearfix"}))}}]),t}(r.Component),P=a(37),H=a(26),M=(a(129),a(130),a(79)),B=a(80),J=a.n(B),z=a(170),Q=a.n(z),G=a(171),K=a.n(G),W=a(90);a(323);var X=[{id:1,name:"Oli Bob",age:"12",color:"red",dob:"01/01/1980",rating:5,passed:!0,pets:["cat","dog"]},{id:2,name:"Mary May",age:"1",color:"green",dob:"12/05/1989",rating:4,passed:!0,pets:["cat"]},{id:3,name:"Christine Lobowski",age:"42",color:"green",dob:"10/05/1985",rating:4,passed:!1},{id:4,name:"Brendon Philips",age:"125",color:"red",dob:"01/08/1980",rating:4.5,passed:!0},{id:5,name:"Margret Marmajuke",age:"16",color:"yellow",dob:"07/01/1999",rating:4,passed:!1},{id:6,name:"Van Ng",age:"37",color:"green",dob:"06/10/1982",rating:4,passed:!0,pets:["dog","fish"]},{id:7,name:"Duc Ng",age:"37",color:"yellow",dob:"10/10/1982",rating:4,passed:!0,pets:["dog"]}],Y=(x={},Object(f.a)(x,"","&nbsp;"),Object(f.a)(x,"red","red"),Object(f.a)(x,"green","green"),Object(f.a)(x,"yellow","yellow"),x),q=[{label:"Toggle Filters",action:function(e,t){console.log("Toggle filters!");var a=t.getDefinition(),r=a.headerFilter;a.width;t.updateDefinition({headerFilter:!r&&"input"})}}],Z=[{title:"Name",field:"name",editor:"input"},{title:"Age",field:"age",hozAlign:"left",formatter:"progress",editor:"progress"},{title:"Favourite Color",field:"color",editor:W.a,editorParams:{allowEmpty:!0,showListOnEmpty:!0,values:Y,verticalNavigation:"table"},formatter:"textarea",headerMenu:q},{title:"Date Of Birth",field:"dob",editor:J.a,editorParams:{format:"MM/DD/YYYY"}},{title:"Pets",field:"pets",sorter:function(e,t){return e.toString().localeCompare(t.toString())},editor:Q.a,editorParams:{values:[{id:"cat",name:"cat"},{id:"dog",name:"dog"},{id:"fish",name:"fish"}]},formatter:K.a,formatterParams:{style:"PILL"}},{title:"Passed?",field:"passed",hozAlign:"center",formatter:"tickCross",editor:!0}],$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeTab:"",file:null},a.onFileSelect=a.onFileSelect.bind(Object(h.a)(a)),a.onFileUpload=a.onFileUpload.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"onFileSelect",value:function(e){this.setState({file:e.target.files[0]})}},{key:"onFileUpload",value:function(){var e=new FormData;e.append("file",this.state.file,this.state.file.name),console.log(this.state.file),T.b.fileUpload(e)}},{key:"render",value:function(){return n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12},n.a.createElement("h3",null,"Editable Table"),n.a.createElement(M.ReactTabulator,{columns:Z,data:X,cellEdited:function(e){return console.log("cellEdited:",e)},dataEdited:function(e){return console.log("dataEdited",e)},footerElement:n.a.createElement("span",null,"Footer"),options:{movableColumns:!0,movableRows:!1,layout:"fitDataFill",keybindings:{navRight:39,navLeft:37}}}),n.a.createElement("input",{type:"file",name:"file",onChange:this.onFileSelect}),n.a.createElement("button",{onClick:this.onFileUpload},"Upload!")))}}]),t}(r.Component),ee=a(181),te=a(93),ae=a(25),re=a(29),ne=a(27),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={file:null,formData:null,range:"",dsName:""},a.onFileSelect=a.onFileSelect.bind(Object(h.a)(a)),a.sheetSelectorOnChange=a.sheetSelectorOnChange.bind(Object(h.a)(a)),a.sheetSelectionDone=a.sheetSelectionDone.bind(Object(h.a)(a)),a.rangeOnChange=a.rangeOnChange.bind(Object(h.a)(a)),a.rangeSelectionDone=a.rangeSelectionDone.bind(Object(h.a)(a)),a.keySelectorOnChange=a.keySelectorOnChange.bind(Object(h.a)(a)),a.dsNameOnChange=a.dsNameOnChange.bind(Object(h.a)(a)),a.createDs=a.createDs.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"onFileSelect",value:function(e){var t=this.props,a=t.dispatch,r=t.user;this.setState({file:e.target.files[0]});var n=e.target.files[0];if(n){var s=r.user+"_"+n.name,i=new FormData;i.append("file",n,s),this.setState({file:n,formData:i}),a(re.b.uploadXlsFile(s,i))}}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)(re.b.clearReduxStore())}},{key:"componentWillUnmount",value:function(){}},{key:"step1Status",value:function(){var e=this.props.newDs,t="";return e&&"fail"===e.uploadStatus&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},e.uploadError)))),e&&"success"===e.uploadStatus&&!e.sheetInfo.length&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},"Failed to recognize the sheets!")))),t}},{key:"sheetSelectorOnChange",value:function(e){var t=this.props.dispatch;console.log(e),t(re.b.setSelectedSheet(e?e.value:null))}},{key:"sheetSelectionDone",value:function(){var e=this.props,t=e.newDs;(0,e.dispatch)(re.b.findHeadersInSheet(t.fileName,t.selectedSheet))}},{key:"step2",value:function(){var e=this.props.newDs,t="";if(e&&"success"===e.uploadStatus&&e.sheetInfo.length){var a=[];e.sheetInfo.map((function(e){var t={};t.value=e,t.label=e,a.push(t)})),t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 2.")," Select sheet:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"sheetOptions",options:a,onChange:this.sheetSelectorOnChange})))}return t}},{key:"rangeOnChange",value:function(e){this.setState({range:e.target.value})}},{key:"rangeSelectionDone",value:function(){var e=this.props,t=e.newDs;(0,e.dispatch)(re.b.loadHdrsFromRange(t.fileName,t.selectedSheet,this.state.range))}},{key:"step3",value:function(){var e=this.props.newDs,t="";return e&&e.selectedSheet&&e.selectedSheet.length&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 3.")," Specify range (must include hdrs):"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"text",value:this.state.range,onChange:this.rangeOnChange})),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(te.a,{onClick:this.rangeSelectionDone}," Validate ")))),t}},{key:"step3Status",value:function(){var e,t=this.props.newDs,a="";try{t.loadStatus.loadStatus||(e=n.a.createElement("b",{style:{color:"red"}}," ",t.loadStatus.error," "))}catch(r){}try{t.loadStatus.loadStatus||(e=Object.keys(t.loadStatus.hdrErrors).length?Object.entries(t.loadStatus.hdrErrors).map((function(e){return n.a.createElement("div",null,"[ ",e[0]," ] : [ ",n.a.createElement("b",{style:{color:"red"}}," ",e[1]," ")," ] ")})):n.a.createElement("b",{style:{color:"red"}}," ",t.loadStatus.error," "))}catch(r){}return e&&(a=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("b",null,"Error: "),e))),a}},{key:"keySelectorOnChange",value:function(e){var t=this.props.dispatch;console.log(e);var a=[];e&&e.map((function(e){a.push(e.value)})),console.log(a),t(re.b.setSelectedKeys(a))}},{key:"step4",value:function(){var e=this.props.newDs,t="";if(e&&e.loadStatus&&e.loadStatus.loadStatus&&e.loadStatus.hdrs&&Object.keys(e.loadStatus.hdrs).length){var a=[];Object.entries(e.loadStatus.hdrs).map((function(e){var t={};t.value=e[1],t.label=e[1],a.push(t)})),t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 4.")," Select key(s):"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ne.a,{className:"basic-multi-select",classNamePrefix:"select",isClearable:!0,name:"sheetOptions",options:a,onChange:this.keySelectorOnChange,isMulti:!0})))}return t}},{key:"dsNameOnChange",value:function(e){var t=e.target.value;(!t||t.match(/^[a-zA-Z][a-zA-Z0-9_]*$/g)&&t.length<=64)&&this.setState({dsName:e.target.value})}},{key:"createDs",value:function(){var e=this.props,t=e.newDs,a=e.dispatch,r=e.user;a(re.b.createDs(t.fileName,t.selectedSheet,t.selectedRange,t.selectedKeys,this.state.dsName,r.user))}},{key:"step5",value:function(){var e=this.props.newDs,t="";return e&&e.loadStatus&&e.loadStatus.loadStatus&&e.loadStatus.hdrs&&Object.keys(e.loadStatus.hdrs).length&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 5.")," Specify dataset name:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"text",value:this.state.dsName,onChange:this.dsNameOnChange})),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(te.a,{onClick:this.createDs}," Create ")))),t}},{key:"step5Status",value:function(){var e=this.props.newDs,t="";try{if(e.createStatus.error)t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},e.createStatus.error)));else if(e.createStatus.loadStatus&&""!==this.state.dsName){var a="/ds/".concat(this.state.dsName,"/default");t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"green"}},"Successfully created: "),n.a.createElement(ae.a,{to:a},"Click here for your dataset")))}}catch(r){}return t}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"New Dataset from xls file")))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 1.")," Select xls file:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"file",name:"file",onChange:this.onFileSelect}))),this.step1Status(),n.a.createElement("br",null),this.step2(),n.a.createElement("br",null),this.step3(),this.step3Status(),n.a.createElement("br",null),this.step4(),n.a.createElement("br",null),this.step5(),n.a.createElement("br",null),this.step5Status())}}]),t}(r.Component);var ie=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,newDs:e.newDs}}))(se),le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={file:null,formData:null,range:"",dsName:""},a.onFileSelect=a.onFileSelect.bind(Object(h.a)(a)),a.keySelectorOnChange=a.keySelectorOnChange.bind(Object(h.a)(a)),a.dsNameOnChange=a.dsNameOnChange.bind(Object(h.a)(a)),a.createDs=a.createDs.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"onFileSelect",value:function(e){var t=this.props,a=t.dispatch,r=t.user;this.setState({file:e.target.files[0]});var n=e.target.files[0];if(n){var s=r.user+"_"+n.name,i=new FormData;i.append("file",n,s),this.setState({file:n,formData:i}),a(re.b.uploadCsvFile(s,i))}}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)(re.b.clearReduxStore())}},{key:"componentWillUnmount",value:function(){}},{key:"step1Status",value:function(){var e=this.props.newDs,t="";return e&&"fail"===e.uploadStatus&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},e.uploadError)))),e&&"success"===e.uploadStatus&&e.hdrs&&!e.hdrs.length&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},"Failed to read the hdrs!")))),t}},{key:"step2",value:function(){var e=this.props.newDs,t="";if(e&&"success"===e.uploadStatus&&e.hdrs.length){var a=[];e.hdrs.map((function(e){var t={};t.value=e,t.label=e,a.push(t)})),t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 2.")," Select keys:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ne.a,{className:"basic-multi-select",classNamePrefix:"select",isClearable:!0,name:"keys",options:a,onChange:this.keySelectorOnChange,isMulti:!0})))}return t}},{key:"keySelectorOnChange",value:function(e){var t=this.props.dispatch;console.log(e);var a=[];e&&e.map((function(e){a.push(e.value)})),console.log(a),t(re.b.setSelectedKeys(a))}},{key:"dsNameOnChange",value:function(e){var t=e.target.value;(!t||t.match(/^[a-zA-Z][a-zA-Z0-9_]*$/g)&&t.length<=64)&&this.setState({dsName:e.target.value})}},{key:"createDs",value:function(){var e=this.props,t=e.newDs,a=e.dispatch,r=e.user;a(re.b.createDsViaCsv(t.fileName,t.selectedKeys,this.state.dsName,r.user))}},{key:"step5",value:function(){var e=this.props.newDs,t="";return e&&"success"===e.uploadStatus&&e.hdrs.length&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 5.")," Specify dataset name:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"text",value:this.state.dsName,onChange:this.dsNameOnChange})),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(te.a,{onClick:this.createDs}," Create ")))),t}},{key:"step5Status",value:function(){var e=this.props.newDs,t="";try{if(e.createStatus.error)t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},e.createStatus.error)));else if(e.createStatus.loadStatus&&""!==this.state.dsName){var a="/ds/".concat(this.state.dsName,"/default");t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"green"}},"Successfully created: "),n.a.createElement(ae.a,{to:a},"Click here for your dataset")))}}catch(r){}return t}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"New Dataset from csv file")))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 1.")," Select csv file:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"file",name:"file",onChange:this.onFileSelect}))),this.step1Status(),n.a.createElement("br",null),this.step2(),n.a.createElement("br",null),this.step5(),n.a.createElement("br",null),this.step5Status())}}]),t}(r.Component);var oe=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,newDs:e.newDs}}))(le),ce=a(19),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={fromDsName:"",toDsName:"",retainData:!0,incompleteInputErr:""},a.dsSelectorOnChange=a.dsSelectorOnChange.bind(Object(h.a)(a)),a.dsNameOnChange=a.dsNameOnChange.bind(Object(h.a)(a)),a.createDs=a.createDs.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.user;t(re.b.clearReduxStore()),t(ce.a.getDsList(a.user))}},{key:"componentWillUnmount",value:function(){}},{key:"dsSelectorOnChange",value:function(e){this.props.dispatch;e?this.setState({fromDsName:e.value}):this.setState({fromDsName:""})}},{key:"step1",value:function(){var e=this.props.allDs,t="";try{var a=[];return e.dsList.dbList.map((function(e){var t={};t.value=e.name,t.label=e.name,a.push(t)})),t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 1.")," Select From DS:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"sheetOptions",options:a,onChange:this.dsSelectorOnChange})))}catch(r){}return t}},{key:"dsNameOnChange",value:function(e){var t=e.target.value;(!t||t.match(/^[a-zA-Z][a-zA-Z0-9_]*$/g)&&t.length<=64)&&this.setState({toDsName:e.target.value})}},{key:"createDs",value:function(){var e=this.props,t=(e.newDs,e.dispatch),a=e.user;console.log("createDs: ".concat(this.state.fromDsName,", ").concat(this.state.toDsName,", ").concat(this.state.retainData)),this.state.toDsName?this.state.fromDsName?this.setState({incompleteInputErr:""}):this.setState({incompleteInputErr:"Select FROM DS name!"}):this.setState({incompleteInputErr:"Specify new DS name!"}),t(re.b.createDsFromDs(this.state.fromDsName,this.state.toDsName,a.user,this.state.retainData))}},{key:"step2",value:function(){this.props.newDs;var e="",t=this;if(!this.state.fromDsName)return e;try{e=n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2}),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Check,{type:"checkbox",label:"\xa0 Retain data",checked:this.state.retainData,onChange:function(e){t.setState({retainData:e.target.checked})}}))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 2.")," Specify new dataset name:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"text",value:this.state.toDsName,onChange:this.dsNameOnChange})),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(te.a,{onClick:this.createDs}," Create "))))}catch(a){}return e}},{key:"step2Status",value:function(){var e=this.props.newDs,t="";try{if(this.state.incompleteInputErr)t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},this.state.incompleteInputErr)));else if(e.createStatus.error)t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},e.createStatus.error)));else if(e.createStatus.createStatus&&""!==this.state.toDsName){var a="/ds/".concat(this.state.toDsName,"/default");t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"green"}},"Successfully created: "),n.a.createElement(ae.a,{to:a},"Click here for your dataset")))}}catch(r){}return t}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"Copy Dataset from an existing Dataset")))),this.step1(),n.a.createElement("br",null),this.step2(),n.a.createElement("br",null),this.step2Status())}}]),t}(r.Component);var ue=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,newDs:e.newDs,allDs:e.allDs}}))(de),me={apiUrl:""},he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={file:null,range:"",dsName:""},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"step1",value:function(){var e=this.props,t=e.newDs,a=e.dsHome;Object.keys(a).length;var r="";if(t&&t.loadStatus&&t.loadStatus.loadStatus&&t.loadStatus.hdrs&&Object.keys(t.loadStatus.hdrs).length){var s=[];Object.entries(t.loadStatus.hdrs).map((function(e){var t={};t.value=e[1],t.label=e[1],s.push(t)})),r=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 4.")," Select key(s):"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ne.a,{className:"basic-multi-select",classNamePrefix:"select",isClearable:!0,name:"sheetOptions",options:s,onChange:this.keySelectorOnChange,isMulti:!0})))}return r}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"Browse Datasets")))),n.a.createElement(P.a,null,n.a.createElement("div",null,"Hi, will load: ",this.props.match.params.dsName,n.a.createElement(M.ReactTabulator,{columns:[{title:"Issue Id",field:"IssueID",width:150},{title:"Cur Owner",field:"CurrentOwner",width:150},{title:"Title",field:"Title",width:800,formatter:"textarea",variableHeight:!0}],data:[],options:{ajaxURL:"".concat(me.apiUrl,"/ds/view/").concat(this.props.match.params.dsName),pagination:"remote",paginationDataSent:{page:"page",size:"per_page"},paginationDataReceived:{last_page:"total_pages"},current_page:1,paginationSize:30,ajaxResponse:function(e,t,a){return console.log("ajaxResponse",e),a},ajaxError:function(e){console.log("ajaxError",e)}}}))))}}]),t}(r.Component);var pe=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(he),fe=a(290),Ee=a(60),ge=(a(114),a(169),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={accessCtrl:!1,acl:null,debounceTimers:{}},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.dispatch,t.dsName,t.dsView),r=t.user,s=t.dsHome,i=this;try{if(null===this.state.acl&&s.dsViews[a].aclConfig){var l="";if("string"===typeof s.dsViews[a].aclConfig.acl)l=s.dsViews[a].aclConfig.acl;else if(Array.isArray(s.dsViews[a].aclConfig.acl))for(var o=0;o<s.dsViews[a].aclConfig.acl.length;o++)l+=s.dsViews[a].aclConfig.acl[o],o<s.dsViews[a].aclConfig.acl.length-1&&(l+=", ");this.setState({accessCtrl:s.dsViews[a].aclConfig.accessCtrl,acl:l})}}catch(c){}return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement(ee.a.Check,{inline:!0,type:"checkbox",label:"\xa0Add access-control",checked:this.state.accessCtrl,onChange:function(t){var a=t.target.checked;i.setState({accessCtrl:a});for(var n=[],s=e.state.acl.split(","),l=0;l<s.length;l++){var o=s[l].trim();o&&n.push(o)}a?n.includes(r.user)||n.push(r.user):(n=[]).push(r.user),i.props.onChange({accessCtrl:a,acl:n})}})),this.state.accessCtrl&&n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement(ee.a.Control,{type:"text",defaultValue:this.state.acl,onChange:function(t){var a=t.target.value;i.state.debounceTimers.__accessCtrl&&clearTimeout(i.state.debounceTimers.__accessCtrl),i.state.debounceTimers.__accessCtrl=setTimeout((function(){if(delete i.state.debounceTimers.__accessCtrl,a){i.setState({acl:a});for(var t=[],r=a.split(","),n=0;n<r.length;n++){var s=r[n].trim();s&&t.push(s)}i.props.onChange({accessCtrl:e.state.accessCtrl,acl:t})}}),1e3)}}))))}}]),t}(n.a.Component));var ve=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(ge);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye=new a(118)({linkify:!0,html:!0}).use(a(119)).use(a(120)).use(a(58),"code"),Ce={apiUrl:""},we=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={file:null,range:"",dsName:"",firstTime:!0,filterButtonText:"Enable Filters",editingButtonText:"Disable Editing",refreshAfterRender:!1,jira:null,jql:"",jiraFieldMapping:'# Jira keys: "key", "summary", "type", "assignee", "severity", "priority", "reporter", "foundInRls", "created", "rrtTargetRls", "targetRls", "status", "feature", "rzFeature", "versions", "parent", "subtasks", "subtasksDetails", "dependsLinks", "implementLinks", "packageLinks", "relatesLinks", "testLinks", "coversLinks", "defectLinks", "automatesLinks", "updated", "votes", "systemFeature", "labels"\n\n',dsDescription:null,widths:{},fixedHeight:null,setViewStatus:"",aclConfig:null,somethingChanged:0,debounceTimers:{}},a.editors={},a.ref=null,a.recordRef=a.recordRef.bind(Object(h.a)(a)),a.pushColumnDefs=a.pushColumnDefs.bind(Object(h.a)(a)),a.addCol=a.addCol.bind(Object(h.a)(a)),a.showAllCols=a.showAllCols.bind(Object(h.a)(a)),a.toggleSingleFilter=a.toggleSingleFilter.bind(Object(h.a)(a)),a.setEditor=a.setEditor.bind(Object(h.a)(a)),a.setEditorToFalse=a.setEditorToFalse.bind(Object(h.a)(a)),a.setEditorToInput=a.setEditorToInput.bind(Object(h.a)(a)),a.setEditorToTextArea=a.setEditorToTextArea.bind(Object(h.a)(a)),a.setEditorToCodeMirror=a.setEditorToCodeMirror.bind(Object(h.a)(a)),a.setEditorToDate=a.setEditorToDate.bind(Object(h.a)(a)),a.setFormatter=a.setFormatter.bind(Object(h.a)(a)),a.setFormatterToPlainText=a.setFormatterToPlainText.bind(Object(h.a)(a)),a.setFormatterToTextArea=a.setFormatterToTextArea.bind(Object(h.a)(a)),a.hideColumn=a.hideColumn.bind(Object(h.a)(a)),a.setHdrFilterType=a.setHdrFilterType.bind(Object(h.a)(a)),a.setHdrFilterTypeToNumber=a.setHdrFilterTypeToNumber.bind(Object(h.a)(a)),a.setHdrFilterTypeToText=a.setHdrFilterTypeToText.bind(Object(h.a)(a)),a.plusFiftyToWidth=a.plusFiftyToWidth.bind(Object(h.a)(a)),a.editorParamsControl=a.editorParamsControl.bind(Object(h.a)(a)),a.renderComplete=a.renderComplete.bind(Object(h.a)(a)),a.setViewStatus=a.setViewStatus.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.user,n=e.dsHome,s=a.params.dsName,i=a.params.dsView;Object.keys(n).length&&n.dsViews&&n.dsViews[i]||t(ce.a.loadColumnsForUserView(s,i,r.user))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:R.c.CLEAR_COLUMNS})}},{key:"recordRef",value:function(e){return this.ref=e,!0}},{key:"showAllCols",value:function(){for(var e=this.ref.table.getColumns(),t=0;t<e.length;t++)e[t].isVisible()||e[t].show()}},{key:"renderComplete",value:function(){for(var e={},t=this.ref.table.getColumns(),a=0;a<t.length;a++)e[t[a].getField()]=t[a].getWidth();this.setState({widths:e})}},{key:"addCol",value:function(){var e=Object(D.a)(O.a.mark((function e(t,a){var r,n,s,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,r.dispatch,n=r.match,s=r.dsHome,i=n.params.dsView,console.log("Add col called..: ",a),a||(a={}),e.prev=4,!Object.keys(s.dsColAdds[i]).length){e.next=8;break}return console.log("A col add is in progress.."),e.abrupt("return");case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.next=14,this.ref.table.addColumn({title:"",field:"",editableTitle:!0});case 14:l=e.sent,console.log("Col is: ",l);case 16:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"pushColumnDefs",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.user,n=a.params.dsName,s=a.params.dsView;this.setState({setViewStatus:""});var i=JSON.parse(JSON.stringify(this.ref.table.getColumnDefinitions()));console.log("currentDefs from tabulator: ",i);for(var l=this.ref.table.getColumns(),o=0;o<l.length;o++)for(var c=0;c<i.length;c++)if(i[c].field===l[o].getField()){i[c].width=l[o].getWidth(),console.log("Set width: ",i[c].width);break}for(var d=this.ref.table.getHeaderFilters(),u=0;u<d.length;u++)for(var m=0;m<i.length;m++)if(i[m].field===d[u].field){i[m].hdrFilter=d[u];break}for(var h=[],p=0;p<i.length;p++){delete i[p].headerMenu;for(var f=0;f<l.length;f++)i[p].field===l[f].getField()&&(l[f].isVisible()?delete i[p].visible:i[p].visible=!1);if(i[p].editor=this.editors[i[p].field],"autocomplete"!==i[p].editor)try{delete i[p].editorParams.values,delete i[p].editorParams.showListOnEmpty,delete i[p].editorParams.allowEmpty,delete i[p].editorParams.multiselect}catch(U){}h.push(i[p])}for(var E={"Work-id":!1,Description:!1},g=!0,v={key:1,summary:1,type:1,assignee:1,severity:1,priority:1,foundInRls:1,reporter:1,created:1,rrtTargetRls:1,targetRls:1,status:1,feature:1,rzFeature:1,versions:1,parent:1,subtasks:1,subtasksDetails:1,dependsLinks:1,implementLinks:1,packageLinks:1,relatesLinks:1,testLinks:1,coversLinks:1,defectLinks:1,automatesLinks:1,updated:1,votes:1,systemFeature:1,labels:1},b={},S=0;S<i.length;S++){for(var y in E)i[S].field===y&&(E[y]=!0);b[i[S].field]=1}for(var C in E)if(!E[C]){console.log("Unknown jira column: ",C),g=!1;break}var w={};if(this.state.jiraFieldMapping){for(var _=this.state.jiraFieldMapping.split("\n"),k=0;k<_.length;k++){var A=_[k];if(!/^\s*#/.test(A)){var O=A.match(/^\s*"(.*?)"\s*->\s*"(.*?)"\s*$/);if(O&&O.length>=2){var D=O[1],R=O[2];w[D]=R}else if((O=A.match(/^\s*'(.*?)'\s*->\s*'(.*?)'\s*$/))&&O.length>=2){var T=O[1],L=O[2];w[T]=L}else;}}var F=function(e){var t={status:!0,error:""};for(var a in e){if(!v[a]){t.error="Unknown Jira key: ".concat(a),t.status=!1;break}b[e[a]]||(t.error="Unknown column in data-set: ".concat(e[a]),t.status=!1)}return t}(w);if(console.log("validate ret: ",F),g=F.status,!F.status)return this.setState({setViewStatus:"Jira validation failed!"}),void console.log("Validation failed")}var j=null;g&&this.state.jira&&this.state.jql&&(j={jira:!0,jql:this.state.jql,jiraFieldMapping:w});var x={dsDescription:this.state.dsDescription},N={fixedHeight:this.state.fixedHeight};i=h,console.log("Will push these definitions: ",i),t(ce.a.setViewDefinitions(n,s,r.user,i,j,x,N,this.state.aclConfig))}},{key:"setViewStatus",value:function(){var e=this.props,t=(e.match,e.dsHome),a="";try{"fail"===t.dsSetView.status&&(a=t.dsSetView.message)}catch(r){}if(this.state.setViewStatus&&(a=this.state.setViewStatus),a)return n.a.createElement("b",{style:{color:"red"}}," ",a," ");try{"success"===t.dsSetView.status&&"success"===t.dsSetView.serverStatus.status&&(a="success at ".concat(new Date))}catch(r){}return n.a.createElement("b",{style:{color:"green"}}," ",a," ")}},{key:"isKey",value:function(e){var t=this.props,a=t.match,r=t.dsHome,n=(a.params.dsName,a.params.dsView);if(r.dsViews[n].keys&&r.dsViews[n].keys.length)for(var s=0;s<r.dsViews[n].keys.length;s++){if(e===r.dsViews[n].keys[s])return!0}return!1}},{key:"hideColumn",value:function(e,t){var a=this.props,r=a.match;a.dsHome,r.params.dsName,r.params.dsView;this.isKey(t.getField())||t.hide()}},{key:"setEditor",value:function(e,t,a){for(var r=this.props,n=r.match,s=(r.dsHome,n.params.dsName,n.params.dsView,this.ref.table.getColumnDefinitions()),i=0;i<s.length;i++)if(s[i].field===t.getField()){var l=t.getWidth();this.editors[t.getField()]=a,"codemirror"!==a&&"date"!==a||(a="textarea"),this.ref.table.updateColumnDefinition(s[i].field,{editor:a,width:l});break}}},{key:"setEditorToInput",value:function(e,t){this.setEditor(e,t,"input")}},{key:"setEditorToTextArea",value:function(e,t){this.setEditor(e,t,"textarea")}},{key:"setEditorToCodeMirror",value:function(e,t){this.setEditor(e,t,"codemirror")}},{key:"setEditorToAutocomplete",value:function(e,t){this.setEditor(e,t,"autocomplete")}},{key:"setEditorToDate",value:function(e,t){this.setEditor(e,t,"date")}},{key:"setEditorToFalse",value:function(e,t){this.setEditor(e,t,!1)}},{key:"plusFiftyToWidth",value:function(e,t){console.log("Column: ",t.getWidth());var a=t.getWidth();t.setWidth(a+50)}},{key:"markdownFormatter",value:function(e,t){var a=e.getValue();return"string"!=typeof a?a:(console.log("Value is: ",a),a=ye.render(a),'<div style="white-space:normal;word-wrap:break-word;">'.concat(a,"</div>"))}},{key:"setFormatter",value:function(e,t,a){for(var r=this.ref.table.getColumnDefinitions(),n=0;n<r.length;n++)if(r[n].field===t.getField()){this.ref.table.updateColumnDefinition(r[n].field,{formatter:a});break}}},{key:"setFormatterToPlainText",value:function(e,t){this.setFormatter(e,t,"plaintext")}},{key:"setFormatterToTextArea",value:function(e,t){this.setFormatter(e,t,"textarea")}},{key:"setHdrFilterType",value:function(e,t,a){for(var r=this.ref.table.getColumnDefinitions(),n=0;n<r.length;n++)if(r[n].field===t.getField()){this.ref.table.updateColumnDefinition(r[n].field,{headerFilterType:a});break}}},{key:"setHdrFilterTypeToNumber",value:function(e,t){this.setHdrFilterType(e,t,"number")}},{key:"setHdrFilterTypeToText",value:function(e,t){this.setHdrFilterType(e,t,"input")}},{key:"setHozAlign",value:function(e,t,a){for(var r=this.ref.table.getColumnDefinitions(),n=0;n<r.length;n++)if(r[n].field===t.getField()){this.ref.table.updateColumnDefinition(r[n].field,{hozAlign:a});break}}},{key:"setVertAlign",value:function(e,t,a){for(var r=this.ref.table.getColumnDefinitions(),n=0;n<r.length;n++)if(r[n].field===t.getField()){this.ref.table.updateColumnDefinition(r[n].field,{vertAlign:a});break}}},{key:"toggleSingleFilter",value:function(e,t){var a=this.props,r=a.match,n=(a.dsHome,r.params.dsName,r.params.dsView,this.ref.table.getColumnDefinitions());console.log("Column: ",t.getWidth());this.ref.table.getColumns();for(var s,i=0;i<n.length;i++)if(n[i].field===t.getField()){s="input"!==n[i].headerFilter&&"input",n[i].headerFilter=s,this.ref.table.updateColumnDefinition(n[i].field,{headerFilter:s});break}}},{key:"dsDescription",value:function(){var e=this.props,t=e.match,a=e.dsHome,r=t.params.dsView,s=this;try{null===this.state.dsDescription&&a.dsViews[r].dsDescription.dsDescription&&this.setState({dsDescription:a.dsViews[r].dsDescription.dsDescription})}catch(i){}return n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Dataset Description: ")),n.a.createElement(H.a,{md:10,sm:10,xs:10},n.a.createElement(ee.a.Control,{as:"textarea",rows:"3",defaultValue:this.state.dsDescription,onChange:function(e){var t=e.target.value,a="__dg__dsDescription";s.state.debounceTimers[a]&&clearTimeout(s.state.debounceTimers[a]),s.state.debounceTimers[a]=setTimeout((function(){delete s.state.debounceTimers[a],s.setState({dsDescription:t})}),1e3)}})))}},{key:"editorParamsControl",value:function(e){var t=this.props,a=t.match,r=(t.dsHome,a.params.dsName,a.params.dsView,"");try{var s=this,i=this.ref.table.getColumn(e.field).getDefinition();if("autocomplete"===i.editor){var l="",o=!0,c=!1,d="";try{l=i.editorParams.values.join(", ")}catch(u){}try{o=i.editorParams.multiselect}catch(u){}try{c=i.editorParams.conditionalValues}catch(u){}try{d=i.editorParams.conditionalExprs.join("\n")}catch(u){}r=n.a.createElement("div",null,"Values:",n.a.createElement(ee.a.Control,{type:"text",defaultValue:l,onChange:function(t){var a=t.target.value;s.state.debounceTimers[e.field]&&clearTimeout(s.state.debounceTimers[e.field]),s.state.debounceTimers[e.field]=setTimeout((function(){if(delete s.state.debounceTimers[e.field],a){var t=a.split(",").map((function(e){return e.trim()})),r=Se({},i.editorParams,{values:t,showListOnEmpty:!0,allowEmpty:!0});console.log("EditorParams: ",r),s.ref.table.updateColumnDefinition(e.field,{editorParams:r})}}),1e3)}}),n.a.createElement(ee.a.Check,{type:"checkbox",label:"\xa0 autocomplete multi",checked:o,onChange:function(t){var a=t.target.checked,r=Se({},i.editorParams||{},{multiselect:a});s.setState({somethingChanged:s.state.somethingChanged++}),s.ref.table.updateColumnDefinition(e.field,{editorParams:r})}}),n.a.createElement(ee.a.Check,{type:"checkbox",label:"\xa0 autocomplete cond-values",checked:c,onChange:function(t){var a=t.target.checked,r=Se({},i.editorParams||{},{conditionalValues:a});s.setState({somethingChanged:s.state.somethingChanged++}),s.ref.table.updateColumnDefinition(e.field,{editorParams:r})}}),c&&n.a.createElement(ee.a.Control,{as:"textarea",rows:"3",defaultValue:d,onChange:function(t){var a=t.target.value;s.state.debounceTimers[e.field]&&clearTimeout(s.state.debounceTimers[e.field]),s.state.debounceTimers[e.field]=setTimeout((function(){if(delete s.state.debounceTimers[e.field],a){var t=a.split("\n").map((function(e){return e.trim()}));t=t.filter((function(e){return""!==e}));var r=Se({},i.editorParams,{conditionalExprs:t,showListOnEmpty:!0,allowEmpty:!0});s.ref.table.updateColumnDefinition(e.field,{editorParams:r})}}),1e3)}}))}}catch(u){}return r}},{key:"step1",value:function(){var e=this,t=this.props,a=t.match,r=t.dsHome,s=(a.params.dsName,a.params.dsView),i=[],l=[];["line","paragraph","codemirror","autocomplete","date"].map((function(e){var t={};t.value=e,t.label=e,l.push(t)}));var o=[];["number","text"].map((function(e){var t={};t.value=e,t.label=e,o.push(t)}));var c=[];["left","center","right"].map((function(e){var t={};t.value=e,t.label=e,c.push(t)}));var d=[];["top","middle","bottom"].map((function(e){var t={};t.value=e,t.label=e,d.push(t)}));try{!function(){var t=e,a=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Column Attributes: ")));i.push(a),i.push(n.a.createElement("br",null));for(var u=function(a){var u=r.dsViews[s].columnAttrs[a],m={};"textarea"===u.editor?m=l[1]:"input"===u.editor?m=l[0]:"autocomplete"===u.editor?m=l[3]:"codemirror"===u.editor?m=l[2]:"date"===u.editor&&(m=l[4]);var h={};"input"===u.headerFilterType?h=o[1]:"number"===u.headerFilterType&&(h=o[0]);var p={};"left"===u.hozAlign?p=c[0]:"center"===u.hozAlign?p=c[1]:"right"===u.hozAlign&&(p=c[2]);var f={};"top"===u.vertAlign?f=d[0]:"middle"===u.vertAlign?f=d[1]:"bottom"===u.vertAlign&&(f=d[2]);var E=!1,g="",v=e.ref.table.getColumn(u.field).getDefinition();try{E=v.formatterParams.conditionalFormatting}catch(b){}try{g=v.formatterParams.conditionalExprs.join("\n")}catch(b){}i.push(n.a.createElement(P.a,{style:{border:"1px solid black","border-radius":"5px",padding:"10px"}},n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,u.field)),n.a.createElement(H.a,{md:2,sm:2,xs:2},"Hoz-Align:",n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"hozAlignOptions",options:c,defaultValue:p,onChange:function(e){console.log("Setting for: ",u.field,e);var a=t.ref.table.getColumn(u.field);t.setHozAlign("",a,e.value)}}),"Vert-Align:",n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"vertAlignOptions",options:d,defaultValue:f,onChange:function(e){console.log("Setting for: ",u.field,e);var a=t.ref.table.getColumn(u.field);t.setVertAlign("",a,e.value)}})),n.a.createElement(H.a,{md:4,sm:4,xs:4},"Editor:",n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"editorOptions",options:l,defaultValue:m,onChange:function(e){console.log("Setting for: ",u.field);var a=t.ref.table.getColumn(u.field);"paragraph"===e.value?t.setEditorToTextArea("",a):"codemirror"===e.value?t.setEditorToCodeMirror("",a):"line"===e.value?t.setEditorToInput("",a):"autocomplete"===e.value?t.setEditorToAutocomplete("",a):"date"===e.value&&t.setEditorToDate("",a),t.setState({somethingChanged:t.state.somethingChanged++})}}),e.editorParamsControl(u),"Hdr-filter-type:",n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"filterOptions",options:o,defaultValue:h,onChange:function(e){console.log("Setting for: ",u.field,e);var a=t.ref.table.getColumn(u.field);"number"===e.value?t.setHdrFilterTypeToNumber("",a):"text"===e.value&&t.setHdrFilterTypeToText("",a)}}),n.a.createElement(ee.a.Check,{type:"checkbox",label:"\xa0 conditional formatting",checked:E,onChange:function(e){var a=e.target.checked,r=Se({},v.formatterParams||{},{conditionalFormatting:a});t.setState({somethingChanged:t.state.somethingChanged++}),t.ref.table.updateColumnDefinition(u.field,{formatterParams:r})}}),E&&n.a.createElement(ee.a.Control,{as:"textarea",rows:"3",defaultValue:g,onChange:function(e){var a=e.target.value;t.state.debounceTimers[u.field]&&clearTimeout(t.state.debounceTimers[u.field]),t.state.debounceTimers[u.field]=setTimeout((function(){if(delete t.state.debounceTimers[u.field],a){var e=v.formatterParams||{},r=a.split("\n").map((function(e){return e.trim()})),n=Se({},e,{conditionalExprs:r=r.filter((function(e){return""!==e}))});t.setState({somethingChanged:t.state.somethingChanged++}),t.ref.table.updateColumnDefinition(u.field,{formatterParams:n})}}),1e3)}})))),i.push(n.a.createElement("br",null))},m=0;m<r.dsViews[s].columnAttrs.length;m++)u(m)}()}catch(u){}return n.a.createElement("div",null,i)}},{key:"step2",value:function(){var e=this.props,t=e.match,a=e.user,r=e.dsHome,s=(t.params.dsName,t.params.dsView),i=[{label:"Toggle Filters",action:this.toggleSingleFilter},{label:"Set Editor to 'line'",action:this.setEditorToInput},{label:"Set Editor to 'paragraph'",action:this.setEditorToTextArea},{label:"Disable editing",action:this.setEditorToFalse},{label:"Set Formatter to 'line'",action:this.setFormatterToPlainText},{label:"Set Formatter to 'paragraph'",action:this.setFormatterToTextArea},{label:"Set header filter type to number",action:this.setHdrFilterTypeToNumber},{label:"Set header filter type to text",action:this.setHdrFilterTypeToText},{label:"Plus 50 to column width",action:this.plusFiftyToWidth}],l=[{label:"Toggle Filters",action:this.toggleSingleFilter},{label:"Set Editor to 'line'",action:this.setEditorToInput},{label:"Set Editor to 'paragraph'",action:this.setEditorToTextArea},{label:"Disable editing",action:this.setEditorToFalse},{label:"Set Formatter to 'line'",action:this.setFormatterToPlainText},{label:"Set Formatter to 'paragraph'",action:this.setFormatterToTextArea},{label:"<i class='fas fa-eye-slash'></i> Hide Column",action:this.hideColumn},{label:"Set header filter type to number",action:this.setHdrFilterTypeToNumber},{label:"Set header filter type to text",action:this.setHdrFilterTypeToText},{label:"Plus 50 to column width",action:this.plusFiftyToWidth}],o="";if(r&&r.dsViews&&r.dsViews[s]&&r.dsViews[s].columns){for(var c=[],d=0;d<r.dsViews[s].columnAttrs.length;d++){var u=JSON.parse(JSON.stringify(r.dsViews[s].columnAttrs[d]));this.isKey(u.field)?u.headerMenu=i:u.headerMenu=l,this.editors[u.field]||(this.editors[u.field]=u.editor),"codemirror"!==u.editor&&"date"!==u.editor||(u.editor="textarea"),u.editable=function(){return!1},c.push(u)}o=n.a.createElement(P.a,null,n.a.createElement("div",null,n.a.createElement(Ee.a,{columns:c,data:[],options:{ajaxURL:"".concat(Ce.apiUrl,"/ds/view/").concat(this.props.match.params.dsName,"/").concat(s,"/").concat(a.user),pagination:"remote",paginationDataSent:{page:"page",size:"per_page"},paginationDataReceived:{last_page:"total_pages"},current_page:1,paginationSize:20,ajaxResponse:function(e,t,a){return console.log("ajaxResponse",e),a},ajaxError:function(e){console.log("ajaxError",e)},movableColumns:!0,cellEdited:this.cellEdited,index:"_id",ajaxSorting:!0,ajaxFiltering:!0,rowFormatter:function(e){e.getData()._id?e.getElement().style.backgroundColor="white":e.getElement().style.backgroundColor="lightGray"},renderComplete:this.renderComplete},innerref:this.recordRef})))}return o}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.dsHome,r=t.params.dsView,s=t.params.dsName;document.title="Edit-view: ".concat(s);try{if(null===this.state.jira&&a.dsViews[r].jiraConfig){var i=this.state.jiraFieldMapping;for(var l in a.dsViews[r].jiraConfig.jiraFieldMapping)i+='"'.concat(l,'" -> "').concat(a.dsViews[r].jiraConfig.jiraFieldMapping[l],'"')+"\n";this.setState({jira:a.dsViews[r].jiraConfig.jira,jql:a.dsViews[r].jiraConfig.jql,jiraFieldMapping:i})}}catch(d){}try{null===this.state.fixedHeight&&a.dsViews[r].otherTableAttrs&&this.setState({fixedHeight:a.dsViews[r].otherTableAttrs.fixedHeight})}catch(d){}var o="";try{"setting"===a.dsSetView.status&&(o=n.a.createElement(te.a,{disabled:!0,onClick:this.pushColumnDefs}," Set View "))}catch(d){}o||(o=n.a.createElement(te.a,{onClick:this.pushColumnDefs}," Set View "));var c=this;return n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},"Dataset view: ",t.params.dsName," | ",t.params.dsView))),n.a.createElement("br",null),this.dsDescription(),n.a.createElement("br",null),this.step1(),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement(ee.a.Check,{inline:!0,type:"checkbox",label:"\xa0Add Jira query",checked:this.state.jira,onChange:function(e){var t=e.target.checked;c.setState({jira:t})}})),this.state.jira&&n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement(ee.a.Control,{type:"text",defaultValue:this.state.jql,onChange:function(e){var t=e.target.value;c.state.debounceTimers.__dsViewEdit__main&&clearTimeout(c.state.debounceTimers.__dsViewEdit__main),c.state.debounceTimers.__dsViewEdit__main=setTimeout((function(){delete c.state.debounceTimers.__dsViewEdit__main,t&&c.setState({jql:t})}),1e3)}}))),n.a.createElement(P.a,null,this.state.jira&&n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Jira field mapping: ")),this.state.jira&&n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement(ee.a.Control,{as:"textarea",rows:"3",defaultValue:this.state.jiraFieldMapping,onChange:function(e){var t=e.target.value;c.state.debounceTimers.__dsViewEdit__main&&clearTimeout(c.state.debounceTimers.__dsViewEdit__main),c.state.debounceTimers.__dsViewEdit__main=setTimeout((function(){delete c.state.debounceTimers.__dsViewEdit__main,t&&c.setState({jiraFieldMapping:t})}),1e3)}}))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement(ee.a.Check,{inline:!0,type:"checkbox",label:"\xa0Fixed height",checked:this.state.fixedHeight,onChange:function(e){var t=e.target.checked;c.setState({fixedHeight:t})}}))),n.a.createElement(ve,{dsName:s,dsView:r,onChange:function(e){console.log("Received access control as:",e),c.setState({aclConfig:e})}}),n.a.createElement("br",null),n.a.createElement(P.a,null,n.a.createElement(te.a,{onClick:this.pushColumnDefs}," Set View "),n.a.createElement(te.a,{onClick:this.showAllCols}," Show all columns "),this.setViewStatus()),this.step2())}}]),t}(r.Component);var _e=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(we),ke=a(81),Ae=(a(173),new a(118)({linkify:!0,html:!0}).use(a(119)).use(a(120)).use(a(58),"code").use(a(163))),Oe={apiUrl:""},De=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={firstTime:!0,filterButtonText:"Enable Filters",editingButtonText:"Disable Editing",pageSize:30,totalRecs:0,singleClickEdit:!1,showAllFilters:!1,disableEditing:!1},a.ref=null,a.lockedByOthersCells={},a.firstRenderCompleted=!1,a.cellImEditing=null,a.renderComplete=a.renderComplete.bind(Object(h.a)(a)),a.cellEditCheck=a.cellEditCheck.bind(Object(h.a)(a)),a.recordRef=a.recordRef.bind(Object(h.a)(a)),a.downloadXlsx=a.downloadXlsx.bind(Object(h.a)(a)),a.toggleFilters=a.toggleFilters.bind(Object(h.a)(a)),a.toggleSingleFilter=a.toggleSingleFilter.bind(Object(h.a)(a)),a.ajaxResponse=a.ajaxResponse.bind(Object(h.a)(a)),a.copyToClipboard=a.copyToClipboard.bind(Object(h.a)(a));var r=localStorage.getItem("singleClickEdit");return r=JSON.parse(r),a.state.singleClickEdit=r,a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.dispatch,e.match);e.user,e.dsHome,t.params.dsName,t.params.dsView}},{key:"componentWillUnmount",value:function(){this.props.dispatch}},{key:"renderComplete",value:function(){this.props.match.params.dsName}},{key:"cellEditCheck",value:function(e){return!1}},{key:"toggleFilters",value:function(){for(var e,t=this.props,a=t.dsHome,r=t.match.params.dsView,n=this.ref.table.getColumnDefinitions(),s=0;s<n.length;s++){e=!n[s].headerFilter&&"input",n[s].headerFilter=e;try{e&&a.dsViews[r].columnAttrs[s].headerFilterType&&(e=a.dsViews[r].columnAttrs[s].headerFilterType)}catch(i){}}this.ref.table.setColumns(n),this.setState({filterButtonText:e?"Disable Filtering":"Enable Filtering"})}},{key:"copyToClipboard",value:function(){this.ref.table.copyToClipboard()}},{key:"recordRef",value:function(e){return this.ref=e,!0}},{key:"downloadXlsx",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.user,n=a.params.dsName,s=a.params.dsView;t(ce.a.downloadXlsx(n,s,r.user))}},{key:"toggleSingleFilter",value:function(e,t){for(var a,r=this.props,n=r.match,s=r.dsHome,i=(n.params.dsName,n.params.dsView),l=this.ref.table.getColumnDefinitions(),o=0;o<l.length;o++)if(l[o].field===t.getField()){a=!l[o].headerFilter&&"input",l[o].headerFilter=a;try{a&&s.dsViews[i].columnAttrs[o].headerFilterType&&(a=s.dsViews[i].columnAttrs[o].headerFilterType)}catch(e){}this.ref.table.updateColumnDefinition(l[o].field,{headerFilter:a})}}},{key:"setColumnDefinitions",value:function(){for(var e=this.props,t=e.match,a=(e.dsHome,t.params.dsName,t.params.dsView,[{label:"Toggle Filters",action:this.toggleSingleFilter}]),r=[],n=[{field:"opr",title:"opr",width:100,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"},{field:"status",title:"status",width:100,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"},{field:"user",title:"user",width:150,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"},{field:"date",title:"date",width:150,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"},{field:"column",title:"column",width:150,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"},{field:"selector",title:"selector",width:200,formatter:"textarea",headerTooltip:!0},{field:"oldVal",title:"oldVal",width:200,formatter:"textarea",headerTooltip:!0},{field:"newVal",title:"newVal",width:200,formatter:"textarea",headerTooltip:!0},{field:"doc",title:"doc",width:300,formatter:"textarea",headerTooltip:!0}],s=0;s<n.length;s++){var i=JSON.parse(JSON.stringify(n[s]));i.headerMenu=a,i.editable=this.cellEditCheck,"selector"!==i.field&&"doc"!==i.field||(i.formatter=function(e,t){var a=e.getValue(),r=String.fromCharCode(13,10);return a?(a=(a=(a=a.replace(/\\\\n/g,"__dg__newline")).replace(/\\n/g,r)).replace(/__dg__newline/g,"\\n"),'<div style="white-space:pre-wrap;word-wrap:break-word;">'.concat(a,"</div>")):""}),("textarea"===i.editor||!1===i.editor&&"textarea"===i.formatter||"autocomplete"===i.editor)&&(i.formatter=function(e,t){var a=e.getValue();return"string"!=typeof a?a:(a=Ae.render(a),'<div style="white-space:normal;word-wrap:break-word;margin-bottom:-12px">'.concat(a,"</div>"))},i.variableHeight=!0,"textarea"===i.editor&&(i.editor=ke.a,i.cellEditCancelled=function(e){e.getRow().normalizeHeight()})),r.push(i)}return r}},{key:"ajaxResponse",value:function(e,t,a){return console.log("ajaxResponse: ",a),this.setState({totalRecs:a.total}),a}},{key:"step2",value:function(){var e=this.props,t=e.match,a=e.user,r=(e.dsHome,t.params.dsName,t.params.dsView),s=this.setColumnDefinitions();return console.log("Columns: ",s),n.a.createElement(P.a,null,n.a.createElement("div",null,n.a.createElement(Ee.a,{columns:s,data:[],options:{ajaxURL:"".concat(Oe.apiUrl,"/ds/view/editLog/").concat(this.props.match.params.dsName,"/").concat(r,"/").concat(a.user),pagination:"remote",paginationDataSent:{page:"page",size:"per_page"},paginationDataReceived:{last_page:"total_pages"},current_page:1,paginationSize:this.state.pageSize,paginationSizeSelector:[10,25,50,100,500,!0],ajaxResponse:this.ajaxResponse,ajaxError:function(e){console.log("ajaxError",e)},index:"_id",ajaxSorting:!0,ajaxFiltering:!0,clipboard:!0,rowFormatter:function(e){e.getData()._id?e.getElement().style.backgroundColor="white":e.getElement().style.backgroundColor="lightGray"},cellMouseEnter:function(e,t){"lightblue"!==t.getElement().style.backgroundColor&&(t.__dg__prevBgColor=t.getElement().style.backgroundColor),t.getElement().style.backgroundColor="lightblue"},cellMouseLeave:function(e,t){t.getElement().style.backgroundColor=t.__dg__prevBgColor,delete t.__dg__prevBgColor},renderComplete:this.renderComplete},innerref:this.recordRef})))}},{key:"render",value:function(){var e=this.props.match,t=this;return document.title="Edit-log: ".concat(e.params.dsName),n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"Editlog view: ",e.params.dsName)))),n.a.createElement("br",null),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement(ee.a,{inline:!0},n.a.createElement(ee.a.Check,{inline:!0,type:"checkbox",label:"\xa0Show all filters",checked:this.state.showAllFilters,onChange:function(e){var a=e.target.checked;t.setState({showAllFilters:a}),localStorage.setItem("showAllFilters",JSON.stringify(a)),t.toggleFilters()}})))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement("b",null,"Total records: ",this.state.totalRecs))),this.step2())}}]),t}(r.Component);var Re=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(De),Te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={file:null,formData:null,range:"",dsName:"",setColsFrmSheet:!1,setRowsFrmSheet:!1,validate:!1,doIt:!1},a.downloadXlsx=a.downloadXlsx.bind(Object(h.a)(a)),a.onFileSelect=a.onFileSelect.bind(Object(h.a)(a)),a.sheetSelectorOnChange=a.sheetSelectorOnChange.bind(Object(h.a)(a)),a.rangeOnChange=a.rangeOnChange.bind(Object(h.a)(a)),a.rangeSelectionDone=a.rangeSelectionDone.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"downloadXlsx",value:function(){var e=this.props,t=e.dispatch,a=e.match,r=e.user,n=a.params.dsName;t(ce.a.downloadXlsx(n,"default",r.user))}},{key:"onFileSelect",value:function(e){var t=this.props,a=t.dispatch,r=t.user;this.setState({file:e.target.files[0]});var n=e.target.files[0];if(n){var s=r.user+"_"+n.name,i=new FormData;i.append("file",n,s),this.setState({file:n,formData:i}),a(ce.a.uploadBulkEditXlsFile(s,i))}}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)(ce.a.clearBulkEditStore())}},{key:"componentWillUnmount",value:function(){}},{key:"step1Status",value:function(){var e=this.props.dsHome,t="";return e&&e.dsBulkEdits&&"fail"===e.dsBulkEdits.uploadStatus&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},e.uploadError)))),e&&e.dsBulkEdits&&"success"===e.dsBulkEdits.uploadStatus&&!e.dsBulkEdits.sheetInfo.length&&(t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"red"}},"Failed to recognize the sheets!")))),t}},{key:"sheetSelectorOnChange",value:function(e){var t=this.props.dispatch;console.log(e),t(ce.a.setSelectedSheet(e?e.value:null))}},{key:"step2",value:function(){var e=this.props.dsHome,t="";if(e&&e.dsBulkEdits&&"success"===e.dsBulkEdits.uploadStatus&&e.dsBulkEdits.sheetInfo.length){var a=[];e.dsBulkEdits.sheetInfo.map((function(e){var t={};t.value=e,t.label=e,a.push(t)})),t=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 2.")," Select sheet:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ne.a,{className:"basic-single",classNamePrefix:"select",isClearable:!0,name:"sheetOptions",options:a,onChange:this.sheetSelectorOnChange})))}return t}},{key:"rangeOnChange",value:function(e){this.setState({range:e.target.value})}},{key:"rangeSelectionDone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props,r=a.dsHome,n=a.dispatch,s=a.match,i=s.params.dsName;t?this.setState({doIt:!0}):(this.setState({validate:!0,doIt:!1}),n({type:R.c.CLEAR_LOADSTATUS})),n(ce.a.doBulkEditRequest(i,r.dsBulkEdits.fileName,r.dsBulkEdits.selectedSheet,this.state.range,this.state.setRowsFrmSheet,this.state.setColsFrmSheet,t))}},{key:"step3",value:function(){var e=this.props.dsHome,t="",a=this;return e&&e.dsBulkEdits&&e.dsBulkEdits.selectedSheet&&e.dsBulkEdits.selectedSheet.length&&(t=n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 3.")," Specify range (must include hdrs):"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"text",value:this.state.range,onChange:this.rangeOnChange})),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(te.a,{onClick:this.rangeSelectionDone}," Validate! "))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2}),n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement(ee.a.Check,{type:"checkbox",label:"\xa0",checked:this.state.setRowsFrmSheet,onChange:function(e){var t=e.target.checked;a.setState({setRowsFrmSheet:t})}}),n.a.createElement("b",null,"Set data rows")," as in specified range of the sheet (deletes all other rows). Uncheck this if you don't want to delete other rows in the db that is not specified in your sheet range.")),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2}),n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement(ee.a.Check,{type:"checkbox",label:"\xa0",checked:this.state.setColsFrmSheet,onChange:function(e){var t=e.target.checked;a.setState({setColsFrmSheet:t})}}),n.a.createElement("b",null,"Set data columns")," as in specified range of the sheet (deletes all other columns). Uncheck this if you want to only bulk-edit the columns specified in your sheet range. All other column attributes will be untouched.")))),t}},{key:"step3Status",value:function(){var e,t=this.props,a=t.dsHome,r=t.match.params.dsName,s="",i=!1;try{a.dsBulkEdits.loadStatus.loadStatus&&(i=!0)}catch(l){}try{a.dsBulkEdits.loadStatus.loadStatus||(e=Object.keys(a.dsBulkEdits.loadStatus.hdrErrors).length?Object.entries(a.dsBulkEdits.loadStatus.hdrErrors).map((function(e){return n.a.createElement("div",null,"[ ",e[0]," ] : [ ",n.a.createElement("b",{style:{color:"red"}}," ",e[1]," ")," ] ")})):n.a.createElement("b",{style:{color:"red"}}," ",a.dsBulkEdits.loadStatus.error," "))}catch(l){}if(e)s=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("b",null,"Error: "),e));else if(i)"/ds/".concat(r,"/default");return s}},{key:"renderOprLog",value:function(){var e=this.props.dsHome,t="";try{var a=e.dsBulkEdits.loadStatus.oprLog;t=n.a.createElement("div",null,n.a.createElement("ol",null,a.map((function(e){return n.a.createElement("li",null,e)}))))}catch(r){}return t}},{key:"step4",value:function(){var e=this,t=this.props.dsHome,a="";return this.state.validate&&t&&t.dsBulkEdits&&t.dsBulkEdits.loadStatus&&t.dsBulkEdits.loadStatus.loadStatus&&(a=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2}),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement("b",null,"Will perform the following operations:"),n.a.createElement("br",null),this.renderOprLog()),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(te.a,{onClick:function(){e.rangeSelectionDone(null,!0)}}," Do It! ")))),a}},{key:"step4Status",value:function(){var e,t=this.props,a=t.dsHome,r=t.match.params.dsName,s="",i=!1;try{this.state.doIt&&a.dsBulkEdits.loadStatus.loadStatus&&(i=!0)}catch(o){}try{this.state.doIt&&!a.dsBulkEdits.loadStatus.loadStatus&&(e=Object.keys(a.dsBulkEdits.loadStatus.hdrErrors).length?Object.entries(a.dsBulkEdits.loadStatus.hdrErrors).map((function(e){return n.a.createElement("div",null,"[ ",e[0]," ] : [ ",n.a.createElement("b",{style:{color:"red"}}," ",e[1]," ")," ] ")})):n.a.createElement("b",{style:{color:"red"}}," ",a.dsBulkEdits.loadStatus.error," "))}catch(o){}if(e)s=n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("b",null,"Error: "),e));else if(i){var l="/ds/".concat(r,"/default");s=n.a.createElement(P.a,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(H.a,{md:6,sm:6,xs:6},n.a.createElement("b",{style:{color:"green"}},"Successfully updated: "),n.a.createElement(ae.a,{to:l},"Click here for your dataset")))}return s}},{key:"render",value:function(){var e=this.props,t=e.match,a=(e.dsHome,t.params.dsName);return document.title="Bulk-edit: ".concat(a),n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"Bulk Edit for: ",a)),"It is ",n.a.createElement("b",null,"highly recommended")," that you take an ",n.a.createElement("button",{size:"sm",className:"btn btn-link",onClick:this.downloadXlsx},n.a.createElement("b",null,"xlsx backup")," ")," before you attempt this. Also, good to warn your users not to make any edits while you are doing this!")),n.a.createElement("br",null),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Step 1.")," Select xls file:"),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a.Control,{type:"file",name:"file",onChange:this.onFileSelect}))),this.step1Status(),n.a.createElement("br",null),this.step2(),n.a.createElement("br",null),this.step3(),this.step3Status(),n.a.createElement("br",null),this.step4(),this.step4Status())}}]),t}(r.Component);var Le=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,newDs:e.newDs,dsHome:e.dsHome}}))(Te),Fe=function(e){var t=e.location;return function(e){return Object(l.f)(t.pathname,{path:e,exact:!1,strict:!1})}},je=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,r=e.shared,s=t;return n.a.createElement("div",{className:S()("menu_section",{active:!0})},n.a.createElement("h3",null,t),n.a.createElement(l.b,{render:function(e){return n.a.createElement("ul",{className:"nav side-menu"},v(a,{shared:r,isActive:Fe(e),ancestors:s}))}}))}}]),t}(r.Component),xe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.title,r=e.shared,s=e.children,i=(e.to,e.isActive),l=e.ancestors,o=r.getState().visiblePath,c=l+" : "+a,d=o.startsWith(c);return n.a.createElement("li",{className:S()({active:d})},n.a.createElement("a",{href:"##",onClick:function(){o.startsWith(c)?r.setVisiblePath(l):r.setVisiblePath(c)}},t?n.a.createElement("i",{className:"fas fa-".concat(t)}):"","  "+a,n.a.createElement("span",{className:"fas fa-chevron-down pull-right"})),n.a.createElement("ul",{className:"nav child_menu",style:{display:d?"block":"none"}},v(s,{isActive:i,shared:r,ancestors:c})))}}]),t}(r.Component),Ne=a(78),Ue=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.title,r=e.isActive,s=e.shared,i=e.ancestors,l=Object(Ne.a)(e,["icon","title","isActive","shared","ancestors"]),o=r(l.to),c=s.getState().visiblePath;o&&!c&&s.setVisiblePath(i);return n.a.createElement("li",{className:S()({"current-page":o})},n.a.createElement(ae.a,Object.assign({},l,{onClick:function(){window.scroll(0,0),i.trim()||s.setVisiblePath(i)}}),t?n.a.createElement("i",{className:"fas fa-".concat(t)}):""," "+a))}}]),t}(r.Component),Ie=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).shared=g(Object(h.a)(a),{setVisiblePath:function(e){console.log("setVisiblePath: ".concat(e)),a.setState({visiblePath:e})}}),a.state={visiblePath:""},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.children;return n.a.createElement("div",{id:"sidebar-menu",className:"main_menu_side hidden-print main_menu"},function(e,t){return n.a.Children.map(e,(function(e){return n.a.cloneElement(e,t)}))}(e,{shared:this.shared}))}}]),t}(r.Component);Ie.MenuSection=je,Ie.GroupMenuItem=xe,Ie.MenuItem=Ue;var Ve=Ie,Pe=n.a.createElement(Ue,{title:"Home",to:"/",icon:"home"});var He=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).deleteRequest=a.deleteRequest.bind(Object(h.a)(a)),a.deleteControls=a.deleteControls.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.user;t(ce.a.getDsList(a.user))}},{key:"deleteRequest",value:function(e){var t=this.props.dispatch;console.log("Received delete request: ",e),t({type:R.b.SEEKING_DELETE_CONFIRM,dsName:e})}},{key:"confirmedDelete",value:function(e){var t=this.props,a=t.dispatch,r=t.user;console.log("Received delete confirmation! ",e),a(ce.a.deleteDs(e,r.user))}},{key:"deleteControls",value:function(e){for(var t=this,a=this.props,r=a.user,s=a.allDs,i="",l=0;l<s.dsList.dbList.length;l++)if(s.dsList.dbList[l].name===e){try{i=s.dsList.dbList[l].perms.owner}catch(o){console.log("Owner is not found for: ".concat(e)),i=r.user}break}return i===r.user&&s.deleteConfirm&&s.deleteConfirm[e]?n.a.createElement("span",null," | ",n.a.createElement("a",{href:"##",onClick:function(){t.confirmedDelete(e)}},"Confirm Deletion please")):i===r.user?n.a.createElement("span",null," | ",n.a.createElement("a",{href:"##",onClick:function(){t.deleteRequest(e)}},"Delete")):""}},{key:"dsList",value:function(){var e=this,t=this.props.allDs;try{var a=t.dsList.dbList.map((function(t){var a="/ds/".concat(t.name,"/default");return n.a.createElement("li",null,n.a.createElement(ae.a,{to:a},t.name),e.deleteControls(t.name))}));return n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("ul",null,a)))}catch(r){console.log("dsList, exception: ",r)}return""}},{key:"render",value:function(){return document.title="Datagroom - browse data-sets",n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"Your Datasets")))),this.dsList(),n.a.createElement(P.a,null,n.a.createElement(te.a,{size:"sm",onClick:function(){L.b.push("/newDsXlsx")}}," New Ds (xlsx)"),n.a.createElement(te.a,{size:"sm",onClick:function(){L.b.push("/newDsCsv")}}," New Ds (csv)"),n.a.createElement(te.a,{size:"sm",onClick:function(){L.b.push("/newDsFrmDs")}}," Copy Ds")))}}]),t}(r.Component);var Me=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,allDs:e.allDs}}))(He),Be=a(124),Je=new a(118)({linkify:!0,html:!0}).use(a(119)).use(a(120)).use(a(58),"code").use(a(163)),ze=Je.renderer.rules.link_open||function(e,t,a,r,n){return n.renderToken(e,t,a)};Je.renderer.rules.link_open=function(e,t,a,r,n){var s=e[t].attrIndex("target");return s<0?e[t].attrPush(["target","_blank"]):e[t].attrs[s][1]="_blank",ze(e,t,a,r,n)};var Qe={apiUrl:""},Ge=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={filterButtonText:"Enable Filters",pageSize:30,totalRecs:0,refresh:0,initialHeaderFilter:[],initialSort:[{column:"time",dir:"desc"}],showModal:!1,modalTitle:"Title of modal",modalQuestion:"This is the modal question",modalCallback:null,showAllFilters:!1},a.ref=null,a.renderComplete=a.renderComplete.bind(Object(h.a)(a)),a.cellEditCheck=a.cellEditCheck.bind(Object(h.a)(a)),a.recordRef=a.recordRef.bind(Object(h.a)(a)),a.onFileSelect=a.onFileSelect.bind(Object(h.a)(a)),a.toggleFilters=a.toggleFilters.bind(Object(h.a)(a)),a.toggleSingleFilter=a.toggleSingleFilter.bind(Object(h.a)(a)),a.ajaxResponse=a.ajaxResponse.bind(Object(h.a)(a)),a.deleteRowHandler=a.deleteRowHandler.bind(Object(h.a)(a)),a.deleteRowQuestion=a.deleteRowQuestion.bind(Object(h.a)(a)),a.toggleModal=a.toggleModal.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.dispatch,e.match);e.user,e.dsHome,t.params.dsName,t.params.dsView}},{key:"componentWillUnmount",value:function(){this.props.dispatch}},{key:"renderComplete",value:function(){this.props.match.params.dsName;setTimeout((function(){return window.highlightJsBadge()}),1e3)}},{key:"cellEditCheck",value:function(e){return!1}},{key:"toggleModal",value:function(e){this.state.modalCallback(e),this.setState({showModal:!this.state.showModal})}},{key:"onFileSelect",value:function(){var e=Object(D.a)(O.a.mark((function e(t){var a,r,n,s,i,l,o,c,d,u,m;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props.match,r=a.params.dsName,console.log("Files: ",t.target.files),t.persist(),n=0;case 5:if(!(n<t.target.files.length)){e.next=17;break}if(!(s=t.target.files[n])){e.next=14;break}return i=s.name.replaceAll(" ","_"),(l=new FormData).append("file",s,i),l.append("dsName",r),e.next=14,T.b.uploadAttachment(l);case 14:n++,e.next=5;break;case 17:for(o=this.ref.table.getHeaderFilters(),console.log("initialHeaderFilter: ",o),this.setState({initialHeaderFilter:o}),c=this.ref.table.getSorters(),d=[],u=0;u<c.length;u++)(m={}).column=c[u].field,m.dir=c[u].dir,d.push(m);this.setState({initialSort:d}),this.setState({refresh:this.state.refresh+1});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleFilters",value:function(){for(var e,t=this.props,a=t.dsHome,r=t.match.params.dsView,n=this.ref.table.getColumnDefinitions(),s=0;s<n.length;s++){e=!n[s].headerFilter&&"input",n[s].headerFilter=e;try{e&&a.dsViews[r].columnAttrs[s].headerFilterType&&(e=a.dsViews[r].columnAttrs[s].headerFilterType)}catch(i){}}this.ref.table.setColumns(n),this.setState({filterButtonText:e?"Disable Filtering":"Enable Filtering"})}},{key:"recordRef",value:function(e){return this.ref=e,!0}},{key:"deleteRowHandler",value:function(){var e=Object(D.a)(O.a.mark((function e(t,a,r){var n,s,i,l,o,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,n.dispatch,s=n.match,i=n.user,n.dsHome,l=s.params.dsName,o=s.params.dsView,console.log("Delete row handler called...:",r),!r){e.next=13;break}if(c=a.getRow().getData()._id){e.next=9;break}return a.getRow().delete(),e.abrupt("return");case 9:return e.next=11,T.b.deleteOneAttachment({dsName:l,dsView:o,user:i.user,_id:c});case 11:a.getRow().delete(),this.setState({totalRecs:this.state.totalRecs-1});case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"deleteRowQuestion",value:function(e,t){var a=this;this.setState({modalTitle:"Delete current attachment?",modalQuestion:"This will delete the attachment shown in this row. Please confirm. This cannot be undone. Pls ensure links to this attachment are also fixed!",modalCallback:function(r){return a.deleteRowHandler(e,t,r)},showModal:!this.state.showModal})}},{key:"toggleSingleFilter",value:function(e,t){for(var a,r=this.props,n=r.match,s=r.dsHome,i=(n.params.dsName,n.params.dsView),l=this.ref.table.getColumnDefinitions(),o=0;o<l.length;o++)if(l[o].field===t.getField()){a=!l[o].headerFilter&&"input",l[o].headerFilter=a;try{a&&s.dsViews[i].columnAttrs[o].headerFilterType&&(a=s.dsViews[i].columnAttrs[o].headerFilterType)}catch(e){}this.ref.table.updateColumnDefinition(l[o].field,{headerFilter:a})}}},{key:"setColumnDefinitions",value:function(){for(var e=this.props,t=e.match,a=(e.dsHome,t.params.dsName,t.params.dsView,[{label:"Toggle Filters",action:this.toggleSingleFilter}]),r=[{label:"Delete row...",action:this.deleteRowQuestion}],n=[],s=[{field:"_id",title:"file",width:800,formatter:"textarea",headerTooltip:!0,hozAlign:"left",vertAlign:"top"},{field:"size",title:"size",width:100,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"},{field:"time",title:"time",width:160,formatter:"textarea",headerTooltip:!0,hozAlign:"center",vertAlign:"middle"}],i=0;i<s.length;i++){var l=JSON.parse(JSON.stringify(s[i]));l.headerMenu=a,l.contextMenu=r,l.editable=this.cellEditCheck,this.state.initialHeaderFilter.length&&(l.headerFilter="input"),"_id"===l.field&&(l.formatter=function(e,t){var a=e.getValue();if(void 0===a)return"";if("string"!=typeof a)return a;var r=a="/"+a;return a="Click to view: [".concat(a,"](").concat(a,")"),a+="\n\nTo use this image, copy the text below and paste into your cell!:\n",/(\.png$)|(\.jpg$)|(\.gif$)|(\.jpeg$)/i.test(r)?a+="\n\n``` md\n\n"+'<img src="'.concat(r,'" alt="').concat(r,'" width="100%" height="100%" />')+"\n```\n":a+="\n\n``` md\n\n"+"[Modify link text](".concat(r,")")+"\n```\n",a=Je.render(a),'<div style="white-space:normal;word-wrap:break-word;margin-bottom:-12px;">'.concat(a,"</div>")}),n.push(l)}return n}},{key:"ajaxResponse",value:function(e,t,a){return console.log("ajaxResponse: ",a),this.setState({totalRecs:a.total}),a}},{key:"step2",value:function(){var e=this.props,t=e.match,a=e.user,r=(e.dsHome,t.params.dsName,t.params.dsView),s=this.setColumnDefinitions();return console.log("Columns: ",s),n.a.createElement(P.a,null,n.a.createElement("div",null,n.a.createElement(Ee.a,{columns:s,data:[],options:{ajaxURL:"".concat(Qe.apiUrl,"/ds/view/attachments/").concat(this.props.match.params.dsName,"/").concat(r,"/").concat(a.user),pagination:"remote",paginationDataSent:{page:"page",size:"per_page"},paginationDataReceived:{last_page:"total_pages"},current_page:1,initialHeaderFilter:this.state.initialHeaderFilter,initialSort:JSON.parse(JSON.stringify(this.state.initialSort)),paginationSize:this.state.pageSize,paginationSizeSelector:[10,25,50,100,500,!0],ajaxResponse:this.ajaxResponse,ajaxError:function(e){console.log("ajaxError",e)},forceRefresh:this.state.refresh,index:"_id",ajaxSorting:!0,ajaxFiltering:!0,clipboard:!0,renderComplete:this.renderComplete},innerref:this.recordRef})))}},{key:"render",value:function(){var e=this,t=this.props.match,a=this;return document.title="Attachments: ".concat(t.params.dsName),n.a.createElement("div",null,n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement("h3",{style:{float:"center"}},n.a.createElement("label",{className:"underline"},"Attachments in: ",t.params.dsName)))),n.a.createElement("br",null),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:2,sm:2,xs:2},n.a.createElement("b",null,"Select files to upload: ")),n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement(ee.a,{ref:function(t){return e.fileInputForm=t},onClick:function(){return i.a.findDOMNode(e.fileInputForm).reset()}},n.a.createElement(ee.a.Control,{type:"file",name:"file",id:"fileInput",multiple:"multiple",onChange:this.onFileSelect})))),n.a.createElement("br",null),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:12,sm:12,xs:12},n.a.createElement(ee.a,{inline:!0},n.a.createElement(ee.a.Check,{inline:!0,type:"checkbox",label:"\xa0Show all filters",checked:this.state.showAllFilters,onChange:function(e){var t=e.target.checked;a.setState({showAllFilters:t}),localStorage.setItem("showAllFilters",JSON.stringify(t)),a.toggleFilters()}})))),n.a.createElement(P.a,null,n.a.createElement(H.a,{md:4,sm:4,xs:4},n.a.createElement("b",null,"Total records: ",this.state.totalRecs))),this.step2(),n.a.createElement(Be.a,{show:this.state.showModal,onClose:this.toggleModal,title:this.state.modalTitle},this.state.modalQuestion))}}]),t}(r.Component);var Ke=Object(o.b)((function(e){return{user:e.authentication.user,home:e.home,dsHome:e.dsHome}}))(Ge),We=[n.a.createElement(l.b,{path:"/newDsXlsx",exact:!0,component:ie}),n.a.createElement(l.b,{path:"/newDsCsv",exact:!0,component:oe}),n.a.createElement(l.b,{path:"/newDsFrmDs",exact:!0,component:ue}),n.a.createElement(l.b,{path:"/test",exact:!0,component:$}),n.a.createElement(l.b,{path:"/",exact:!0,component:Me}),n.a.createElement(l.b,{path:"/ds/:dsName",exact:!0,component:pe}),n.a.createElement(l.b,{path:"/ds/:dsName/:dsView",component:fe.a}),n.a.createElement(l.b,{path:"/dsViewEdit/:dsName/:dsView",exact:!0,component:_e}),n.a.createElement(l.b,{path:"/dsEditLog/:dsName",exact:!0,component:Re}),n.a.createElement(l.b,{path:"/dsBulkEdit/:dsName",exact:!0,component:Le}),n.a.createElement(l.b,{path:"/dsAttachments/:dsName",exact:!0,component:Ke})],Xe=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.needMargin;return n.a.createElement("div",{className:e?"right_col":"right_col_noPanel",role:"main"},We)}}]),t}(r.Component),Ye=n.a.createElement(Ve,null,n.a.createElement(Ve.MenuSection,{title:" "},Pe)),qe=Xe,Ze=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={leftVisible:!1},a.toggleLeft=a.toggleLeft.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"toggleLeft",value:function(){this.setState({leftVisible:!this.state.leftVisible})}},{key:"render",value:function(){var e=this.props.user,t=this.state.leftVisible;return n.a.createElement("div",{className:"container body"},n.a.createElement("div",{className:"main_container"},n.a.createElement(I,{user:e,visible:t},Ye),n.a.createElement(U,{user:e,toggleCb:this.toggleLeft,needMargin:t}),n.a.createElement(qe,{needMargin:t}),n.a.createElement(V,{needMargin:t})))}}]),t}(r.Component);var $e=Object(o.b)((function(e){return{user:e.authentication.user}}))(Ze),et=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",submitted:!1},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(f.a)({},a,r))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=t.username,r=t.password,n=this.props.dispatch;if(a&&r){var s=a.match(/(.*?)@(.*)/);s&&s.length>=2&&(a=s[1]),n(F.login(a,r))}}},{key:"render",value:function(){var e=this.props,t=e.loggingIn,r=e.loggedIn,s=e.message,i=this.state,o=i.username,c=i.password,d=i.submitted,u=(this.props.location.state||{from:{pathname:"/"}}).from;return r?n.a.createElement(l.a,{to:u}):(a(885),n.a.createElement("div",null,n.a.createElement("div",{className:"logincontainer"},n.a.createElement("section",{id:"content"},n.a.createElement("h10",null,"Welcome to Datagroom"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"username",value:o,onChange:this.handleChange}),d&&!o&&n.a.createElement("div",{className:"help-block"},"Username is required"),n.a.createElement("br",null)),n.a.createElement("div",null,n.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"password",value:c,onChange:this.handleChange,autocomplete:"current-password"}),d&&!c&&n.a.createElement("div",{className:"help-block"},"Password is required"),n.a.createElement("br",null)),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",null,"Log In"),t&&n.a.createElement("div",{style:{float:"left"}},n.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",alt:"Waiting"})),d&&s&&n.a.createElement("div",{className:"help-block"},s),n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("br",null))))),n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("div",{className:"clearfix"})),n.a.createElement("p",{style:{clear:"both"}}),n.a.createElement("br",null))))}}]),t}(n.a.Component);var tt=Object(l.g)(Object(o.b)((function(e){var t=e.authentication,a=t.loggingIn,r=t.loggedIn,n=e.alert;return{loggingIn:a,loggedIn:r,type:n.type,message:n.message}}))(et)),at=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.loggedIn,t=this.props,a=t.component,r=Object(Ne.a)(t,["component"]);return n.a.createElement(l.b,Object.assign({},r,{render:function(t){return e?n.a.createElement(a,t):n.a.createElement(l.a,{to:{pathname:"/login",state:{from:t.location}}})}}))}}]),t}(n.a.Component);var rt=Object(o.b)((function(e){return{loggedIn:e.authentication.loggedIn}}))(at),nt=(a(230),a(231),a(174)),st=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a.startPreso=a.startPreso.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.startPreso()}},{key:"startPreso",value:function(){var e='<div class="reveal"><div class="slides">';e='<div style="display: flex; flex-direction: row;">\n        <div class="reveal deck1" style="width: 100%; height: 100vh; margin: 10px;">\n        <div class="slides">',e+=localStorage.getItem("revealjsSections"),e+="</div></div></div>",document.querySelector("#rj").innerHTML=e,console.log("FinalHTML: ",e),new nt.a(document.querySelector(".deck1"),{embedded:!0,progress:!1,keyboardCondition:"focused"}).initialize()}},{key:"render",value:function(){return n.a.createElement("div",{id:"rj"},"Hi there, we'll show reveal js page here.")}}]),t}(n.a.Component),it=function(e){var t=e.store;return n.a.createElement(o.a,{store:t},n.a.createElement(l.c,{history:L.b},n.a.createElement("div",null,n.a.createElement(l.d,null,n.a.createElement(l.b,{path:"/login",component:tt}),n.a.createElement(l.b,{path:"/revealjs",component:st}),n.a.createElement(rt,{path:"/*",component:$e})))))};a(886);i.a.render(n.a.createElement(it,{store:L.c}),document.getElementById("root"))},90:function(e,t,a){"use strict";var r=a(53);t.a=function(e,t,a,n,s){var i=this,l=this,o=e.getElement(),c=e.getValue(),d=s.verticalNavigation||"editor",u="undefined"!==typeof c||null===c?c:"undefined"!==typeof s.defaultValue?s.defaultValue:"",m=document.createElement("input"),h=document.createElement("div"),p=[],f=!1,E=!0,g=!1,v=e.getValue();if(console.log("curVal: ",v),console.log("initialValue before nullifying it: ",c),c=null,console.log("initialValue: ",c),console.log("initialDisplayValue: ",u),s.conditionalValues){s.values=[];for(var b=e.getRow().getData(),S=0;S<s.conditionalExprs.length;S++){var y=s.conditionalExprs[S].split(":")[0].trim(),C=r.a.parseExpr(y);if(r.a.evalExpr(C,b)){var w=s.conditionalExprs[S].split(":")[1].trim();w=JSON.parse(w),s.values=w;break}}}if(m.setAttribute("type","search"),m.style.padding="4px",m.style.width="100%",m.style.boxSizing="border-box",s.elementAttributes&&"object"==typeof s.elementAttributes)for(var _ in s.elementAttributes)"+"==_.charAt(0)?(_=_.slice(1),m.setAttribute(_,m.getAttribute(_)+s.elementAttributes["+"+_])):m.setAttribute(_,s.elementAttributes[_]);function k(){!0===s.values?g=A():"string"===typeof s.values&&(g=A(s.values))}function A(t){var a,r={},n=l.table.getData();return(a=t?l.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(n.forEach((function(e){var t=a.getFieldValue(e);null!==t&&"undefined"!==typeof t&&""!==t&&(r[t]=!0)})),r=s.sortValuesList?"asc"==s.sortValuesList?Object.keys(r).sort():Object.keys(r).sort().reverse():Object.keys(r)):console.warn("unable to find matching column to create autocomplete lookup list:",t),r}function O(e,t){for(var a=[],r=0;r<e.length;r++){for(var n=!1,s=0;s<t.length;s++)if(e[r].value===t[s].trim()){n=!0;break}n||a.push(e[r])}return a}function D(e,t,a){var r,n,i=[];(r=g||(s.values||[]),s.searchFunc)?(i=s.searchFunc(e,r))instanceof Promise?(L("undefined"!==typeof s.searchingPlaceholder?s.searchingPlaceholder:"Searching..."),i.then((function(e){x(O(e=F(e),a),t)})).catch((function(e){console.err("error in autocomplete search promise:",e)}))):x(O(i=F(i),a),t):(n=F(r),""===e||null===e?s.showListOnEmpty&&(i=n):n.forEach((function(t){null===t.value&&"undefined"===typeof t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&i.push(t)})),x(O(i,a),t))}function R(e){var t,a=[];t=g||(s.values||[]),s.searchFunc?(a=s.searchFunc("",t))instanceof Promise&&(a=[]):a=t,Array.isArray(a)||(a=Object.keys(a));for(var r=[],n=0;n<e.length;n++){for(var i=!1,l=0;l<a.length;l++)if(e[n].trim()===a[l]){i=!0;break}i&&r.push(e[n].trim())}return r}function T(e){for(var t={},a=0;a<e.length;a++)t[e[a]]=1;return Object.keys(t)}function L(e){var t=document.createElement("div");j(),!1!==e&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,e instanceof Node?t.appendChild(e):t.innerHTML=e,h.appendChild(t))}function F(e){var t=[];if(Array.isArray(e))e.forEach((function(e){var a={};"object"===typeof e?(a.title=s.listItemFormatter?s.listItemFormatter(e.value,e.label):e.label,a.value=e.value):(a.title=s.listItemFormatter?s.listItemFormatter(e,e):e,a.value=e),t.push(a)}));else for(var a in e){var r={title:s.listItemFormatter?s.listItemFormatter(a,e[a]):e[a],value:a};t.push(r)}return t}function j(){for(;h.firstChild;)h.removeChild(h.firstChild)}function x(e,t){e.length?function(e,t){var a=!1;j(),(p=e).forEach((function(e){var r=e.element;r||((r=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),r.tabIndex=0,r.innerHTML=e.title,r.addEventListener("click",(function(t){I(e),N()})),r.addEventListener("mousedown",(function(e){E=!1,console.log("eL mousedown"),setTimeout((function(){E=!0}),10)})),e.element=r,t&&e.value==c&&(m.value=e.title,e.element.classList.add("active"),a=!0),e===f&&(e.element.classList.add("active"),a=!0)),h.appendChild(r)})),a||I(!1)}(e,t):s.emptyPlaceholder&&L(s.emptyPlaceholder)}function N(){if(V(),console.log("Chooseitem!"),f)if(c!==f.value){for(var e="",t=m.value.split(","),r=0;r<t.length-1;r++)e&&(e+=", "),e+=t[r].trim();e&&(e+=", ");var i=(e+=f.value.trim()).split(",");i=T(i),s.freetext||(i=R(i)),e=i.join(", "),a(e)}else n();else{for(var l="",o=m.value.split(","),d=0;d<o.length-1;d++)l&&(l+=", "),l+=o[d].trim();var h=function(e){var t,a,r=[];if(t=g||(s.values||[]),s.searchFunc){if((r=s.searchFunc(e,t))instanceof Promise)return{status:!1,match:""}}else a=F(t),""===e?s.showListOnEmpty&&(r=a):a.forEach((function(t){null===t.value&&"undefined"===typeof t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&r.push(t)}));return 1===r.length?{status:!0,match:r[0].value}:{status:!1,match:""}}(o[o.length-1]),p=h.status,E=h.match;if(p&&(l&&(l+=", "),l+=E),1===o.length&&s.freetext&&(l&&(l+=", "),l+=m.value.trim()),""===l&&s.allowEmpty)a(l);else if(l){var v=l.split(",");v=T(v),s.freetext||(v=R(v)),(l=v.join(", "))!==u?a(l):n()}else n()}}function U(){if(!h.parentNode){for(;h.firstChild;)h.removeChild(h.firstChild);var e=function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}(o);h.style.minWidth=o.offsetWidth+"px",h.style.top=e.top+o.offsetHeight+"px",h.style.left=e.left+"px",document.body.appendChild(h)}}function I(e,t){f&&f.element&&f.element.classList.remove("active"),f=e,e&&e.element&&e.element.classList.add("active")}function V(){h.parentNode&&h.parentNode.removeChild(h),l.table.rowManager.element.removeEventListener("scroll",P)}function P(){V(),n()}h.classList.add("tabulator-edit-select-list"),h.addEventListener("mousedown",(function(e){E=!1,console.log("listEL mousedown"),setTimeout((function(){E=!0}),10)})),m.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=p.indexOf(f),("editor"==d||"hybrid"==d&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),I(t>0&&p[t-1]));break;case 40:t=p.indexOf(f),("editor"==d||"hybrid"==d&&t<p.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<p.length-1&&I(-1==t?p[0]:p[t+1]));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation();break;case 13:N();break;case 27:P();break;case 36:case 35:e.stopImmediatePropagation()}})),m.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:var t=m.value.split(","),a=[];t.length>1&&(a=t.slice(0,t.length-1)),D(t[t.length-1].trim(),!1,a)}})),m.addEventListener("search",(function(e){D(m.value,!1,[])})),m.addEventListener("blur",(function(e){E?N():console.log("Not calling chooseItem!")})),m.addEventListener("focus",(function(e){k(),U(),m.value=""!==u&&null!==u?u+",":"";var t=m.value.split(","),a=[];t.length>1&&(a=t.slice(0,t.length-1)),D("",!0,a)})),t((function(){m.style.height="100%",m.focus({preventScroll:!0})})),s.mask&&this.table.modules.edit.maskInput(m,s),setTimeout((function(){i.table.rowManager.element.addEventListener("scroll",P)}),10),k(),m.value=u+",";var H=m.value.split(","),M=[];return H.length>1&&(M=H.slice(0,H.length-1)),D("",!0,M),m}}},[[300,1,2]]]);
//# sourceMappingURL=main.a300e597.chunk.js.map