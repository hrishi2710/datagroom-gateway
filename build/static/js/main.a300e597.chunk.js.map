{"version":3,"sources":["common/constants/alert.constants.js","common/constants/user.constants.js","common/constants/newDs.constants.js","common/constants/index.js","common/routes/home/Modal.js","common/services/user.service.js","common/services/uploads.service.js","common/services/index.js","common/reducers/dsHome.reducer.js","common/routes/home/MySingleAutoCompleter.js","common/routes/home/MyCodeMirror.js","common/services/ds.service.js","common/actions/ds.actions.js","common/routes/home/NewDsStoreMgmt.js","common/routes/home/DsView.js","common/routes/home/ColorPicker.js","common/routes/home/FilterControls.js","common/helpers/history.js","common/reducers/authentication.reducer.js","common/reducers/allDs.reducer.js","common/reducers/index.js","common/reducers/registration.reducer.js","common/reducers/users.reducer.js","common/reducers/alert.reducer.js","common/helpers/store.js","common/helpers/auth-header.js","common/helpers/index.js","common/routes/home/QueryParsers.js","common/routes/home/MyTabulator.js","../node_modules/moment-mini/locale sync /^/.*$","common/routes/home/MyTextArea.js","common/components/SharedState.js","common/components/childrenWithProps.js","common/components/TopNavBar/Item.js","common/components/domUtils.js","common/components/TopNavBar/TopNavBar.js","common/components/TopNavBar/index.js","common/actions/user.actions.js","common/actions/alert.actions.js","common/navigation/UserMenuItem.js","common/navigation/Top.js","common/navigation/Left.js","common/navigation/Footer.js","common/routes/home/upload.js","common/routes/home/NewDsFromXls.js","common/routes/home/NewDsFromCsv.js","common/routes/home/NewDsFromDs.js","common/routes/home/DsHome.js","common/routes/home/DsViewEditAccessCtrl.js","common/routes/home/DsViewEdit.js","common/routes/home/DsEditLog.js","common/routes/home/DsBulkEdit.js","common/components/SideBar/MenuSection.js","common/components/SideBar/GroupMenuItem.js","common/components/SideBar/MenuItem.js","common/components/SideBar/SideBar.js","common/components/SideBar/index.js","common/routes/home/Menu.js","common/routes/home/AllDs.js","common/routes/home/DsAttachments.js","common/routes/home/index.js","common/routes/PageContent.js","common/routes/index.js","common/components/App.js","common/components/InfnLoginPage.jsx","common/components/PrivateRoute.jsx","common/components/revealjsPage.jsx","common/components/Root.js","index.js","common/routes/home/MyAutoCompleter.js"],"names":["alertConstants","SUCCESS","ERROR","CLEAR","userConstants","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","GETALL_REQUEST","GETALL_SUCCESS","GETALL_FAILURE","DELETE_REQUEST","DELETE_SUCCESS","DELETE_FAILURE","dsConstants","LOAD_COLUMNS_REQUEST","LOAD_COLUMNS_SUCCESS","LOAD_COLUMNS_FAILURE","CLEAR_COLUMNS","EDIT_SINGLE_REQUEST","EDIT_SINGLE_SUCCESS","EDIT_SINGLE_FAILURE","EDIT_SINGLE_DELETE_TRACKER","DELETE_SINGLE_REQUEST","DELETE_SINGLE_SUCCESS","DELETE_SINGLE_FAILURE","DELETE_SINGLE_DELETE_TRACKER","DELETE_MANY_REQUEST","DELETE_MANY_SUCCESS","DELETE_MANY_FAILURE","DELETE_MANY_DELETE_TRACKER","DOWNLOAD_XLSX_REQUEST","DOWNLOAD_XLSX_SUCCESS","DOWNLOAD_XLSX_FAILURE","SET_ROW_ADD_TRACKER","ROW_ADD_SUCCESS","ROW_ADD_FAILURE","CLEAR_ROW_ADD_TRACKER","SET_VIEW_DEFS_REQUEST","SET_VIEW_DEFS_SUCCESS","SET_VIEW_DEFS_FAILURE","CLEAR_VIEW_DEFS_TRACER","JIRA_REFRESH_REQUEST","JIRA_REFRESH_SUCCESS","JIRA_REFRESH_FAILURE","JIRA_REFRESH_DELETE_TRACKER","ADD_FILTER_REQUEST","ADD_FILTER_SUCCESS","ADD_FILTER__FAILURE","CLEAR_ADD_FILTER_TRACKER","EDIT_FILTER_REQUEST","EDIT_FILTER_SUCCESS","EDIT_FILTER__FAILURE","CLEAR_EDIT_FILTER_TRACKER","DELETE_FILTER_REQUEST","DELETE_FILTER_SUCCESS","DELETE_FILTER__FAILURE","CLEAR_DELETE_FILTER_TRACKER","CLEAR_DS","UPLOAD_BULK_XLS_REQUEST","UPLOAD_BULK_XLS_SUCCESS","UPLOAD_BULK_XLS_FAILURE","SET_BULK_SELECTED_SHEET","LOAD_BULK_FROM_RANGE_REQUEST","LOAD_BULK_FROM_RANGE_SUCCESS","LOAD_BULK_FROM_RANGE_FAILURE","CLEAR_LOADSTATUS","BULK_EDIT_REQUEST","BULK_EDIT_SUCCESS","BULK_EDIT_FAILURE","allDsConstants","LOAD_DSLIST_REQUEST","LOAD_DSLIST_SUCCESS","LOAD_DSLIST_FAILURE","SEEKING_DELETE_CONFIRM","DELETE_DS_REQUEST","DELETE_DS_SUCCESS","DELETE_DS_FAILURE","ModalWrapper","this","props","show","style","position","top","bottom","left","right","backgroundColor","padding","borderRadius","maxWidth","margin","Header","Title","title","height","overflowY","Body","children","Footer","variant","onClick","onClose","cancel","ok","React","Component","userService","login","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","config","apiUrl","then","handleResponse","user","token","localStorage","setItem","logout","register","getAll","authHeader","getById","id","update","delete","removeItem","response","text","data","parse","status","error","message","statusText","Promise","reject","uploadService","fileUpload","findHeadersInSheet","loadHdrsFromRange","createDs","createDsFromDs","csvFileUpload","createDsViaCsv","uploadAttachment","deleteOneAttachment","a","responseJson","json","console","log","dataLen","length","toString","initialState","dsHome","state","action","type","newState","dsViews","dsView","columns","columnsAndKeys","columnAttrs","keys","jiraConfig","dsDescription","filters","otherTableAttrs","aclConfig","dsEdits","_id","editStatus","editTracker","serverStatus","dsRowAdds","uiRow","dsDeletes","deleteStatus","deleteTracker","dsSetView","dsName","dsJiraRefresh","dsFilterAdds","filter","dsFilterEdits","dsFilterDeletes","dsBulkEdits","uploadStatus","fileName","sheetInfo","uploadError","selectedSheet","sheetName","selectedRange","loadStatus","MySingleAutoCompleter","cell","onRendered","success","editorParams","self","cellEl","getElement","initialValue","getValue","vertNav","verticalNavigation","initialDisplayValue","defaultValue","input","document","createElement","listEl","displayItems","currentItem","blurable","uniqueColumnValues","conditionalValues","values","rowData","getRow","getData","i","conditionalExprs","exprStr","split","trim","expr","QueryParsers","parseExpr","evalExpr","setAttribute","width","boxSizing","elementAttributes","key","charAt","slice","getAttribute","genUniqueColumnValues","getUniqueColumnValues","field","column","output","table","columnManager","getColumnByField","getColumn","_getSelf","forEach","row","val","getFieldValue","sortValuesList","Object","sort","reverse","warn","filterList","term","intialLoad","items","matches","searchFunc","addNotice","searchingPlaceholder","result","fillListIfNotEmpty","parseItems","catch","err","showListOnEmpty","item","value","String","toLowerCase","indexOf","push","notice","searchEl","clearList","classList","add","tabIndex","Node","appendChild","innerHTML","inputValues","itemList","Array","isArray","listItemFormatter","label","firstChild","removeChild","current","el","element","addEventListener","e","setCurrentItem","chooseItem","setTimeout","fillList","emptyPlaceholder","hideList","freetext","allowEmpty","match","isExactMatch","showList","parentNode","offset","box","getBoundingClientRect","window","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","elOffset","minWidth","offsetWidth","offsetHeight","showInputValue","remove","rowManager","removeEventListener","cancelItem","index","keyCode","stopImmediatePropagation","stopPropagation","preventDefault","focus","preventScroll","mask","modules","edit","maskInput","MyCodeMirror","editor","cellValue","display","whiteSpace","resize","onChange","curValue","CodeMirrorSpellChecker","codeMirrorInstance","CodeMirror","fromTextArea","lineNumbers","lineWrapping","mode","backdrop","highlightFormatting","inlineAttachment","editors","codemirror4","attach","uploadUrl","urlText","fileUrlText","allowedTypes","extraParams","initialHeight","_cell","replace","parseInt","vh","Math","max","clientHeight","innerHeight","min","setHeightSpecial","normalizeHeight","scrollIntoView","line","getDoc","lineCount","ch","setCursor","refresh","on","cm","h","pos","getCursor","ctrlKey","outside","mouseDownDate","Date","now","FileSaver","require","dsService","loadColumnsForUserView","editSingleAttribute","insertOneDoc","downloadXlsx","getDsList","deleteDs","deleteOneDoc","deleteManyDocs","setViewDefinitions","refreshJira","addFilter","editFilter","deleteFilter","doBulkEditRequest","dsUser","fc","Buffer","blob","Blob","saveAs","Error","dsActions","dispatch","failure","oldVal","newVal","selectorObj","editObj","request","doc","dsList","objects","rows","viewDefs","clearBulkEditStore","uploadBulkEditXlsFile","formData","setSelectedSheet","setSheet","setRowsFrmSheet","setColsFrmSheet","doIt","newDsConstants","UPLOAD_XLS_REQUEST","UPLOAD_XLS_SUCCESS","UPLOAD_XLS_FAILURE","UPLOAD_CSV_REQUEST","UPLOAD_CSV_SUCCESS","UPLOAD_CSV_FAILURE","SET_SELECTED_SHEET","SET_SELECTED_KEYS","FIND_HDRS_INXLS_REQUEST","FIND_HDRS_INXLS_SUCCESS","FIND_HDRS_INXLS_FAILURE","LOAD_FROM_RANGE_REQUEST","LOAD_FROM_RANGE_SUCCESS","LOAD_FROM_RANGE_FAILURE","CREATE_DS_REQUEST","CREATE_DS_SUCCESS","CREATE_DS_FAILURE","newDs","hdrs","selectedKeys","createStatus","newDsActions","clearReduxStore","uploadXlsFile","hdrsInSheet","setSelectedKeys","setKeys","uploadCsvFile","fromDsName","toDsName","retainData","MarkdownIt","linkify","html","use","markdownItMermaid","imageFormat","markdownItFancyListPlugin","defaultRender","renderer","rules","link_open","tokens","idx","options","env","renderToken","aIndex","attrIndex","attrPush","attrs","socket","connect","DsView","firstTime","filterButtonText","editingButtonText","pageSize","totalRecs","initialHeaderFilter","initialSort","filterColumnAttrs","currentColumnAttrs","frozenCol","showModal","modalTitle","modalQuestion","modalCallback","modalStatus","modalCancel","modalOk","chronologyDescending","singleClickEdit","showAllFilters","disableEditing","showColorPicker","colorPickerLeft","colorPickerTop","color","connectedState","ref","timers","lockedByOthersCells","firstRenderCompleted","cellImEditing","mouseDownOnHtmlLink","mouseDownOnBadgeCopyIcon","applyHtmlLinkAndBadgeClickHandlers","bind","renderComplete","cellEditing","cellEdited","cellEditCancelled","cellEditCheck","cellForceEditTrigger","fixImgSizeForClipboard","copyFormatted","startPreso","myCopyToClipboard","recordRef","toggleFilters","toggleEditing","addRow","deleteRowHandler","deleteRowQuestion","deleteAllRowsInViewQuestion","deleteAllRowsInView","deleteAllRowsInQuery","duplicateAndAddRowHandler","toggleSingleFilter","freezeColumn","unfreezeColumn","setFreezeColumn","pageSizeChange","ajaxResponse","ajaxURLGenerator","cellClickEvents","copyToClipboard","copyCellToClipboard","pickFillColorHandler","handleColorPickerClose","handleColorPickerOnChangeComplete","jiraRefreshHandler","jiraRefreshStatus","toggleModal","processFilterChange","isKey","hideColumn","showAllCols","hideColumnFromCell","columnResized","columnVisibilityChanged","retainColumnAttrs","applyFilterColumnAttrs","normalizeAllImgRows","applyHighlightJsBadge","displayConnectedStatus","chronologyDescendingFrmLocal","getItem","singleClickEditFrmLocal","showAllFiltersFrmLocal","disableEditingFrmLocal","params","me","emit","setState","helloObj","activeLocks","searchRows","fields","j","getCell","cancelEdit","lockedObj","unlockedObj","adjustTableHeight","undefined","updateData","colDef","getDefinition","formatter","formatterParams","clearTimeout","adjustTableSize","splElements","getElementById","getElementsByTagName","len","onclick","querySelectorAll","clickedEl","srcElement","contains","highlightJsBadge","imgList","imgSizes","img","src","matchAll","test","str","rep","RegExp","replaceAll","location","origin","clearInterval","extraIters","setInterval","readyState","allImgsRead","complete","getRows","cols","getColumns","isVisible","getField","hide","forField","getWidth","visible","hidden","confirmed","cellEditCheckForConflicts","setImmediate","unlockReq","lockReq","clearHeaderFilter","currentDefs","getColumnDefinitions","headerFilter","headerFilterType","setColumns","MyTextArea","DateEditor","getHeaderFilters","slideFound","sectionHtml","slideList","slide","open","export","getHtml","container","pointerEvents","opacity","activeSheets","prototype","call","styleSheets","sheet","disabled","getSelection","removeAllRanges","range","createRange","selectNode","addRange","execCommand","href","entries","map","kv","k","hasOwnProperty","dangerouslySetInnerHTML","__html","fixValueType","keyObj","atLeastOneKeyNotEmpty","getOldValue","typeOfOldVal","Number","isNaN","configuredType","col","setValue","newData","clearData","baseUrl","url","pretend","total","count","freeze","updateColumnDefinition","hex","pageX","pageY","headerMenuWithoutHide","headerMenuWithHide","cellContextMenu","separator","doConditionalFormatting","conditionalFormatting","headerMenu","titleFormatter","t","titleFormatterParams","contextMenu","editable","render","formatterClipboard","cloneNode","variableHeight","multiselect","MyAutoCompleter","format","beforeFrozen","frozen","prefix","concat","generateParamsList","encoded","encodeURIComponent","join","chronology","includes","serializeParams","s2","fixedHeight","setColumnDefinitions","ajaxURL","forceRefresh","pagination","paginationDataSent","page","size","paginationDataReceived","last_page","current_page","paginationSize","paginationSizeSelector","ajaxError","cellClick","cellDblClick","ajaxSorting","ajaxFiltering","clipboard","clipboardCopyFormatter","rowFormatter","cellMouseEnter","__dg__prevBgColor","cellMouseLeave","innerref","history","newUrl","urlWords","hdrFilters","hdrSorters","pathname","fieldAttrs","setWidth","lsKey","lsValue","class","fixOneTimeLocalStorage","jiraRefreshButton","jira","className","md","sm","xs","step1","cellEditStatus","addRowStatus","rowDeleteStatus","deleteAllRowsStatus","checked","event","target","exact","path","tableRef","onFilterChange","to","step2","onChangeComplete","handleClose","cDsView","authentication","home","ColorPicker","popover","zIndex","FilterControls","save","saveName","saveErrorMsg","saveDescription","saveAsNew","saveAsNewName","saveAsNewDescription","saveAsNewErrorMsg","deleteFilterErrorMsg","deleteFilterControls","saveControls","saveAsNewControls","returnJsx","name","description","Control","as","hdrSortersTmp","getSorters","sorter","dir","attrsForField","newFilter","errMsg","filterOptions","defaultValueIdx","filterDescription","classNamePrefix","isClearable","cFilterControls","createBrowserHistory","loggedIn","rootReducer","combineReducers","loggingIn","registration","registering","users","loading","deleting","deleteError","alert","allDs","dsListStatus","confirmObj","deleteConfirm","deleteInProgressObj","deleteInProgress","dbList","prunedDbList","store","middlewares","thunk","createStore","__REDUX_DEVTOOLS_EXTENSION__","applyMiddleware","configureStore","m","regex","equalsExpr","rowValue","MyTabulator","recordTabRef","nextProps","nextState","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","resolve","module","exports","scrollHeight","heightNow","cursorPosition","textLength","setSelectionRange","selectionStart","SharedState","component","more","getState","childrenWithProps","Children","c","cloneElement","Item","shared","opened","role","li","cn","toggleMenu","toggle","Content","aria-expanded","SubMenu","TopNavBar","closeOnClick","cb","isOn","off","current_target","handler","bodyNextClick","userActions","alertActions","clear","UserMenuItem","Top","toggleCb","needMargin","Left","border","data-toggle","data-placement","aria-hidden","age","dob","rating","passed","pets","colorOptions","curHdrFilter","updateDefinition","editableColumns","hozAlign","b","localeCompare","MultiSelectEditor","MultiValueFormatter","Upload","activeTab","file","onFileSelect","onFileUpload","files","FormData","append","Row","Col","dataEdited","footerElement","movableColumns","movableRows","layout","keybindings","NewDsFromXls","sheetSelectorOnChange","sheetSelectionDone","rangeOnChange","rangeSelectionDone","keySelectorOnChange","dsNameOnChange","remoteFileName","s1Status","sheetOptions","v","s3","Form","Button","statusJsx","s3Status","hdrErrors","flatKeys","s4","hdrOptions","isMulti","s5","s5Status","step1Status","step3","step3Status","step4","step5","step5Status","cNewDsFromXls","NewDsFromCsv","cNewDsFromCsv","NewDsFromDs","incompleteInputErr","dsSelectorOnChange","s1","Check","step2Status","cNewDsFromDs","DsHome","cDsHome","AccessCtrl","accessCtrl","acl","debounceTimers","inline","aclArray","tmpArr","cAccessCtrl","DsViewEdit","refreshAfterRender","jql","jiraFieldMapping","widths","setViewStatus","somethingChanged","pushColumnDefs","addCol","setEditor","setEditorToFalse","setEditorToInput","setEditorToTextArea","setEditorToCodeMirror","setEditorToDate","setFormatter","setFormatterToPlainText","setFormatterToTextArea","setHdrFilterType","setHdrFilterTypeToNumber","setHdrFilterTypeToText","plusFiftyToWidth","editorParamsControl","dsColAdds","addColumn","editableTitle","hdrFilter","filteredDefs","jiraColumns","jiraColumnsPresent","jiraFields","dsFields","lines","jiraKey","dsField","ret","validateMapping","curWidth","vertAlign","epc","columnDef","valueStr","condValues","condExprStr","valArray","condExprs","editorOptions","hozAlignOptions","vertAlignOptions","editorCurVal","hdrFilterTypeCurVal","hozAlignCurVal","vertAlignCurVal","condFormatExprStr","setHozAlign","setVertAlign","setEditorToAutocomplete","curFormatterParams","pushButton","cDsViewEdit","DsEditLog","headerTooltip","newLine","fromCharCode","cDsEditLog","DsBulkEdit","validate","errorJsx","s","oprLog","renderOprLog","s4Status","step4Status","cDsBulkEdit","isActive","linkTo","matchPath","strict","MenuSection","ancestors","active","rcp","GroupMenuItem","icon","visiblePath","chldAncestors","startsWith","setVisiblePath","MenuItem","rest","currentPage","scroll","SideBar","Menu","AllDs","deleteRequest","deleteControls","owner","perms","confirmedDelete","listItems","cAllDs","DsAttachments","persist","origValue","form","fileInputForm","ReactDOM","findDOMNode","reset","multiple","Modal","cDsAttachments","PageContent","Home","HomeMenu","App","leftVisible","toggleLeft","connectedApp","LoginPage","submitted","handleChange","handleSubmit","from","onSubmit","placeholder","autocomplete","float","alt","connectedLoginPage","withRouter","PrivateRoute","connectedPrivateRoute","RevealJsPage","finalHtml","querySelector","Reveal","embedded","progress","keyboardCondition","initialize","Root","curVal","subtractArray","selectedCsvs","filteredMatches","found","filterInvalids","filteredValidCsvs","eliminateDups","filteredMap","successVal","csvs","vals"],"mappings":"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","file":"static/js/main.a300e597.chunk.js","sourcesContent":["export const alertConstants = {\r\n    SUCCESS: 'ALERT_SUCCESS',\r\n    ERROR: 'ALERT_ERROR',\r\n    CLEAR: 'ALERT_CLEAR'\r\n};\r\n","export const userConstants = {\r\n    REGISTER_REQUEST: 'USERS_REGISTER_REQUEST',\r\n    REGISTER_SUCCESS: 'USERS_REGISTER_SUCCESS',\r\n    REGISTER_FAILURE: 'USERS_REGISTER_FAILURE',\r\n\r\n    LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',\r\n    LOGIN_SUCCESS: 'USERS_LOGIN_SUCCESS',\r\n    LOGIN_FAILURE: 'USERS_LOGIN_FAILURE',\r\n    \r\n    LOGOUT: 'USERS_LOGOUT',\r\n\r\n    GETALL_REQUEST: 'USERS_GETALL_REQUEST',\r\n    GETALL_SUCCESS: 'USERS_GETALL_SUCCESS',\r\n    GETALL_FAILURE: 'USERS_GETALL_FAILURE',\r\n\r\n    DELETE_REQUEST: 'USERS_DELETE_REQUEST',\r\n    DELETE_SUCCESS: 'USERS_DELETE_SUCCESS',\r\n    DELETE_FAILURE: 'USERS_DELETE_FAILURE'    \r\n};\r\n","\r\nexport const dsConstants = {\r\n    LOAD_COLUMNS_REQUEST: 'LOAD_COLUMNS_REQUEST', \r\n    LOAD_COLUMNS_SUCCESS: 'LOAD_COLUMNS_SUCCESS',\r\n    LOAD_COLUMNS_FAILURE: 'LOAD_COLUMNS_FAILURE',\r\n\r\n    CLEAR_COLUMNS: 'CLEAR_COLUMNS',\r\n\r\n    EDIT_SINGLE_REQUEST: 'EDIT_SINGLE_REQUEST',\r\n    EDIT_SINGLE_SUCCESS: 'EDIT_SINGLE_SUCCESS',\r\n    EDIT_SINGLE_FAILURE: 'EDIT_SINGLE_FAILURE',\r\n    EDIT_SINGLE_DELETE_TRACKER: 'EDIT_SINGLE_DELETE_TRACKER',\r\n\r\n    DELETE_SINGLE_REQUEST: 'DELETE_SINGLE_REQUEST',\r\n    DELETE_SINGLE_SUCCESS: 'DELETE_SINGLE_SUCCESS',\r\n    DELETE_SINGLE_FAILURE: 'DELETE_SINGLE_FAILURE',\r\n    DELETE_SINGLE_DELETE_TRACKER: 'DELETE_SINGLE_DELETE_TRACKER',\r\n\r\n    DELETE_MANY_REQUEST: 'DELETE_MANY_REQUEST', \r\n    DELETE_MANY_SUCCESS: 'DELETE_MANY_SUCCESS', \r\n    DELETE_MANY_FAILURE: 'DELETE_MANY_FAILURE',\r\n    DELETE_MANY_DELETE_TRACKER: 'DELETE_MANY_DELETE_TRACKER', \r\n\r\n    DOWNLOAD_XLSX_REQUEST: 'DOWNLOAD_XLSX_REQUEST',\r\n    DOWNLOAD_XLSX_SUCCESS: 'DOWNLOAD_XLSX_SUCCESS',\r\n    DOWNLOAD_XLSX_FAILURE: 'DOWNLOAD_XLSX_FAILURE',\r\n\r\n    SET_ROW_ADD_TRACKER: 'SET_ROW_ADD_TRACKER',\r\n    ROW_ADD_SUCCESS: 'ROW_ADD_SUCCESS',\r\n    ROW_ADD_FAILURE: 'ROW_ADD_FAILURE',\r\n    CLEAR_ROW_ADD_TRACKER: 'CLEAR_ROW_ADD_TRACKER',\r\n\r\n    SET_VIEW_DEFS_REQUEST: 'SET_VIEW_DEFS_REQUEST',\r\n    SET_VIEW_DEFS_SUCCESS: 'SET_VIEW_DEFS_SUCCESS',\r\n    SET_VIEW_DEFS_FAILURE: 'SET_VIEW_DEFS_FAILURE',\r\n    CLEAR_VIEW_DEFS_TRACER: 'CLEAR_VIEW_DEFS_TRACKER',\r\n\r\n    JIRA_REFRESH_REQUEST: 'JIRA_REFRESH_REQUEST',\r\n    JIRA_REFRESH_SUCCESS: 'JIRA_REFRESH_SUCCESS',\r\n    JIRA_REFRESH_FAILURE: 'JIRA_REFRESH_FAILURE',\r\n    JIRA_REFRESH_DELETE_TRACKER: 'JIRA_REFRESH_DELETE_TRACKER',\r\n\r\n    ADD_FILTER_REQUEST: 'ADD_FILTER_REQUEST',\r\n    ADD_FILTER_SUCCESS: 'ADD_FILTER_SUCCESS',\r\n    ADD_FILTER__FAILURE: 'ADD_FILTER__FAILURE',\r\n    CLEAR_ADD_FILTER_TRACKER: 'CLEAR_ADD_FILTER_TRACKER',\r\n\r\n    EDIT_FILTER_REQUEST: 'EDIT_FILTER_REQUEST',\r\n    EDIT_FILTER_SUCCESS: 'EDIT_FILTER_SUCCESS',\r\n    EDIT_FILTER__FAILURE: 'EDIT_FILTER__FAILURE',\r\n    CLEAR_EDIT_FILTER_TRACKER: 'CLEAR_EDIT_FILTER_TRACKER',\r\n\r\n    DELETE_FILTER_REQUEST: 'DELETE_FILTER_REQUEST',\r\n    DELETE_FILTER_SUCCESS: 'DELETE_FILTER_SUCCESS',\r\n    DELETE_FILTER__FAILURE: 'DELETE_FILTER__FAILURE',\r\n    CLEAR_DELETE_FILTER_TRACKER: 'CLEAR_DELETE_FILTER_TRACKER',\r\n\r\n    CLEAR_DS: 'CLEAR_DS',\r\n    UPLOAD_BULK_XLS_REQUEST: 'UPLOAD_BULK_XLS_REQUEST', \r\n    UPLOAD_BULK_XLS_SUCCESS: 'UPLOAD_BULK_XLS_SUCCESS',\r\n    UPLOAD_BULK_XLS_FAILURE: 'UPLOAD_BULK_XLS_FAILURE',\r\n\r\n    SET_BULK_SELECTED_SHEET: 'SET_BULK_SELECTED_SHEET',\r\n    LOAD_BULK_FROM_RANGE_REQUEST: 'LOAD_BULK_FROM_RANGE_REQUEST',\r\n    LOAD_BULK_FROM_RANGE_SUCCESS: 'LOAD_BULK_FROM_RANGE_SUCCESS',\r\n    LOAD_BULK_FROM_RANGE_FAILURE: 'LOAD_BULK_FROM_RANGE_FAILURE',\r\n\r\n    CLEAR_LOADSTATUS: 'CLEAR_LOADSTATUS',\r\n    BULK_EDIT_REQUEST: 'BULK_EDIT_REQUEST',\r\n    BULK_EDIT_SUCCESS: 'BULK_EDIT_SUCCESS',\r\n    BULK_EDIT_FAILURE: 'BULK_EDIT_FAILURE',\r\n\r\n};\r\n\r\n\r\nexport const allDsConstants = {\r\n    LOAD_DSLIST_REQUEST: 'LOAD_DSLIST_REQUEST',\r\n    LOAD_DSLIST_SUCCESS: 'LOAD_DSLIST_SUCCESS',\r\n    LOAD_DSLIST_FAILURE: 'LOAD_DSLIST_FAILURE',\r\n\r\n    SEEKING_DELETE_CONFIRM: 'SEEKING_DELETE_CONFIRM',\r\n    \r\n    DELETE_DS_REQUEST: 'DELETE_DS_REQUEST',\r\n    DELETE_DS_SUCCESS: 'DELETE_DS_SUCCESS',\r\n    DELETE_DS_FAILURE: 'DELETE_DS_FAILURE'\r\n};\r\n\r\n","export * from './alert.constants';\r\nexport * from './user.constants';\r\nexport * from './newDs.constants';","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Modal, Button } from 'react-bootstrap'\r\n\r\nclass ModalWrapper extends React.Component {\r\n  render() {\r\n    // Render nothing if the \"show\" prop is false\r\n    if(!this.props.show) {\r\n      return null;\r\n    }\r\n    // The gray background\r\n    const backdropStyle = {\r\n        position: 'fixed',\r\n        top: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(0,0,0,0.3)',\r\n        padding: 50\r\n  \r\n    };\r\n  \r\n      // The modal \"window\"\r\n    const modalStyle = {\r\n        backgroundColor: '#fff',\r\n        borderRadius: 5,\r\n        maxWidth: 600,\r\n        /*minHeight: 300,*/\r\n        margin: '0 auto',\r\n        padding: 30\r\n    };\r\n    const bodyStyle = {\r\n      height: 250,\r\n      overflowY: 'auto'\r\n    }\r\n    return (\r\n        <div style={ backdropStyle }>\r\n            <div style={ modalStyle }>\r\n            <Modal.Header>\r\n                <Modal.Title>{this.props.title}</Modal.Title>\r\n            </Modal.Header>\r\n            <div style={ bodyStyle }>\r\n              <Modal.Body>{this.props.children}</Modal.Body>\r\n            </div>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={() => this.props.onClose(false)}>\r\n                    {this.props.cancel ? this.props.cancel : \"Cancel\"}\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={() => this.props.onClose(true)}>\r\n                    {this.props.ok ? this.props.ok: \"Do It!\"}\r\n                </Button>\r\n            </Modal.Footer>\r\n            </div>\r\n      </div>        \r\n    );\r\n  }\r\n}\r\n\r\nModalWrapper.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  show: PropTypes.bool,\r\n  children: PropTypes.node\r\n};\r\n\r\nexport default ModalWrapper;","import { authHeader } from '../helpers';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    getById,\r\n    update,\r\n    delete: _delete\r\n};\r\n\r\nconst config = {};\r\nif(process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n} else {\r\n    config.apiUrl= \"\"\r\n}\r\n\r\n\r\nfunction login(username, password) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/login`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            // login successful if there's a jwt token in the response\r\n            if (user.token) {\r\n                // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n                localStorage.setItem('user', JSON.stringify(user));\r\n            }\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getById(id) {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/register`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction update(user) {\r\n    const requestOptions = {\r\n        method: 'PUT',\r\n        headers: { ...authHeader(), 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${user.id}`, requestOptions).then(handleResponse);;\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                // auto logout if 401 response returned from api\r\n                logout();\r\n                // XXX: react complains here\r\n                //location.reload(true);\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return JSON.parse(data.user);\r\n    });\r\n}","export const uploadService = {\r\n    fileUpload,\r\n    findHeadersInSheet,\r\n    loadHdrsFromRange,\r\n    createDs,\r\n    createDsFromDs,\r\n\r\n    csvFileUpload,\r\n    createDsViaCsv,\r\n\r\n    uploadAttachment, \r\n    deleteOneAttachment\r\n};\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\n\r\nasync function fileUpload(body) {\r\n    try {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            body\r\n        };\r\n        let responseJson = null;\r\n        let response = await fetch(`${config.apiUrl}/upload`, requestOptions);\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('uploaded', responseJson);\r\n        }\r\n        console.log(response);\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function findHeadersInSheet(body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/upload/findHeadersInSheet`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('findHeadersInSheet', responseJson);\r\n        }\r\n        console.log(response);\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function loadHdrsFromRange (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/upload/loadHdrsFromRange`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('loadHdrsFromRange: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function createDs (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/upload/createDs`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('createDs ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function csvFileUpload(body) {\r\n    try {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            body\r\n        };\r\n        let responseJson = null;\r\n        let response = await fetch(`${config.apiUrl}/uploadCsv`, requestOptions);\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('uploaded csv', responseJson);\r\n        }\r\n        console.log(response);\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function createDsViaCsv (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/uploadCsv/createDs`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('createDs ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function createDsFromDs (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/createDsFromDs`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('createDsFromDs: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function uploadAttachment(body) {\r\n    try {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            body\r\n        };\r\n        let responseJson = null;\r\n        let response = await fetch(`${config.apiUrl}/uploadAttachments`, requestOptions);\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('uploaded', responseJson);\r\n        }\r\n        console.log(response);\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function deleteOneAttachment (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/uploadAttachments/deleteAttachment`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('deleteOneAttachment: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n","export * from './user.service';\r\nexport * from './uploads.service';\r\nexport * from './ds.service';","import { dsConstants } from '../constants';\r\n\r\nconst initialState = {};\r\n\r\nexport function dsHome (state = initialState, action) {\r\n    switch (action.type) {\r\n        case dsConstants.LOAD_COLUMNS_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsViews)\r\n                    newState.dsViews = {};\r\n                newState.dsViews[action.dsView] = { status: 'loading' };\r\n                return newState\r\n            }\r\n        case dsConstants.LOAD_COLUMNS_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsViews)\r\n                    newState.dsViews = {};\r\n                newState.dsViews[action.dsView] = { status: 'success', columns: action.columnsAndKeys.columns, columnAttrs: action.columnsAndKeys.columnAttrs, keys: action.columnsAndKeys.keys, jiraConfig: action.columnsAndKeys.jiraConfig, dsDescription: action.columnsAndKeys.dsDescription, filters: action.columnsAndKeys.filters, otherTableAttrs: action.columnsAndKeys.otherTableAttrs, aclConfig: action.columnsAndKeys.aclConfig };\r\n                return newState\r\n            }\r\n        case dsConstants.LOAD_COLUMNS_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsViews)\r\n                    newState.dsViews = {};\r\n                newState.dsViews[action.dsView] = { status: 'fail', error: action.message };\r\n                return newState\r\n            }\r\n        case dsConstants.EDIT_SINGLE_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsEdits)\r\n                    newState.dsEdits = {};\r\n                newState.dsEdits[action._id] = { editStatus: 'editing', editTracker: action.editTracker };\r\n                return newState\r\n            }\r\n        case dsConstants.EDIT_SINGLE_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsEdits)\r\n                    newState.dsEdits = {};\r\n                newState.dsEdits[action._id] = { editStatus: 'done', serverStatus: action.serverStatus, editTracker: action.editTracker };\r\n                return newState\r\n            }\r\n        case dsConstants.EDIT_SINGLE_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsEdits)\r\n                    newState.dsEdits = {};\r\n                newState.dsEdits[action._id] = { editStatus: 'fail', editTracker: action.editTracker, error: action.message };\r\n                return newState\r\n            }\r\n        case dsConstants.EDIT_SINGLE_DELETE_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsEdits)\r\n                    newState.dsEdits = {};\r\n                delete newState.dsEdits[action._id];\r\n                return newState\r\n            }\r\n        case dsConstants.CLEAR_COLUMNS:\r\n            return {};\r\n        case dsConstants.SET_ROW_ADD_TRACKER: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsRowAdds)\r\n                    newState.dsRowAdds = {};\r\n                newState.dsRowAdds[action.dsView] = { ...newState.dsRowAdds[action.dsView], status: action.status, uiRow: action.uiRow };\r\n                return newState\r\n            }\r\n        case dsConstants.ROW_ADD_SUCCESS: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsRowAdds)\r\n                    newState.dsRowAdds = {};\r\n                newState.dsRowAdds[action.dsView] = { ...newState.dsRowAdds[action.dsView], status: action.status, serverStatus: action.serverStatus };\r\n                return newState\r\n            }\r\n        case dsConstants.ROW_ADD_FAILURE: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsRowAdds)\r\n                    newState.dsRowAdds = {};\r\n                newState.dsRowAdds[action.dsView] = { ...newState.dsRowAdds[action.dsView], status: action.status, error: action.message };\r\n                return newState\r\n            }\r\n        case dsConstants.CLEAR_ROW_ADD_TRACKER: \r\n            {\r\n                delete state.dsRowAdds;\r\n                return state;\r\n            }\r\n        case dsConstants.DELETE_SINGLE_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                newState.dsDeletes[action._id] = { deleteStatus: 'deleting', deleteTracker: action.deleteTracker };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_SINGLE_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                newState.dsDeletes[action._id] = { deleteStatus: 'done', serverStatus: action.serverStatus, deleteTracker: action.deleteTracker };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_SINGLE_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                newState.dsDeletes[action._id] = { deleteStatus: 'fail', deleteTracker: action.deleteTracker, error: action.message };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_SINGLE_DELETE_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                delete newState.dsDeletes[action._id];\r\n                return newState\r\n            }\r\n        case dsConstants.SET_VIEW_DEFS_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsSetView)\r\n                    newState.dsSetView = {};\r\n                newState.dsSetView.dsName = action.dsName;\r\n                newState.dsSetView.dsView = action.dsView;\r\n                newState.dsSetView.status = \"setting\";\r\n                return newState\r\n            }\r\n        case dsConstants.SET_VIEW_DEFS_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsSetView)\r\n                    newState.dsSetView = {};\r\n                newState.dsSetView.dsName = action.dsName;\r\n                newState.dsSetView.dsView = action.dsView;\r\n                newState.dsSetView.status = \"success\";\r\n                newState.dsSetView.serverStatus = action.serverStatus;\r\n                return newState\r\n            }\r\n        case dsConstants.SET_VIEW_DEFS_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsSetView)\r\n                    newState.dsSetView = {};\r\n                newState.dsSetView.dsName = action.dsName;\r\n                newState.dsSetView.dsView = action.dsView;\r\n                newState.dsSetView.status = \"fail\";\r\n                newState.dsSetView.message = action.message;\r\n                return newState\r\n            }\r\n        case dsConstants.CLEAR_VIEW_DEFS_TRACER:\r\n            {\r\n                let newState = {...state};\r\n                delete newState.dsSetView;\r\n                return newState\r\n            }                        \r\n        case dsConstants.JIRA_REFRESH_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsJiraRefresh)\r\n                    newState.dsJiraRefresh = {};\r\n                newState.dsJiraRefresh.dsName = action.dsName;\r\n                newState.dsJiraRefresh.dsView = action.dsView;\r\n                newState.dsJiraRefresh.status = 'refreshing';\r\n                return newState\r\n            }\r\n        case dsConstants.JIRA_REFRESH_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsJiraRefresh)\r\n                    newState.dsJiraRefresh = {};\r\n                newState.dsJiraRefresh.dsName = action.dsName;\r\n                newState.dsJiraRefresh.dsView = action.dsView;\r\n                newState.dsJiraRefresh.status = 'done';\r\n                newState.dsJiraRefresh.serverStatus = action.serverStatus;\r\n                return newState\r\n            }\r\n        case dsConstants.JIRA_REFRESH_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsJiraRefresh)\r\n                    newState.dsJiraRefresh = {};\r\n                newState.dsJiraRefresh.dsName = action.dsName;\r\n                newState.dsJiraRefresh.dsView = action.dsView;\r\n                newState.dsJiraRefresh.status = 'fail';\r\n                newState.dsJiraRefresh.message = action.message;\r\n                return newState\r\n            }\r\n        case dsConstants.JIRA_REFRESH_DELETE_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsJiraRefresh)\r\n                    newState.dsJiraRefresh = {};\r\n                newState.dsJiraRefresh.status = 'dusted';\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_MANY_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                newState.dsDeletes[\"__dg__DELETE_MANY\"] = { deleteStatus: 'deleting', deleteTracker: action.deleteTracker };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_MANY_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                newState.dsDeletes[\"__dg__DELETE_MANY\"] = { deleteStatus: 'done', serverStatus: action.serverStatus, deleteTracker: action.deleteTracker };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_MANY_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                newState.dsDeletes[\"__dg__DELETE_MANY\"] = { deleteStatus: 'fail', deleteTracker: action.deleteTracker, error: action.message };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_MANY_DELETE_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsDeletes)\r\n                    newState.dsDeletes = {};\r\n                delete newState.dsDeletes[\"__dg__DELETE_MANY\"];\r\n                return newState\r\n            }\r\n        case dsConstants.ADD_FILTER_REQUEST: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterAdds)\r\n                    newState.dsFilterAdds = {};\r\n                newState.dsFilterAdds[action.dsView] = { ...newState.dsFilterAdds[action.dsView], status: action.status, filter: action.filter };\r\n                return newState\r\n            }\r\n        case dsConstants.ADD_FILTER_SUCCESS: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterAdds)\r\n                    newState.dsFilterAdds = {};\r\n                newState.dsFilterAdds[action.dsView] = { ...newState.dsFilterAdds[action.dsView], status: action.status, serverStatus: action.serverStatus };\r\n                return newState\r\n            }\r\n        case dsConstants.ADD_FILTER__FAILURE: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterAdds)\r\n                    newState.dsFilterAdds = {};\r\n                newState.dsFilterAdds[action.dsView] = { ...newState.dsFilterAdds[action.dsView], status: action.status, error: action.message };\r\n                return newState\r\n            }            \r\n        case dsConstants.CLEAR_ADD_FILTER_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                delete newState.dsFilterAdds;\r\n                return newState\r\n            }    \r\n        case dsConstants.EDIT_FILTER_REQUEST: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterEdits)\r\n                    newState.dsFilterEdits = {};\r\n                newState.dsFilterEdits[action.dsView] = { ...newState.dsFilterEdits[action.dsView], status: action.status, filter: action.filter };\r\n                return newState\r\n            }\r\n        case dsConstants.EDIT_FILTER_SUCCESS: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterEdits)\r\n                    newState.dsFilterEdits = {};\r\n                newState.dsFilterEdits[action.dsView] = { ...newState.dsFilterEdits[action.dsView], status: action.status, serverStatus: action.serverStatus };\r\n                return newState\r\n            }\r\n        case dsConstants.EDIT_FILTER__FAILURE: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterEdits)\r\n                    newState.dsFilterEdits = {};\r\n                newState.dsFilterEdits[action.dsView] = { ...newState.dsFilterEdits[action.dsView], status: action.status, error: action.message };\r\n                return newState\r\n            }            \r\n        case dsConstants.CLEAR_EDIT_FILTER_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                delete newState.dsFilterEdits;\r\n                return newState\r\n            }\r\n\r\n        case dsConstants.DELETE_FILTER_REQUEST: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterDeletes)\r\n                    newState.dsFilterDeletes = {};\r\n                newState.dsFilterDeletes[action.dsView] = { ...newState.dsFilterDeletes[action.dsView], status: action.status, filter: action.filter };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_FILTER_SUCCESS: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterDeletes)\r\n                    newState.dsFilterDeletes = {};\r\n                newState.dsFilterDeletes[action.dsView] = { ...newState.dsFilterDeletes[action.dsView], status: action.status, serverStatus: action.serverStatus };\r\n                return newState\r\n            }\r\n        case dsConstants.DELETE_FILTER__FAILURE: \r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsFilterDeletes)\r\n                    newState.dsFilterDeletes = {};\r\n                newState.dsFilterDeletes[action.dsView] = { ...newState.dsFilterDeletes[action.dsView], status: action.status, error: action.message };\r\n                return newState\r\n            }            \r\n        case dsConstants.CLEAR_DELETE_FILTER_TRACKER:\r\n            {\r\n                let newState = {...state};\r\n                delete newState.dsFilterDeletes;\r\n                return newState\r\n            }\r\n \r\n        case dsConstants.CLEAR_DS:\r\n            {\r\n                let newState = {...state};\r\n                delete newState.dsBulkEdits;\r\n                return newState\r\n            }\r\n        case dsConstants.UPLOAD_BULK_XLS_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.uploadStatus = 'uploading';\r\n                newState.dsBulkEdits.fileName = action.fileName\r\n                return newState;\r\n            }\r\n        case dsConstants.UPLOAD_BULK_XLS_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.uploadStatus = 'success';\r\n                newState.dsBulkEdits.fileName = action.fileName;\r\n                newState.dsBulkEdits.sheetInfo = action.sheetInfo;\r\n                return newState;\r\n            }\r\n        case dsConstants.UPLOAD_BULK_XLS_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.uploadStatus = 'fail';\r\n                newState.dsBulkEdits.uploadError = action.message;\r\n                return newState;\r\n            }\r\n        case dsConstants.SET_BULK_SELECTED_SHEET:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.selectedSheet = action.sheetName;\r\n                return newState;\r\n            }\r\n        case dsConstants.BULK_EDIT_REQUEST:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.selectedRange = action.selectedRange;\r\n                return newState;\r\n            }\r\n        case dsConstants.BULK_EDIT_SUCCESS:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.loadStatus = action.loadStatus;\r\n                return newState;\r\n            }\r\n        case dsConstants.BULK_EDIT_FAILURE:\r\n            {\r\n                let newState = {...state};\r\n                if (!newState.dsBulkEdits)\r\n                    newState.dsBulkEdits = {};\r\n                newState.dsBulkEdits.loadStatus = action.loadStatus;\r\n                return newState;\r\n            }\r\n        case dsConstants.CLEAR_LOADSTATUS:\r\n            {\r\n                let newState = {...state};\r\n                delete newState.dsBulkEdits.loadStatus;\r\n                return newState\r\n            }\r\n            \r\n        default:\r\n            return state\r\n    }\r\n}","import QueryParsers from './QueryParsers';\r\n\r\nfunction MySingleAutoCompleter (cell, onRendered, success, cancel, editorParams){\r\n    var self = this,\r\n    cellEl = cell.getElement(),\r\n    initialValue = cell.getValue(),\r\n    vertNav = editorParams.verticalNavigation || \"editor\",\r\n    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\"),\r\n    input = document.createElement(\"input\"),\r\n    listEl = document.createElement(\"div\"),\r\n    allItems = [],\r\n    displayItems = [],\r\n    values = [],\r\n    currentItem = false,\r\n    blurable = true,\r\n    uniqueColumnValues = false;\r\n\r\n    // Jayaram: 3 changes\r\n    // MyAutoCompleter.js\r\n    if (editorParams.conditionalValues) {\r\n        editorParams.values = [];\r\n        let rowData = cell.getRow().getData();\r\n        for (let i = 0; i < editorParams.conditionalExprs.length; i++) {\r\n            // XXX: Add more error checking here\r\n            let exprStr = editorParams.conditionalExprs[i].split(':')[0].trim();\r\n            //console.log(\"exprStr is: \", exprStr);\r\n            let expr = QueryParsers.parseExpr(exprStr);\r\n            //console.log(\"expr is: \", expr);\r\n            if (QueryParsers.evalExpr(expr, rowData)) {\r\n                let values = editorParams.conditionalExprs[i].split(':')[1].trim();\r\n                values = JSON.parse(values);\r\n                //console.log(\"eval true: \", values);\r\n                editorParams.values = values;\r\n                break;\r\n            } else {\r\n                ;//console.log(\"eval false\");\r\n            }\r\n        }\r\n    }\r\n\r\n    //style input\r\n    input.setAttribute(\"type\", \"search\");\r\n\r\n    input.style.padding = \"4px\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n\r\n    if(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n        for (let key in editorParams.elementAttributes){\r\n            if(key.charAt(0) == \"+\"){\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            }else{\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    //style list element\r\n    listEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n    listEl.addEventListener(\"mousedown\", function(e){\r\n        blurable = false;\r\n\r\n        setTimeout(function(){\r\n            blurable = true;\r\n        }, 10);\r\n    });\r\n\r\n\r\n    function genUniqueColumnValues(){\r\n        if(editorParams.values === true){\r\n            uniqueColumnValues = getUniqueColumnValues();\r\n        }else if(typeof editorParams.values === \"string\"){\r\n            uniqueColumnValues = getUniqueColumnValues(editorParams.values);\r\n        }\r\n    }\r\n\r\n    function getUniqueColumnValues(field){\r\n        var output = {},\r\n        data = self.table.getData(),\r\n        column;\r\n\r\n        if(field){\r\n            column = self.table.columnManager.getColumnByField(field);\r\n        }else{\r\n            column = cell.getColumn()._getSelf();\r\n        }\r\n\r\n        if(column){\r\n            data.forEach(function(row){\r\n                var val = column.getFieldValue(row);\r\n\r\n                if(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n                    output[val] = true;\r\n                }\r\n            });\r\n\r\n            if(editorParams.sortValuesList){\r\n                if(editorParams.sortValuesList == \"asc\"){\r\n                    output = Object.keys(output).sort();\r\n                }else{\r\n                    output = Object.keys(output).sort().reverse();\r\n                }\r\n            }else{\r\n                output = Object.keys(output);\r\n            }\r\n        }else{\r\n            console.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\r\n        }\r\n\r\n\r\n        return output;\r\n    }\r\n\r\n    function filterList(term, intialLoad){\r\n        var matches = [],\r\n        values, items, searchEl;\r\n\r\n        //lookup base values list\r\n        if(uniqueColumnValues){\r\n            values = uniqueColumnValues;\r\n        }else{\r\n            values = editorParams.values || [];\r\n        }\r\n\r\n        if(editorParams.searchFunc){\r\n            matches = editorParams.searchFunc(term, values);\r\n\r\n            if(matches instanceof Promise){\r\n\r\n                addNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\r\n\r\n                matches.then((result) => {\r\n                    fillListIfNotEmpty(parseItems(result), intialLoad);\r\n                }).catch((err) => {\r\n                    console.err(\"error in autocomplete search promise:\", err);\r\n                });\r\n\r\n            }else{\r\n                fillListIfNotEmpty(parseItems(matches), intialLoad);\r\n            }\r\n        }else{\r\n            items = parseItems(values);\r\n\r\n            if(term === \"\"){\r\n                if(editorParams.showListOnEmpty){\r\n                    matches = items;\r\n                }\r\n            }else{\r\n                items.forEach(function(item){\r\n                    if(item.value !== null || typeof item.value !== \"undefined\"){\r\n                        if(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n                            matches.push(item);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            fillListIfNotEmpty(matches, intialLoad);\r\n        }\r\n    }\r\n\r\n    function addNotice(notice){\r\n        var searchEl = document.createElement(\"div\");\r\n\r\n        clearList();\r\n\r\n        if(notice !== false){\r\n            searchEl.classList.add(\"tabulator-edit-select-list-notice\");\r\n            searchEl.tabIndex = 0;\r\n\r\n            if(notice instanceof Node){\r\n                searchEl.appendChild(notice);\r\n            }else{\r\n                searchEl.innerHTML = notice;\r\n            }\r\n\r\n            listEl.appendChild(searchEl);\r\n        }\r\n    }\r\n\r\n    function parseItems(inputValues){\r\n        var itemList = [];\r\n\r\n        if(Array.isArray(inputValues)){\r\n            inputValues.forEach(function(value){\r\n\r\n                var item = {};\r\n\r\n                if(typeof value === \"object\"){\r\n                    item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\r\n                    item.value = value.value;\r\n                }else{\r\n                    item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\r\n                    item.value = value;\r\n                }\r\n\r\n                itemList.push(item);\r\n            });\r\n        }else{\r\n            for(var key in inputValues){\r\n                var item = {\r\n                    title:editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\r\n                    value:key,\r\n                };\r\n\r\n                itemList.push(item);\r\n            }\r\n        }\r\n\r\n        return itemList;\r\n    }\r\n\r\n    function clearList(){\r\n        while(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n    }\r\n\r\n    function fillListIfNotEmpty(items, intialLoad){\r\n        if(items.length){\r\n            fillList(items, intialLoad);\r\n        }else{\r\n            if(editorParams.emptyPlaceholder){\r\n                addNotice(editorParams.emptyPlaceholder);\r\n            }\r\n        }\r\n    }\r\n\r\n    function fillList(items, intialLoad){\r\n        var current = false;\r\n\r\n        clearList();\r\n\r\n        displayItems = items;\r\n\r\n        displayItems.forEach(function(item){\r\n            var el = item.element;\r\n\r\n            if(!el){\r\n                el = document.createElement(\"div\");\r\n                el.classList.add(\"tabulator-edit-select-list-item\");\r\n                el.tabIndex = 0;\r\n                el.innerHTML = item.title;\r\n\r\n                el.addEventListener(\"click\", function(e){\r\n                    setCurrentItem(item);\r\n                    chooseItem();\r\n                });\r\n\r\n                el.addEventListener(\"mousedown\", function(e){\r\n                    blurable = false;\r\n\r\n                    setTimeout(function(){\r\n                        blurable = true;\r\n                    }, 10);\r\n                });\r\n\r\n                item.element = el;\r\n\r\n                if(intialLoad && item.value == initialValue){\r\n                    input.value = item.title;\r\n                    item.element.classList.add(\"active\");\r\n                    current = true;\r\n                }\r\n\r\n                if(item === currentItem){\r\n                    item.element.classList.add(\"active\");\r\n                    current = true;\r\n                }\r\n            }\r\n\r\n            listEl.appendChild(el);\r\n        });\r\n\r\n        if(!current){\r\n            setCurrentItem(false);\r\n        }\r\n    }\r\n\r\n    function isExactMatch(term){\r\n        var matches = [],\r\n        values, items, searchEl;\r\n\r\n        //lookup base values list\r\n        if(uniqueColumnValues){\r\n            values = uniqueColumnValues;\r\n        }else{\r\n            values = editorParams.values || [];\r\n        }\r\n\r\n        if(editorParams.searchFunc){\r\n            matches = editorParams.searchFunc(term, values);\r\n            // Not ready for Promises\r\n            if(matches instanceof Promise) {\r\n                return {status: false, match: \"\"};\r\n            }else{\r\n                ;\r\n            }\r\n        }else{\r\n            items = parseItems(values);\r\n\r\n            if(term === \"\"){\r\n                if(editorParams.showListOnEmpty){\r\n                    matches = items;\r\n                }\r\n            }else{\r\n                items.forEach(function(item){\r\n                    if(item.value !== null || typeof item.value !== \"undefined\"){\r\n                        if(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n                            matches.push(item);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if (matches.length === 1) {\r\n            return {status: true, match: matches[0].value}\r\n        } else {\r\n            return {status: false, match: \"\"};\r\n        }\r\n    }\r\n\r\n    function chooseItem(){\r\n        hideList();\r\n        console.log(\"chooseitem single\");\r\n        if(currentItem){\r\n            if(initialValue !== currentItem.value){\r\n                initialValue = currentItem.value;\r\n                input.value = currentItem.title;\r\n                success(currentItem.value);\r\n            }else{\r\n                cancel();\r\n            }\r\n        }else{\r\n            if(editorParams.freetext){\r\n                initialValue = input.value;\r\n                success(input.value);\r\n            }else{\r\n                if(editorParams.allowEmpty && input.value === \"\"){\r\n                    initialValue = input.value;\r\n                    success(input.value);\r\n                } else{\r\n                    let { status, match } = isExactMatch (input.value);\r\n                    if (status) {\r\n                        if (initialValue !== match) {\r\n                            console.log(\"Calling success now... ; single\");\r\n                            success(match);\r\n                        } else  {\r\n                            console.log(\"Calling cancel..; single\");\r\n                            cancel();\r\n                        }\r\n                    } else {\r\n                        console.log(\"Calling cancel now...; single\");\r\n                        cancel();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Jayaram:\r\n\tfunction elOffset(el) {\r\n\t\tvar box = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n\t\t};\r\n\t}\r\n\r\n    function showList(){\r\n        if(!listEl.parentNode){\r\n            while(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n            // Jayaram:\r\n            //var offset = Tabulator.prototype.helpers.elOffset(cellEl);\r\n            var offset = elOffset(cellEl);\r\n\r\n            listEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n            listEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n            listEl.style.left = offset.left + \"px\";\r\n            document.body.appendChild(listEl);\r\n        }\r\n    }\r\n\r\n    function setCurrentItem(item, showInputValue){\r\n        if(currentItem && currentItem.element){\r\n            currentItem.element.classList.remove(\"active\");\r\n        }\r\n\r\n        currentItem = item;\r\n\r\n        if(item && item.element){\r\n            item.element.classList.add(\"active\");\r\n        }\r\n    }\r\n\r\n    function hideList(){\r\n        if(listEl.parentNode){\r\n            listEl.parentNode.removeChild(listEl);\r\n        }\r\n\r\n        removeScrollListener();\r\n    }\r\n\r\n\r\n    function cancelItem(){\r\n        hideList();\r\n        cancel();\r\n    }\r\n\r\n    function removeScrollListener() {\r\n        self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n    }\r\n\r\n    //allow key based navigation\r\n    input.addEventListener(\"keydown\", function(e){\r\n        var index;\r\n\r\n        switch(e.keyCode){\r\n            case 38: //up arrow\r\n            index = displayItems.indexOf(currentItem);\r\n\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if(index > 0){\r\n                    setCurrentItem(displayItems[index - 1]);\r\n                }else{\r\n                    setCurrentItem(false);\r\n                }\r\n            }\r\n            break;\r\n\r\n            case 40: //down arrow\r\n\r\n            index = displayItems.indexOf(currentItem);\r\n\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < displayItems.length - 1)){\r\n\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if(index < displayItems.length - 1){\r\n                    if(index == -1){\r\n                        setCurrentItem(displayItems[0]);\r\n                    }else{\r\n                        setCurrentItem(displayItems[index + 1]);\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n\r\n\r\n            case 37: //left arrow\r\n            case 39: //right arrow\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            // e.preventDefault();\r\n            break;\r\n\r\n            case 13: //enter\r\n            chooseItem();\r\n            break;\r\n\r\n            case 27: //escape\r\n            cancelItem();\r\n            break;\r\n\r\n            case 36: //home\r\n            case 35: //end\r\n            //prevent table navigation while using input element\r\n            e.stopImmediatePropagation();\r\n            break;\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"keyup\", function(e){\r\n\r\n        switch(e.keyCode){\r\n            case 38: //up arrow\r\n            case 37: //left arrow\r\n            case 39: //up arrow\r\n            case 40: //right arrow\r\n            case 13: //enter\r\n            case 27: //escape\r\n            break;\r\n\r\n            default:\r\n            filterList(input.value);\r\n        }\r\n\r\n    });\r\n\r\n    input.addEventListener(\"search\", function(e){\r\n        filterList(input.value);\r\n    });\r\n\r\n    input.addEventListener(\"blur\", function(e){\r\n        if(blurable){\r\n            chooseItem();\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"focus\", function(e){\r\n        var value = initialDisplayValue;\r\n        genUniqueColumnValues();\r\n        showList();\r\n        input.value = value;\r\n        filterList(value, true);\r\n    });\r\n\r\n\r\n    onRendered(function(){\r\n        input.style.height = \"100%\";\r\n        input.focus({preventScroll: true});\r\n    });\r\n\r\n    if(editorParams.mask){\r\n        this.table.modules.edit.maskInput(input, editorParams);\r\n    }\r\n\r\n    setTimeout(() => {\r\n        this.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n    }, 10);\r\n\r\n    genUniqueColumnValues();\r\n    input.value = initialDisplayValue;\r\n    filterList(initialDisplayValue, true);\r\n\r\n    return input;\r\n}\r\n\r\nexport default MySingleAutoCompleter;","function MyCodeMirror(cell, onRendered, success, cancel, editorParams) {\r\n    var self = this,\r\n        cellValue = cell.getValue(),\r\n        vertNav = editorParams.verticalNavigation || \"hybrid\",\r\n        value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\r\n        count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\r\n        input = document.createElement(\"textarea\"),\r\n        scrollHeight = 0;\r\n    var editor;\r\n\r\n    //create and style input\r\n    input.style.display = \"block\";\r\n    input.style.padding = \"2px\";\r\n    input.style.height = \"50%\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n    input.style.whiteSpace = \"pre-wrap\";\r\n    input.style.resize = \"none\";\r\n\r\n    if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\r\n        for (let key in editorParams.elementAttributes) {\r\n            if (key.charAt(0) == \"+\") {\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            } else {\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!value) value = \"\";\r\n    input.value = value;\r\n    /*\r\n    var editor = window.CodeMirror(document.body, {\r\n        lineNumbers: true\r\n      });    */\r\n      /*\r\n    var editor = window.CodeMirror.fromTextArea(input, {\r\n        lineNumbers: true\r\n      });\r\n    */\r\n   onRendered(function () {\r\n        input.focus({\r\n            preventScroll: true\r\n        });\r\n        input.style.height = \"100%\";\r\n        window.CodeMirrorSpellChecker({\r\n            codeMirrorInstance: window.CodeMirror,\r\n        });        \r\n        editor = window.CodeMirror.fromTextArea(input, {\r\n            lineNumbers: true,\r\n            lineWrapping: true,\r\n            mode: \"spell-checker\",\r\n\t        backdrop: \"markdown\",\r\n            highlightFormatting: true\r\n          });\r\n        window.inlineAttachment.editors.codemirror4.attach(editor, {\r\n            uploadUrl: '/uploadAttachments', \r\n            urlText: '<img src=\"{filename}\" alt=\"{filename}\" width=\"100%\" height=\"100%\"/>', fileUrlText: '[{filename}]({filename})',\r\n            allowedTypes: '*',\r\n            extraParams: {\r\n                dsName: editorParams.dsName\r\n            }\r\n        });\r\n\r\n        let initialHeight = cell._cell.element.style.height;\r\n        initialHeight = initialHeight.replace('px', '');\r\n        initialHeight = parseInt(initialHeight);\r\n\r\n        let vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\r\n        if (vh > 0) {\r\n            // Deduct some for browser header. \r\n            vh = vh - 70;\r\n        }\r\n        // Ensure the initialHeight is not more than the view port height. \r\n        // codemirror has an issue if this is the case. \r\n        initialHeight = Math.min(vh, initialHeight);\r\n\r\n        /*let h;\r\n        if (editor.getDoc().lineCount() === 1)\r\n            h = 25;\r\n        else \r\n            h = (editor.getDoc().lineCount() + 1) * 18;\r\n        */\r\n        cell._cell.setHeightSpecial(initialHeight);\r\n        cell.getRow().normalizeHeight();\r\n        editor.scrollIntoView({line: editor.getDoc().lineCount() - 1, ch: 0}, 50)\r\n        editor.getDoc().setCursor({line: editor.getDoc().lineCount() - 1, ch:0});\r\n        editor.refresh();\r\n        editor.on(\"keyup\", function (cm, e) {\r\n            if (true) {\r\n                //console.log(\"current input height:\", input.style.height);\r\n                //console.log(\"cell element: \", cell._cell.element);\r\n                //console.log(\"current input scroll height: \", input.scrollHeight);\r\n                //console.log(\"current input offsetheight: \", input.offsetHeight);\r\n                let h = cell._cell.element.style.height;\r\n                //console.log('h:', h);\r\n                //h = h.replace('px', '');\r\n                //h = parseInt(h) + 25;\r\n                if (editor.getDoc().lineCount() === 1)\r\n                    h = 25;\r\n                else \r\n                    h = (editor.getDoc().lineCount() + 1) * 18;\r\n                if (h > vh) h = vh;\r\n                cell._cell.setHeightSpecial(Math.max(h, initialHeight));\r\n                cell.getRow().normalizeHeight();\r\n                // refresh() was jarring the view sometimes. The scrollIntoView\r\n                // seems to be much more smoother. \r\n                editor.scrollIntoView();\r\n                //editor.refresh();\r\n            }\r\n            return;\r\n        });\r\n        editor.on(\"keydown\", function (cm, e) {\r\n            let pos = cm.getCursor();\r\n            switch (e.keyCode) {\r\n                case 13:\r\n                    if (e.ctrlKey) {\r\n                        onChange(e);\r\n                    }\r\n                    break;\r\n                case 27:\r\n                    cancel();\r\n                    break;    \r\n                case 38: //up arrow\r\n                    if (vertNav == \"editor\" || (vertNav == \"hybrid\" && (pos.line !== 0 || pos.ch !== 0) )) {\r\n                        e.stopImmediatePropagation();\r\n                        e.stopPropagation();\r\n                    }\r\n                    break;\r\n                case 40: //down arrow\r\n                    if (vertNav == \"editor\" || (vertNav == \"hybrid\" && pos.outside !== 1)) {\r\n                        e.stopImmediatePropagation();\r\n                        e.stopPropagation();\r\n                    }\r\n                    break;\r\n                default:\r\n                    e.stopImmediatePropagation();\r\n                    e.stopPropagation();        \r\n                    break;    \r\n            }\r\n        });\r\n        editor.on(\"blur\", function (e) {\r\n            if (!cell.mouseDownDate) cell.mouseDownDate = 0;\r\n            //console.log(\"Blur event. Date, mousedowndate: \", Date.now(), cell.mouseDownDate);\r\n            //console.log(\"Blur event diff: \", Date.now() - cell.mouseDownDate);\r\n            if (Date.now() - cell.mouseDownDate > 50) {\r\n                onChange(e);\r\n            }\r\n        });\r\n        /*\r\n        window.addEventListener(\"mousedown\", onChange); */\r\n\r\n        cell.getElement().addEventListener(\"mousedown\", function (e) {\r\n            cell.mouseDownDate = Date.now();\r\n            //console.log(\"mousedown element...: \", cell.mouseDownDate);\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n        }) /*\r\n        editor.on(\"mousedown\", function (cm, e) {\r\n            cell.mouseDownDate = Date.now();\r\n            //console.log(\"mousedown editor: \", cell.mouseDownDate);\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n        }) */\r\n        \r\n    });\r\n\r\n    function onChange(e) {\r\n        if (!editor) return;\r\n        let curValue = editor.getValue();\r\n        if (((cellValue === null || typeof cellValue === \"undefined\") && curValue !== \"\") || curValue !== cellValue) {\r\n            if (success(curValue)) {\r\n                cellValue = curValue; //persist value if successfully validated incase editor is used as header filter\r\n            }\r\n            /*\r\n            setTimeout(function () {\r\n                cell.getRow().normalizeHeight();\r\n            }, 300)\r\n            */\r\n        } else {\r\n            cancel();\r\n        }\r\n    }\r\n\r\n    //submit new value on blur or change\r\n    //input.addEventListener(\"change\", onChange);\r\n    //input.addEventListener(\"blur\", onChange);\r\n    //window.addEventListener(\"mousedown\", onChange);\r\n    //input.addEventListener(\"mousedown\", function (e) {\r\n    //    e.stopPropagation();\r\n    //})\r\n\r\n    /*\r\n    input.addEventListener(\"keyup\", function () {\r\n        console.log(\"keyup...\");\r\n        // Jayaram: 8/23 change, only set height if it is different in the\r\n        // below block. \r\n        //input.style.height = \"\";\r\n\r\n        var heightNow = input.scrollHeight;\r\n\r\n        input.style.height = heightNow + \"px\";\r\n\r\n        if (!scrollHeight) scrollHeight = heightNow;\r\n        if (heightNow != scrollHeight) {\r\n            console.log(\"ScrollHeight, heightNow\", scrollHeight, heightNow);\r\n            input.style.height = heightNow + \"px\";\r\n            scrollHeight = heightNow;\r\n            cell.getRow().normalizeHeight();\r\n        }\r\n    });\r\n\r\n\r\n    input.addEventListener(\"keydown\", function (e) {\r\n        console.log(\"Keydown here\")\r\n        switch (e.keyCode) {\r\n            case 27:\r\n                cancel();\r\n                break;\r\n\r\n            // Jayaram: Copied from 'textarea' handling within the source. \r\n            // Added the below keycodes (Home/End: 35/36) to not leave the editor. \r\n            case 33:\r\n            case 34:\r\n                //e.stopImmediatePropagation();\r\n                //e.stopPropagation();\r\n                e.preventDefault();\r\n                const cursorPosition = e.key === 'PageUp' ? 0 : e.target.textLength;\r\n                e.target.setSelectionRange(cursorPosition, cursorPosition);\r\n                // Intentional that break is commented here. To make sure you don't leave\r\n                // editing when you press pgup/pgdown. \r\n                //break;\r\n            case 35:\r\n            case 36:\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                break;\r\n\r\n            case 38: //up arrow\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n                break;\r\n\r\n            case 40: //down arrow\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n    }); */\r\n\r\n    if (editorParams.mask) {\r\n        this.table.modules.edit.maskInput(input, editorParams);\r\n    }\r\n\r\n    return input;\r\n}\r\n\r\nexport default MyCodeMirror;","const FileSaver = require('file-saver');\r\n\r\nexport const dsService = {\r\n    loadColumnsForUserView,\r\n    editSingleAttribute,\r\n    insertOneDoc,\r\n    downloadXlsx,\r\n    getDsList, \r\n    deleteDs,\r\n    deleteOneDoc,\r\n    deleteManyDocs,\r\n    setViewDefinitions,\r\n    refreshJira,\r\n    addFilter,\r\n    editFilter,\r\n    deleteFilter,\r\n    doBulkEditRequest\r\n};\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\n\r\nasync function loadColumnsForUserView (dsName, dsView, dsUser) {\r\n    try {\r\n        console.log(\"Starting API call: \", dsName, dsView, dsUser);\r\n        let response = await fetch(`${config.apiUrl}/ds/view/columns/${dsName}/${dsView}/${dsUser}`, {\r\n            method: \"get\",\r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('loadColumnsForUserView: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function editSingleAttribute (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/editSingleAttribute`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('editSingleAttribute: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function insertOneDoc (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/insertOneDoc`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('insertOneDoc: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function downloadXlsx (dsName, dsView, dsUser) {\r\n    try {\r\n        console.log(\"Starting API call: \", dsName, dsView, dsUser);\r\n        let response = await fetch(`${config.apiUrl}/ds/downloadXlsx/${dsName}/${dsView}/${dsUser}`, {\r\n            method: \"get\",\r\n        });\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            let json = await response.json();\r\n            if (json.output !== \"\") {\r\n                let fileName = `export_${dsName}_${dsView}_${dsUser}.xlsx`;\r\n                var fc = new Buffer(json.output, 'base64');\r\n                let blob = new Blob([fc], { type: \"binary/octet-stream\" });\r\n                FileSaver.saveAs(blob, fileName);\r\n            } else {\r\n                console.log('downloadXlsx: file is empty');\r\n                throw new Error(\"downloadXlsx: file is empty\");\r\n            }\r\n        }\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function getDsList (dsUser) {\r\n    try {\r\n        console.log(\"Starting getDsList API call: \", dsUser);\r\n        let response = await fetch(`${config.apiUrl}/ds/dsList/${dsUser}`, {\r\n            method: \"get\",\r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('getDsList: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function deleteDs (body) {\r\n    try {\r\n        console.log(\"Starting deleteDs API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/deleteDs`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('deleteDs: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function deleteOneDoc (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/deleteOneDoc`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('deleteOneDoc: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function deleteManyDocs (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/deleteManyDocs`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('deleteManyDocs: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function setViewDefinitions (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/setViewDefinitions`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('setViewDefinition: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function refreshJira (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/refreshJira`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('refreshJira: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function addFilter (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/addFilter`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('addFilter: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function editFilter (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/editFilter`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('editFilter: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\nasync function deleteFilter (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/view/deleteFilter`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished API\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('deleteFilter: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\nasync function doBulkEditRequest (body) {\r\n    try {\r\n        console.log(\"Starting API call: \", body);\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(`${config.apiUrl}/ds/doBulkEdit`, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        console.log(\"Finished fetch\")\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('doBulkEditRequest: ', responseJson);\r\n        }\r\n        return responseJson;\r\n    } catch(e) {\r\n        console.log(e);\r\n    }\r\n}\r\n","import { dsConstants, allDsConstants } from '../constants';\r\nimport { dsService, uploadService } from '../services';\r\n\r\nexport const dsActions = {\r\n    loadColumnsForUserView,\r\n    editSingleAttribute,\r\n    insertOneDoc,\r\n    downloadXlsx, \r\n    getDsList,\r\n    deleteDs,\r\n    deleteOneDoc,\r\n    deleteManyDocs,\r\n    setViewDefinitions,\r\n    refreshJira,\r\n    addFilter,\r\n    editFilter,\r\n    deleteFilter, \r\n\r\n    clearBulkEditStore,\r\n    uploadBulkEditXlsFile,\r\n    setSelectedSheet,\r\n    loadHdrsFromRange,\r\n    doBulkEditRequest,\r\n}\r\n\r\n\r\nfunction loadColumnsForUserView (dsName, dsView, dsUser) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson = await dsService.loadColumnsForUserView(dsName, dsView, dsUser);\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"loadColumnsForUserView failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"loadColumnsForUserView failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.LOAD_COLUMNS_REQUEST, dsName, dsView, dsUser } }\r\n    function success(columnsAndKeys) { return { type: dsConstants.LOAD_COLUMNS_SUCCESS, dsName, dsView, dsUser, columnsAndKeys } }\r\n    function failure(message) { return { type: dsConstants.LOAD_COLUMNS_FAILURE, dsName, dsView, dsUser, message } }\r\n}\r\n\r\nfunction editSingleAttribute (dsName, dsView, dsUser, _id, column, oldVal, newVal, selectorObj, editObj) {\r\n    return async dispatch => {\r\n        let editTracker = { _id, field: column, oldVal, newVal }\r\n        try {\r\n            //let selectorObj = {};\r\n            //selectorObj[\"_id\"] = _id;\r\n            //selectorObj[column] = oldVal;\r\n            //let editObj = {};\r\n            //editObj[column] = newVal;\r\n            dispatch(request(_id, editTracker));\r\n            let responseJson = await dsService.editSingleAttribute({dsName, dsView, dsUser, column, selectorObj, editObj});\r\n            if (responseJson)\r\n                dispatch(success(_id, editTracker, responseJson));\r\n            else \r\n                dispatch(failure(_id, editTracker, \"loadColumnsForUserView failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(_id, editTracker, \"loadColumnsForUserView failure\"));\r\n        }\r\n    }\r\n    function request(_id, editTracker) { return { type: dsConstants.EDIT_SINGLE_REQUEST, dsName, dsView, dsUser, _id, editTracker } }\r\n    function success(_id, editTracker, serverStatus) { return { type: dsConstants.EDIT_SINGLE_SUCCESS, dsName, dsView, dsUser, _id, editTracker, serverStatus } }\r\n    function failure(_id, editTracker, message) { return { type: dsConstants.EDIT_SINGLE_FAILURE, dsName, dsView, dsUser, _id, editTracker, message } }\r\n}\r\n\r\nfunction insertOneDoc (dsName, dsView, dsUser, selectorObj, doc, uiRow) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson = await dsService.insertOneDoc({dsName, dsView, dsUser, selectorObj, doc});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"insertOneDoc failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"insertOneDoc failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.SET_ROW_ADD_TRACKER, dsName, dsView, dsUser, status: 'inserting', uiRow } }\r\n    function success(serverStatus) { return { type: dsConstants.ROW_ADD_SUCCESS, dsName, dsView, dsUser, status: 'success', serverStatus } }\r\n    function failure(message) { return { type: dsConstants.ROW_ADD_FAILURE, dsName, dsView, dsUser, status: 'fail', message } }\r\n}\r\n\r\n\r\nfunction downloadXlsx (dsName, dsView, dsUser) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            await dsService.downloadXlsx(dsName, dsView, dsUser);\r\n            dispatch(success());\r\n        } catch (error) {\r\n            dispatch(failure(\"downloadXlsx failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.DOWNLOAD_XLSX_REQUEST, dsName, dsView, dsUser } }\r\n    function success() { return { type: dsConstants.DOWNLOAD_XLSX_SUCCESS, dsName, dsView, dsUser } }\r\n    function failure(message) { return { type: dsConstants.DOWNLOAD_XLSX_FAILURE, dsName, dsView, dsUser, message } }\r\n}\r\n\r\nfunction getDsList ( dsUser ) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let dsList = await dsService.getDsList(dsUser);\r\n            dispatch(success(dsList));\r\n        } catch (error) {\r\n            dispatch(failure(\"getDsList failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: allDsConstants.LOAD_DSLIST_REQUEST, dsUser } }\r\n    function success(dsList) { return { type: allDsConstants.LOAD_DSLIST_SUCCESS, dsList } }\r\n    function failure(message) { return { type: allDsConstants.LOAD_DSLIST_FAILURE, message } }\r\n}\r\n\r\nfunction deleteDs ( dsName, dsUser ) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let deleteStatus = await dsService.deleteDs({ dsName, dsUser });\r\n            dispatch(success(deleteStatus));\r\n        } catch (error) {\r\n            dispatch(failure(\"deleteDs failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: allDsConstants.DELETE_DS_REQUEST, dsName } }\r\n    function success(deleteStatus) { return { type: allDsConstants.DELETE_DS_SUCCESS, dsName, deleteStatus } }\r\n    function failure(message) { return { type: allDsConstants.LOAD_DSLIST_FAILURE, dsName, message } }\r\n}\r\n\r\nfunction deleteOneDoc (dsName, dsView, dsUser, _id, row) {\r\n    return async dispatch => {\r\n        let deleteTracker = { _id, row }\r\n        try {\r\n            let selectorObj = {};\r\n            selectorObj[\"_id\"] = _id;\r\n            dispatch(request(_id, deleteTracker));\r\n            let responseJson = await dsService.deleteOneDoc({dsName, dsView, dsUser, selectorObj});\r\n            if (responseJson)\r\n                dispatch(success(_id, deleteTracker, responseJson));\r\n            else \r\n                dispatch(failure(_id, deleteTracker, \"deleteOneDoc failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(_id, deleteTracker, \"deleteOneDoc failure\"));\r\n        }\r\n    }\r\n    function request(_id, deleteTracker) { return { type: dsConstants.DELETE_SINGLE_REQUEST, dsName, dsView, dsUser, _id, deleteTracker } }\r\n    function success(_id, deleteTracker, serverStatus) { return { type: dsConstants.DELETE_SINGLE_SUCCESS, dsName, dsView, dsUser, _id, deleteTracker, serverStatus } }\r\n    function failure(_id, deleteTracker, message) { return { type: dsConstants.DELETE_SINGLE_FAILURE, dsName, dsView, dsUser, _id, deleteTracker, message } }\r\n}\r\n\r\nfunction deleteManyDocs (dsName, dsView, dsUser, objects, rows) {\r\n    return async dispatch => {\r\n        let deleteTracker = { objects, rows }\r\n        try {\r\n            dispatch(request(deleteTracker));\r\n            let responseJson = await dsService.deleteManyDocs({dsName, dsView, dsUser, objects});\r\n            if (responseJson)\r\n                dispatch(success(deleteTracker, responseJson));\r\n            else \r\n                dispatch(failure(deleteTracker, \"deleteManyDocs failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(deleteTracker, \"deleteManyDocs failure\"));\r\n        }\r\n    }\r\n    function request(deleteTracker) { return { type: dsConstants.DELETE_MANY_REQUEST, dsName, dsView, dsUser, deleteTracker } }\r\n    function success(deleteTracker, serverStatus) { return { type: dsConstants.DELETE_MANY_SUCCESS, dsName, dsView, dsUser, deleteTracker, serverStatus } }\r\n    function failure(deleteTracker, message) { return { type: dsConstants.DELETE_MANY_FAILURE, dsName, dsView, dsUser, deleteTracker, message } }\r\n}\r\n\r\n\r\nfunction setViewDefinitions (dsName, dsView, dsUser, viewDefs, jiraConfig, dsDescription, otherTableAttrs, aclConfig) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson;\r\n            if (jiraConfig)\r\n                responseJson = await dsService.setViewDefinitions({dsName, dsView, dsUser, viewDefs, jiraConfig, dsDescription, otherTableAttrs, aclConfig});\r\n            else \r\n                responseJson = await dsService.setViewDefinitions({dsName, dsView, dsUser, viewDefs, dsDescription, otherTableAttrs, aclConfig});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"setViewDefinitions failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"setViewDefinitions failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.SET_VIEW_DEFS_REQUEST, dsName, dsView, dsUser } }\r\n    function success(serverStatus) { return { type: dsConstants.SET_VIEW_DEFS_SUCCESS, dsName, dsView, dsUser, serverStatus } }\r\n    function failure(message) { return { type: dsConstants.SET_VIEW_DEFS_FAILURE, dsName, dsView, dsUser, message } }\r\n}\r\n\r\n\r\nfunction refreshJira (dsName, dsView, dsUser) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson = await dsService.refreshJira({dsName, dsView, dsUser});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"Jira refresh failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Jira refresh failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.JIRA_REFRESH_REQUEST, dsName, dsView, dsUser } }\r\n    function success(serverStatus) { return { type: dsConstants.JIRA_REFRESH_SUCCESS, dsName, dsView, dsUser, serverStatus } }\r\n    function failure(message) { return { type: dsConstants.JIRA_REFRESH_FAILURE, dsName, dsView, dsUser, message } }\r\n}\r\n\r\n\r\nfunction addFilter (dsName, dsView, dsUser, filter) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson = await dsService.addFilter({dsName, dsView, dsUser, filter});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"addFilter failure\"));\r\n        } catch (error) {\r\n            console.log(\"Error:\", error);\r\n            dispatch(failure(\"addFilter failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.ADD_FILTER_REQUEST, dsName, dsView, dsUser, status: 'inserting', filter } }\r\n    function success(serverStatus) { return { type: dsConstants.ADD_FILTER_SUCCESS, dsName, dsView, dsUser, status: 'success', serverStatus } }\r\n    function failure(message) { return { type: dsConstants.ADD_FILTER__FAILURE, dsName, dsView, dsUser, status: 'fail', message } }\r\n}\r\n\r\nfunction editFilter (dsName, dsView, dsUser, filter) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson = await dsService.editFilter({dsName, dsView, dsUser, filter});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"editFilter failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"editFilter failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.EDIT_FILTER_REQUEST, dsName, dsView, dsUser, status: 'editing', filter } }\r\n    function success(serverStatus) { return { type: dsConstants.EDIT_FILTER_SUCCESS, dsName, dsView, dsUser, status: 'success', serverStatus } }\r\n    function failure(message) { return { type: dsConstants.EDIT_FILTER__FAILURE, dsName, dsView, dsUser, status: 'fail', message } }\r\n}\r\n\r\nfunction deleteFilter (dsName, dsView, dsUser, filter) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request());\r\n            let responseJson = await dsService.deleteFilter({dsName, dsView, dsUser, filter});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"deleteFilter failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"deleteFilter failure\"));\r\n        }\r\n    }\r\n    function request() { return { type: dsConstants.DELETE_FILTER_REQUEST, dsName, dsView, dsUser, status: 'deleting', filter } }\r\n    function success(serverStatus) { return { type: dsConstants.DELETE_FILTER_SUCCESS, dsName, dsView, dsUser, status: 'success', serverStatus } }\r\n    function failure(message) { return { type: dsConstants.DELETE_FILTER__FAILURE, dsName, dsView, dsUser, status: 'fail', message } }\r\n}\r\n\r\n// For bulk-edit operations\r\n\r\nfunction clearBulkEditStore () {\r\n    return async dispatch => {\r\n        dispatch(clear());\r\n    };\r\n\r\n    function clear() { return { type: dsConstants.CLEAR_DS } }\r\n}\r\n\r\nfunction uploadBulkEditXlsFile (fileName, formData) {\r\n    return async dispatch => {\r\n        dispatch(request(fileName));\r\n        try {\r\n            let responseJson = await uploadService.fileUpload(formData);\r\n            if (responseJson)\r\n                dispatch(success(fileName, responseJson));\r\n            else \r\n                dispatch(failure(\"Upload failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Uploading xls file failed\"));\r\n        }\r\n    };\r\n\r\n    function request(fileName) { return { type: dsConstants.UPLOAD_BULK_XLS_REQUEST, fileName } }\r\n    function success(fileName, sheetInfo) { return { type: dsConstants.UPLOAD_BULK_XLS_SUCCESS, fileName, sheetInfo } }\r\n    function failure(message) { return { type: dsConstants.UPLOAD_BULK_XLS_FAILURE, message } }\r\n}\r\n\r\nfunction setSelectedSheet (sheetName) {\r\n    return async dispatch => {\r\n        dispatch (setSheet(sheetName));\r\n    }\r\n    function setSheet (sheetName) { return { type: dsConstants.SET_BULK_SELECTED_SHEET, sheetName } }\r\n}\r\n\r\nfunction loadHdrsFromRange (fileName, sheetName, selectedRange) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(selectedRange));\r\n            let responseJson = await uploadService.loadHdrsFromRange({fileName, sheetName, selectedRange});\r\n            if (responseJson)\r\n                dispatch(success(fileName, sheetName, responseJson));\r\n            else \r\n                dispatch(failure(\"Load Data from Range failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Load Data from Range failure\"));\r\n        }\r\n    }\r\n    function request(selectedRange) { return { type: dsConstants.LOAD_BULK_FROM_RANGE_REQUEST, selectedRange } }\r\n    function success(fileName, sheetName, loadStatus) { return { type: dsConstants.LOAD_BULK_FROM_RANGE_SUCCESS, fileName, sheetName, loadStatus } }\r\n    function failure(message) { return { type: dsConstants.LOAD_BULK_FROM_RANGE_FAILURE, message } }\r\n}\r\n\r\n\r\nfunction doBulkEditRequest (dsName, fileName, sheetName, selectedRange, setRowsFrmSheet, setColsFrmSheet, doIt) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(selectedRange));\r\n            let responseJson = await dsService.doBulkEditRequest({dsName, fileName, sheetName, selectedRange, setRowsFrmSheet, setColsFrmSheet, doIt});\r\n            if (responseJson)\r\n                dispatch(success(fileName, sheetName, responseJson));\r\n            else \r\n                dispatch(failure(\"validate BulkEdit request failed\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Validate BulkEdit request failure\"));\r\n        }\r\n    }\r\n    function request(selectedRange) { return { type: dsConstants.BULK_EDIT_REQUEST, selectedRange } }\r\n    function success(fileName, sheetName, loadStatus) { return { type: dsConstants.BULK_EDIT_SUCCESS, fileName, sheetName, loadStatus } }\r\n    function failure(message) { return { type: dsConstants.BULK_EDIT_FAILURE, message } }\r\n}\r\n","import { uploadService } from '../../services';\r\n\r\n// Constants section\r\n\r\nexport const newDsConstants = {\r\n    CLEAR_DS: 'CLEAR_DS',\r\n    UPLOAD_XLS_REQUEST: 'UPLOAD_XLS_REQUEST', \r\n    UPLOAD_XLS_SUCCESS: 'UPLOAD_XLS_SUCCESS',\r\n    UPLOAD_XLS_FAILURE: 'UPLOAD_XLS_FAILURE',\r\n\r\n    UPLOAD_CSV_REQUEST: 'UPLOAD_CSV_REQUEST', \r\n    UPLOAD_CSV_SUCCESS: 'UPLOAD_CSV_SUCCESS',\r\n    UPLOAD_CSV_FAILURE: 'UPLOAD_CSV_FAILURE',\r\n\r\n    SET_SELECTED_SHEET: 'SET_SELECTED_SHEET',\r\n    SET_SELECTED_KEYS: 'SET_SELECTED_KEYS', \r\n    FIND_HDRS_INXLS_REQUEST: 'FIND_HDRS_INXLS_REQUEST',\r\n    FIND_HDRS_INXLS_SUCCESS: 'FIND_HDRS_INXLS_SUCCESS',\r\n    FIND_HDRS_INXLS_FAILURE: 'FIND_HDRS_INXLS_FAILURE',\r\n\r\n    LOAD_FROM_RANGE_REQUEST: 'LOAD_FROM_RANGE_REQUEST',\r\n    LOAD_FROM_RANGE_SUCCESS: 'LOAD_FROM_RANGE_SUCCESS',\r\n    LOAD_FROM_RANGE_FAILURE: 'LOAD_FROM_RANGE_FAILURE',\r\n\r\n    CREATE_DS_REQUEST: 'CREATE_DS_REQUEST',\r\n    CREATE_DS_SUCCESS: 'CREATE_DS_SUCCESS',\r\n    CREATE_DS_FAILURE: 'CREATE_DS_FAILURE'\r\n};\r\n\r\n\r\n// Reducer section\r\n\r\nconst initialState = {};\r\n\r\nexport function newDs(state = initialState, action) {\r\n  switch (action.type) {\r\n    case newDsConstants.CLEAR_DS:\r\n        return { };\r\n    case newDsConstants.UPLOAD_XLS_REQUEST:\r\n    case newDsConstants.UPLOAD_CSV_REQUEST:\r\n        return {\r\n            uploadStatus: 'uploading',\r\n            fileName: action.fileName\r\n        };\r\n    case newDsConstants.UPLOAD_XLS_SUCCESS:\r\n        return {\r\n            uploadStatus: 'success',\r\n            fileName: action.fileName,\r\n            sheetInfo: action.sheetInfo\r\n        };\r\n    case newDsConstants.UPLOAD_CSV_SUCCESS:\r\n        return {\r\n            uploadStatus: 'success',\r\n            fileName: action.fileName,\r\n            hdrs: action.hdrs\r\n        };\r\n        \r\n    case newDsConstants.UPLOAD_XLS_FAILURE:\r\n    case newDsConstants.UPLOAD_CSV_FAILURE:\r\n        return {\r\n            uploadStatus: 'fail',\r\n            uploadError: action.message\r\n        };\r\n    case newDsConstants.SET_SELECTED_SHEET:\r\n        return {\r\n            ...state,\r\n            selectedSheet: action.sheetName\r\n        }\r\n    case newDsConstants.LOAD_FROM_RANGE_REQUEST:\r\n        return {\r\n            ...state,\r\n            selectedRange: action.selectedRange\r\n        }\r\n    case newDsConstants.LOAD_FROM_RANGE_SUCCESS:\r\n        return {\r\n            ...state,\r\n            loadStatus: action.loadStatus\r\n        }\r\n    case newDsConstants.LOAD_FROM_RANGE_FAILURE:\r\n        return {\r\n            ...state,\r\n            loadStatus: action.loadStatus,\r\n        }\r\n    case newDsConstants.SET_SELECTED_KEYS:\r\n        return {\r\n            ...state,\r\n            selectedKeys: action.selectedKeys\r\n        }\r\n    case newDsConstants.CREATE_DS_REQUEST:\r\n        return {\r\n            ...state,\r\n            dsName: action.dsName\r\n        }\r\n    case newDsConstants.CREATE_DS_SUCCESS:\r\n        return {\r\n            ...state,\r\n            createStatus: action.createStatus\r\n        }\r\n    case newDsConstants.CREATE_DS_FAILURE:\r\n        return {\r\n            ...state,\r\n            createStatus: { status: 'fail', error: action.message }\r\n        }\r\n    \r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\n\r\n// Actions section \r\n\r\nexport const newDsActions = {\r\n    clearReduxStore,\r\n    uploadXlsFile,\r\n    setSelectedSheet,\r\n    findHeadersInSheet,\r\n    loadHdrsFromRange,\r\n    setSelectedKeys,\r\n    createDs,\r\n    uploadCsvFile,\r\n    createDsViaCsv,\r\n    createDsFromDs\r\n}\r\n\r\nfunction clearReduxStore () {\r\n    return async dispatch => {\r\n        dispatch(clear());\r\n    };\r\n\r\n    function clear() { return { type: newDsConstants.CLEAR_DS } }\r\n}\r\n\r\nfunction uploadXlsFile (fileName, formData) {\r\n    return async dispatch => {\r\n        dispatch(request(fileName));\r\n        try {\r\n            let responseJson = await uploadService.fileUpload(formData);\r\n            if (responseJson)\r\n                dispatch(success(fileName, responseJson));\r\n            else \r\n                dispatch(failure(\"Upload failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Uploading xls file failed\"));\r\n        }\r\n    };\r\n\r\n    function request(fileName) { return { type: newDsConstants.UPLOAD_XLS_REQUEST, fileName } }\r\n    function success(fileName, sheetInfo) { return { type: newDsConstants.UPLOAD_XLS_SUCCESS, fileName, sheetInfo } }\r\n    function failure(message) { return { type: newDsConstants.UPLOAD_XLS_FAILURE, message } }\r\n}\r\n\r\nfunction setSelectedSheet (sheetName) {\r\n    return async dispatch => {\r\n        dispatch (setSheet(sheetName));\r\n    }\r\n    function setSheet (sheetName) { return { type: newDsConstants.SET_SELECTED_SHEET, sheetName } }\r\n}\r\n\r\n// Not used currently. \r\nfunction findHeadersInSheet (fileName, sheetName) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(fileName, sheetName));\r\n            let responseJson = await uploadService.findHeadersInSheet({fileName, sheetName});\r\n            if (responseJson)\r\n                dispatch(success(fileName, sheetName, responseJson));\r\n            else \r\n                dispatch(failure(\"Upload failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Finding Hdrs failed failed\"));\r\n        }\r\n    }\r\n    function request() { return { type: newDsConstants.FIND_HDRS_INXLS_REQUEST } }\r\n    function success(fileName, sheetName, hdrsInSheet) { return { type: newDsConstants.FIND_HDRS_INXLS_SUCCESS, fileName, sheetName, hdrsInSheet } }\r\n    function failure(message) { return { type: newDsConstants.FIND_HDRS_INXLS_FAILURE, message } }\r\n}\r\n\r\nfunction loadHdrsFromRange (fileName, sheetName, selectedRange) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(selectedRange));\r\n            let responseJson = await uploadService.loadHdrsFromRange({fileName, sheetName, selectedRange});\r\n            if (responseJson)\r\n                dispatch(success(fileName, sheetName, responseJson));\r\n            else \r\n                dispatch(failure(\"Load Data from Range failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Load Data from Range failure\"));\r\n        }\r\n    }\r\n    function request(selectedRange) { return { type: newDsConstants.LOAD_FROM_RANGE_REQUEST, selectedRange } }\r\n    function success(fileName, sheetName, loadStatus) { return { type: newDsConstants.LOAD_FROM_RANGE_SUCCESS, fileName, sheetName, loadStatus } }\r\n    function failure(message) { return { type: newDsConstants.LOAD_FROM_RANGE_FAILURE, message } }\r\n}\r\n\r\nfunction setSelectedKeys (selectedKeys) {\r\n    return async dispatch => {\r\n        dispatch (setKeys(selectedKeys));\r\n    }\r\n    function setKeys (selectedKeys) { return { type: newDsConstants.SET_SELECTED_KEYS, selectedKeys } }\r\n}\r\n\r\nfunction createDs (fileName, sheetName, selectedRange, selectedKeys, dsName, dsUser) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(dsName));\r\n            let responseJson = await uploadService.createDs({fileName, sheetName, selectedRange, selectedKeys, dsName, dsUser});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"Create Ds failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Create Ds exception\"));\r\n        }\r\n    }\r\n    function request(dsName) { return { type: newDsConstants.CREATE_DS_REQUEST, dsName } }\r\n    function success(createStatus) { return { type: newDsConstants.CREATE_DS_SUCCESS, fileName, sheetName, selectedRange, selectedKeys, dsName, createStatus } }\r\n    function failure(message) { return { type: newDsConstants.CREATE_DS_FAILURE, message } }\r\n}\r\n\r\n\r\n\r\nfunction uploadCsvFile (fileName, formData) {\r\n    return async dispatch => {\r\n        dispatch(request(fileName));\r\n        try {\r\n            let responseJson = await uploadService.csvFileUpload(formData);\r\n            if (responseJson)\r\n                dispatch(success(fileName, responseJson));\r\n            else \r\n                dispatch(failure(\"Upload failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Uploading csv file failed\"));\r\n        }\r\n    };\r\n\r\n    function request(fileName) { return { type: newDsConstants.UPLOAD_CSV_REQUEST, fileName } }\r\n    function success(fileName, hdrs) { return { type: newDsConstants.UPLOAD_CSV_SUCCESS, fileName, hdrs } }\r\n    function failure(message) { return { type: newDsConstants.UPLOAD_CSV_FAILURE, message } }\r\n}\r\n\r\nfunction createDsViaCsv (fileName, selectedKeys, dsName, dsUser) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(dsName));\r\n            let responseJson = await uploadService.createDsViaCsv({fileName, selectedKeys, dsName, dsUser});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"Create Ds failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Create Ds exception\"));\r\n        }\r\n    }\r\n    function request(dsName) { return { type: newDsConstants.CREATE_DS_REQUEST, dsName } }\r\n    function success(createStatus) { return { type: newDsConstants.CREATE_DS_SUCCESS, fileName, selectedKeys, dsName, createStatus } }\r\n    function failure(message) { return { type: newDsConstants.CREATE_DS_FAILURE, message } }\r\n}\r\n\r\n\r\nfunction createDsFromDs (fromDsName, toDsName, dsUser, retainData) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch(request(toDsName));\r\n            let responseJson = await uploadService.createDsFromDs({fromDsName, toDsName, dsUser, retainData});\r\n            if (responseJson)\r\n                dispatch(success(responseJson));\r\n            else \r\n                dispatch(failure(\"Create DsFromDs failure\"));\r\n        } catch (error) {\r\n            dispatch(failure(\"Create DsFromDs exception\"));\r\n        }\r\n    }\r\n    function request(dsName) { return { type: newDsConstants.CREATE_DS_REQUEST, dsName } }\r\n    function success(createStatus) { return { type: newDsConstants.CREATE_DS_SUCCESS, fromDsName, toDsName, createStatus } }\r\n    function failure(message) { return { type: newDsConstants.CREATE_DS_FAILURE, message } }\r\n}\r\n","import React, { Component, ReactDOM } from 'react'\r\nimport { Route } from 'react-router-dom'\r\nimport { Row, Col, Button, Form } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport { dsConstants } from '../../constants';\r\nimport { Link } from 'react-router-dom'\r\n//import 'react-tabulator/lib/styles.css'; // required styles\r\n//import 'react-tabulator/lib/css/tabulator.css'; // theme\r\n//import { ReactTabulator } from 'react-tabulator';\r\nimport MyTabulator from './MyTabulator';\r\nimport MyTextArea from './MyTextArea';\r\nimport MyCodeMirror from './MyCodeMirror';\r\nimport DateEditor from \"react-tabulator/lib/editors/DateEditor\";\r\nimport Select from 'react-select';\r\n//import 'highlight.js/styles/vs.css'\r\n//import 'highlight.js/styles/zenburn.css'\r\nimport 'highlight.js/styles/solarized-light.css'\r\nimport MyAutoCompleter from './MyAutoCompleter';\r\nimport MySingleAutoCompleter from './MySingleAutoCompleter';\r\nimport ColorPicker from './ColorPicker';\r\nimport Modal from './Modal';\r\nimport FilterControls from './FilterControls';\r\nimport QueryParsers from './QueryParsers';\r\nimport \"reveal.js/dist/reveal.css\";\r\n//import \"reveal.js/dist/theme/white.css\";\r\nimport './rjs_white.css';\r\nimport Reveal from 'reveal.js';\r\nimport Markdown from 'reveal.js/plugin/markdown/markdown.esm.js';\r\nimport RevealHighlight from 'reveal.js/plugin/highlight/highlight.esm'\r\n\r\n//import '../../../../node_modules/react-tabulator/lib/styles.css'; // required styles\r\n//import '../../../../node_modules/react-tabulator/lib/css/tabulator.css';\r\nimport './simpleStyles.css';\r\nimport markdownItMermaid from \"@datatraccorporation/markdown-it-mermaid\";\r\nlet MarkdownIt = new require('markdown-it')({\r\n    linkify: true,\r\n    html: true\r\n}).use(require('markdown-it-bracketed-spans')).use(require('markdown-it-attrs')).use(require('markdown-it-container'), 'code').use(require('markdown-it-container'), 'indent1').use(require('markdown-it-container'), 'indent2').use(require('markdown-it-container'), 'indent3').use(require('markdown-it-highlightjs')).use(markdownItMermaid).use(require('markdown-it-plantuml'), {imageFormat: 'png'}).use(require('markdown-it-container'), 'slide').use(require('markdown-it-fancy-lists').markdownItFancyListPlugin);\r\n\r\n\r\n// From: https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md#renderer\r\n// Remember old renderer, if overridden, or proxy to default renderer\r\nvar defaultRender = MarkdownIt.renderer.rules.link_open || function(tokens, idx, options, env, self) {\r\n    return self.renderToken(tokens, idx, options);\r\n  };\r\n\r\nMarkdownIt.renderer.rules.link_open = function (tokens, idx, options, env, self) {\r\n    // If you are sure other plugins can't add `target` - drop check below\r\n    var aIndex = tokens[idx].attrIndex('target');\r\n  \r\n    if (aIndex < 0) {\r\n      tokens[idx].attrPush(['target', '_blank']); // add new attribute\r\n    } else {\r\n      tokens[idx].attrs[aIndex][1] = '_blank';    // replace value of existing attr\r\n    }\r\n  \r\n    // pass token to default renderer.\r\n    return defaultRender(tokens, idx, options, env, self);\r\n};\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\nvar socket = require('socket.io-client').connect(config.apiUrl);\r\n\r\nclass DsView extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            firstTime: true,\r\n            filterButtonText: 'Enable Filters',\r\n            editingButtonText: 'Disable Editing',\r\n            pageSize: 30,\r\n            totalRecs: 0, \r\n            refresh: 0,\r\n            initialHeaderFilter: [],\r\n            initialSort: [],\r\n            filterColumnAttrs: {},\r\n            currentColumnAttrs: {}, // Unused, cleanup all uses of this one. \r\n            filter: '',\r\n            frozenCol: \"\",\r\n            showModal: false,\r\n            modalTitle: \"Title of modal\",\r\n            modalQuestion: \"\",\r\n            modalCallback: null,\r\n            modalStatus: '',\r\n            modalCancel: 'Cancel',\r\n            modalOk: 'Do It!',\r\n\r\n            chronologyDescending: false,\r\n            singleClickEdit: false,\r\n            showAllFilters: false,\r\n            disableEditing: false,\r\n            showColorPicker: false,\r\n            colorPickerLeft: 0,\r\n            colorPickerTop: 0,\r\n            color: 0,\r\n\r\n            connectedState: false\r\n        };\r\n        this.ref = null;\r\n        \r\n        this.timers = {};\r\n        this.lockedByOthersCells = {};\r\n        this.firstRenderCompleted = false;\r\n        this.cellImEditing = null;\r\n        this.mouseDownOnHtmlLink = false;\r\n        this.mouseDownOnBadgeCopyIcon = false;\r\n\r\n        this.applyHtmlLinkAndBadgeClickHandlers = this.applyHtmlLinkAndBadgeClickHandlers.bind(this);\r\n        this.renderComplete = this.renderComplete.bind(this);\r\n        this.cellEditing = this.cellEditing.bind(this);\r\n        this.cellEdited = this.cellEdited.bind(this);\r\n        this.cellEditCancelled = this.cellEditCancelled.bind(this);\r\n        this.cellEditCheck = this.cellEditCheck.bind(this);\r\n        this.cellForceEditTrigger = this.cellForceEditTrigger.bind(this);\r\n        this.fixImgSizeForClipboard = this.fixImgSizeForClipboard.bind(this);\r\n        this.copyFormatted = this.copyFormatted.bind(this);\r\n\r\n        this.startPreso = this.startPreso.bind(this);\r\n        this.myCopyToClipboard = this.myCopyToClipboard.bind(this);\r\n        this.recordRef = this.recordRef.bind(this);\r\n        this.downloadXlsx = this.downloadXlsx.bind(this);\r\n        this.toggleFilters = this.toggleFilters.bind(this);\r\n        this.toggleEditing = this.toggleEditing.bind(this);\r\n        this.addRow = this.addRow.bind(this);\r\n        this.deleteRowHandler = this.deleteRowHandler.bind(this);\r\n        this.deleteRowQuestion = this.deleteRowQuestion.bind(this);\r\n        this.deleteAllRowsInViewQuestion = this.deleteAllRowsInViewQuestion.bind(this);\r\n        this.deleteAllRowsInView = this.deleteAllRowsInView.bind(this);\r\n        this.deleteAllRowsInQuery = this.deleteAllRowsInQuery.bind(this);\r\n        this.duplicateAndAddRowHandler = this.duplicateAndAddRowHandler.bind(this);\r\n        this.toggleSingleFilter = this.toggleSingleFilter.bind(this);\r\n        this.freezeColumn = this.freezeColumn.bind(this);\r\n        this.unfreezeColumn = this.unfreezeColumn.bind(this);\r\n        this.setFreezeColumn = this.setFreezeColumn.bind(this);\r\n        this.pageSizeChange = this.pageSizeChange.bind(this);\r\n        this.ajaxResponse = this.ajaxResponse.bind(this);\r\n        this.ajaxURLGenerator = this.ajaxURLGenerator.bind(this);\r\n        this.cellClickEvents = this.cellClickEvents.bind(this);\r\n        this.copyToClipboard = this.copyToClipboard.bind(this);\r\n        this.copyCellToClipboard = this.copyCellToClipboard.bind(this);\r\n        this.pickFillColorHandler = this.pickFillColorHandler.bind(this);\r\n        this.handleColorPickerClose = this.handleColorPickerClose.bind(this);\r\n        this.handleColorPickerOnChangeComplete = this.handleColorPickerOnChangeComplete.bind(this);\r\n        this.jiraRefreshHandler = this.jiraRefreshHandler.bind(this);\r\n        this.jiraRefreshStatus = this.jiraRefreshStatus.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.processFilterChange = this.processFilterChange.bind(this);\r\n        this.isKey = this.isKey.bind(this);\r\n        this.hideColumn = this.hideColumn.bind(this);\r\n        this.showAllCols = this.showAllCols.bind(this);\r\n        this.hideColumnFromCell = this.hideColumnFromCell.bind(this);\r\n        this.columnResized = this.columnResized.bind(this);\r\n        this.columnVisibilityChanged = this.columnVisibilityChanged.bind(this);\r\n        this.retainColumnAttrs = this.retainColumnAttrs.bind(this);\r\n        this.applyFilterColumnAttrs = this.applyFilterColumnAttrs.bind(this);\r\n        this.normalizeAllImgRows = this.normalizeAllImgRows.bind(this);\r\n        this.applyHighlightJsBadge = this.applyHighlightJsBadge.bind(this);\r\n        this.displayConnectedStatus = this.displayConnectedStatus.bind(this);\r\n\r\n        let chronologyDescendingFrmLocal = localStorage.getItem(\"chronologyDescending\");\r\n        chronologyDescendingFrmLocal = JSON.parse(chronologyDescendingFrmLocal);\r\n        this.state.chronologyDescending = chronologyDescendingFrmLocal;\r\n        let singleClickEditFrmLocal = localStorage.getItem(\"singleClickEdit\");\r\n        singleClickEditFrmLocal = JSON.parse(singleClickEditFrmLocal);\r\n        this.state.singleClickEdit = singleClickEditFrmLocal;\r\n        let showAllFiltersFrmLocal = localStorage.getItem(\"showAllFilters\");\r\n        showAllFiltersFrmLocal = JSON.parse(showAllFiltersFrmLocal);\r\n        this.state.showAllFilters = showAllFiltersFrmLocal;\r\n        let disableEditingFrmLocal = localStorage.getItem(\"disableEditing\");\r\n        disableEditingFrmLocal = JSON.parse(disableEditingFrmLocal);\r\n        this.state.disableEditing = disableEditingFrmLocal;\r\n    }\r\n    componentDidMount () {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        if ( !Object.keys(dsHome).length || !dsHome.dsViews || !dsHome.dsViews[dsView] ) {\r\n            dispatch(dsActions.loadColumnsForUserView(dsName, dsView, user.user)); \r\n        }\r\n        let me = this;\r\n        socket.on('connect', (data) => {\r\n            socket.emit('Hello', { user: user.user});\r\n            me.setState({connectedState: true});\r\n        })\r\n        socket.on('disconnect', (data) => {\r\n            me.setState({connectedState: false});\r\n        })\r\n        socket.on('Hello', (helloObj) => {\r\n            ;\r\n        })\r\n        socket.on('activeLocks', (activeLocks) => {\r\n            me.setState({connectedState: true});\r\n            activeLocks = JSON.parse(activeLocks);\r\n            console.log(\"Active locks: \", activeLocks);\r\n            let keys = Object.keys(activeLocks);\r\n            for (let i = 0; i < keys.length; i++) {\r\n                let _id = keys[i];\r\n                let rows = me.ref.table.searchRows(\"_id\", \"=\", _id);\r\n                if (!rows.length) continue;\r\n                console.log(\"Found row!\");\r\n                let fields = Object.keys(activeLocks[_id]);\r\n                for (let j = 0; j < fields.length; j++) {\r\n                    let field = fields[j];\r\n                    console.log(\"Field is: \",field);\r\n                    let cell = rows[0].getCell(field);\r\n                    console.log(\"Cell is: \", cell);\r\n                    activeLocks[_id][field] = cell;\r\n                    if (!cell) continue;\r\n                    if (me.cellImEditing === cell) {\r\n                        console.log(\"Whoops, someone else got there first..\");\r\n                        cell.cancelEdit();\r\n                    }\r\n                    cell.getElement().style.backgroundColor = 'lightGray';\r\n                }\r\n            }\r\n            this.lockedByOthersCells = activeLocks;\r\n        })\r\n        socket.on('locked', (lockedObj) => {\r\n            console.log('Received locked: ', lockedObj);\r\n            if (!me.ref || !me.ref.table) return;\r\n            if (dsName === lockedObj.dsName) {\r\n                let rows = me.ref.table.searchRows(\"_id\", \"=\", lockedObj._id);\r\n                // rows.length must be 1. \r\n                if (!rows.length) return;\r\n                let cell = rows[0].getCell(lockedObj.field);\r\n                if (!me.lockedByOthersCells[lockedObj._id]) {\r\n                    me.lockedByOthersCells[lockedObj._id] = {}\r\n                }\r\n                me.lockedByOthersCells[lockedObj._id][lockedObj.field] = cell;\r\n                if (me.cellImEditing === cell) {\r\n                    console.log(\"Whoops, someone else got there first..\");\r\n                    cell.cancelEdit();\r\n                }\r\n                cell.getElement().style.backgroundColor = 'lightGray';\r\n            }\r\n        })\r\n        socket.on('unlocked', (unlockedObj) => {\r\n            let adjustTableHeight = false;\r\n            try {\r\n                if (!me.ref || !me.ref.table) return;\r\n                if (dsName === unlockedObj.dsName && me.lockedByOthersCells[unlockedObj._id][unlockedObj.field]) {\r\n                    let cell = me.lockedByOthersCells[unlockedObj._id][unlockedObj.field];\r\n                    delete me.lockedByOthersCells[unlockedObj._id][unlockedObj.field];\r\n                    if (unlockedObj.newVal !== undefined && unlockedObj.newVal !== null) {\r\n                        let update = { _id: unlockedObj._id };\r\n                        update[unlockedObj.field] = unlockedObj.newVal;\r\n                        //console.log('Update1: ', update);\r\n                        me.ref.table.updateData([ update ]);\r\n                        adjustTableHeight = true;\r\n                    }\r\n                    // Delete the 'lightGray', then restore correct formatting\r\n                    cell.getElement().style.backgroundColor = '';\r\n                    //Restore correctly.\r\n                    let colDef = cell.getColumn().getDefinition();\r\n                    //console.log(\"colDef is: \", colDef);\r\n                    colDef.formatter(cell, colDef.formatterParams);\r\n                } else if (dsName === unlockedObj.dsName && unlockedObj.newVal) {\r\n                    let rows = me.ref.table.searchRows(\"_id\", \"=\", unlockedObj._id);\r\n                    // rows.length must be 1. \r\n                    if (!rows.length) return;\r\n                    let cell = rows[0].getCell(unlockedObj.field);\r\n                    let update = { _id: unlockedObj._id };\r\n                    update[unlockedObj.field] = unlockedObj.newVal;\r\n                    //console.log('Update2: ', update);\r\n                    me.ref.table.updateData([ update ]);\r\n                    adjustTableHeight = true;\r\n                }\r\n            } catch (e) {}\r\n            if (adjustTableHeight && !me.cellImEditing) {\r\n                if (me.timers[\"post-cell-edited\"]) {\r\n                    clearTimeout(me.timers[\"post-cell-edited\"]);\r\n                    me.timers[\"post-cell-edited\"] = null;\r\n                }\r\n                me.timers[\"post-cell-edited\"] = setTimeout(() => {\r\n                    if (!me.cellImEditing) {\r\n                        //cell.getRow().normalizeHeight();\r\n                        console.log(\"Doing adjusttablesize (unlockReq)... \");\r\n                        me.ref.table.rowManager.adjustTableSize(false);\r\n                        me.normalizeAllImgRows();\r\n                        me.applyHighlightJsBadge();\r\n                    } else {\r\n                        console.log(\"Skipping adjusttablesie (unlockReq)... \");\r\n                    }\r\n                }, 500);                    \r\n            }\r\n            console.log('Received unlocked: ', unlockedObj);\r\n        })\r\n    }\r\n    componentWillUnmount () {\r\n        const { dispatch } = this.props;\r\n        dispatch( { type: dsConstants.CLEAR_COLUMNS } );\r\n    }\r\n\r\n    renderComplete () {\r\n        const { match } = this.props;\r\n        let dsName = match.params.dsName; \r\n\r\n        //console.log(\"table data: \", this.ref.table.getData());\r\n\r\n        //if (this.firstRenderCompleted) return;\r\n        socket.emit('getActiveLocks', dsName);\r\n        //this.firstRenderCompleted = true;\r\n        this.normalizeAllImgRows();\r\n        // add HighlightJS-badge\r\n        this.applyHighlightJsBadge();\r\n    }\r\n\r\n    // Since we generate html after editing, we need to attach\r\n    // the handlers again. \r\n    applyHtmlLinkAndBadgeClickHandlers() {\r\n        let me = this;\r\n        let splElements = document.getElementById(\"tabulator\").getElementsByTagName('a');\r\n        for(var i = 0, len = splElements.length; i < len; i++) {\r\n            splElements[i].onclick = function (e) {\r\n                me.mouseDownOnHtmlLink = true;\r\n                // Caution: This is a must, otherwise you are getting the click after returning to the tab!\r\n                e.stopPropagation();\r\n                // Caution: To clear this out after a second to ensure that the next click is honored properly. \r\n                setTimeout(() => me.mouseDownOnHtmlLink = false, 1000);\r\n                return true;\r\n            }\r\n        }\r\n        // This querySelectorAll is borrowed from highlightjs-badge.js code\r\n        splElements = document.getElementById(\"tabulator\").querySelectorAll(\".code-badge-copy-icon\");\r\n        for(i = 0, len = splElements.length; i < len; i++) {\r\n            // Have to setup for 'focus' event because that fires first! And\r\n            // tabulator already has this setup on the cell.\r\n            splElements[i].setAttribute(\"tabindex\", 0);\r\n            splElements[i].addEventListener(\"focus\", \r\n                function(e) {\r\n                    let clickedEl = e.srcElement;\r\n                    console.log(`Classlist is: ${clickedEl.classList}`);\r\n                    if (clickedEl.classList.contains(\"code-badge-copy-icon\")) {    \r\n                        me.mouseDownOnBadgeCopyIcon = true;\r\n                        // Caution: To clear this out after a second to ensure that the next click is honored properly. \r\n                        setTimeout(() => me.mouseDownOnBadgeCopyIcon = false, 1000);\r\n                        return true;\r\n                    }\r\n                });\r\n        }\r\n    }\r\n    applyHighlightJsBadge() {\r\n        let me = this;\r\n        if (this.timers[\"applyHighlightJsBadge\"]) {\r\n            clearTimeout(this.timers[\"applyHighlightJsBadge\"]);\r\n            this.timers[\"applyHighlightJsBadge\"] = null;\r\n        }\r\n        this.timers[\"applyHighlightJsBadge\"] = setTimeout(() => {\r\n            window.highlightJsBadge();\r\n            this.applyHtmlLinkAndBadgeClickHandlers();\r\n        }, 1000);\r\n    }\r\n\r\n    fixImgSizeForClipboard(output) {\r\n\r\n        let imgList = document.querySelectorAll(\"img\");\r\n        let imgSizes = {};\r\n        for (let i = 0; i < imgList.length; i++) {\r\n            //console.log(`imgList[${i}]: `, imgList[i], imgList[i].width, imgList[i].height, imgList[i].naturalWidth, imgList[i].naturalHeight, imgList[i].getAttribute(\"src\"));\r\n            let img = {};\r\n            img.src = imgList[i].getAttribute(\"src\");\r\n            img.width = imgList[i].width;\r\n            img.height = imgList[i].height;\r\n            imgSizes[img.src] = img;\r\n        }\r\n        let e = [...output.matchAll(/<img src=\"(.*?)\"/gi)];\r\n        for (let i = 0; i < e.length; i++) {\r\n            let key = e[i][1];\r\n            if (!imgSizes[key]) continue;\r\n            if (/data:image/.test(key)) continue;\r\n            let str = `<img src=\"${key}\" alt=\"${key}\" width=\".*\" height=\".*\"`;\r\n            let rep = `<img src=\"${key}\" alt=\"${key}\" width=${imgSizes[key].width} height=${imgSizes[key].height}`;\r\n            output = output.replace(new RegExp(str), rep);\r\n        }\r\n        output = output.replaceAll('<img src=\"/attachments/', `<img src=\"${window.location.origin}/attachments/`);\r\n        return output;\r\n    }\r\n\r\n    normalizeAllImgRows() {\r\n        let me = this;\r\n        if (this.timers[\"normalizeAllImgRows\"]) {\r\n            clearInterval(this.timers[\"normalizeAllImgRows\"]);\r\n            this.timers[\"normalizeAllImgRows\"] = null;\r\n        }\r\n        let extraIters = 0;\r\n        this.timers[\"normalizeAllImgRows\"] = setInterval(function () {\r\n            //console.log(\"normalizeAllImgRows periodic fn...:\", extraIters);\r\n            if (document.readyState === 'complete') {\r\n                let imgList = document.querySelectorAll(\"img\");\r\n                let allImgsRead = true;\r\n                for (let i = 0; i < imgList.length; i++) {\r\n                    //console.log(`imgList[${i}]: `, imgList[i].complete, imgList[i].naturalHeight);\r\n                    if (!(imgList[i].complete /*&& imgList[i].naturalHeight !== 0*/)) {\r\n                        allImgsRead = false;\r\n                        extraIters = 0;\r\n                        break;\r\n                    }\r\n                }\r\n                if (allImgsRead) {\r\n                    // Basically, give it 600 ms before the new image is fetching and\r\n                    // allImgsRead is false...\r\n                    if (extraIters === 2) {\r\n                        if (imgList.length && !me.cellImEditing) {\r\n                            let rows = me.ref.table.getRows();\r\n                            for (let i = 0; i < rows.length; i++) {\r\n                                rows[i].normalizeHeight();\r\n                            }\r\n                            //console.log(\"Adjusting table size now.\");\r\n                            me.ref.table.rowManager.adjustTableSize(false);\r\n                        } else {\r\n                            console.log(\"Skipping normalize as there are no images or some editing in progress...\");\r\n                        }\r\n                    }\r\n                    if (extraIters >= 10) {\r\n                        //console.log(\"Cancelling timer after extraIters!\");\r\n                        extraIters = 0;\r\n                        clearInterval(me.timers[\"normalizeAllImgRows\"]);\r\n                        me.timers[\"normalizeAllImgRows\"] = null;\r\n                    }\r\n                    extraIters++;\r\n                }\r\n            }\r\n        }, 300);\r\n    }\r\n\r\n    showAllCols () {\r\n        let cols = this.ref.table.getColumns();\r\n        for (let i = 0; i < cols.length; i++) {\r\n            if (!cols[i].isVisible())\r\n                cols[i].show();\r\n        }\r\n    }\r\n\r\n    hideColumn (e, column) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        if (!this.isKey(column.getField()))\r\n            column.hide();\r\n    }\r\n\r\n    hideColumnFromCell (e, cell) {\r\n        let column = cell.getColumn();\r\n        if (!this.isKey(column.getField()))\r\n            column.hide();\r\n    }\r\n\r\n    columnResized (column) {\r\n        let forField = this.state.currentColumnAttrs[column.getField()];\r\n        if (!forField) forField = {};\r\n        if (forField.width !== column.getWidth()) {\r\n            let currentColumnAttrs = { ...this.state.currentColumnAttrs };\r\n            forField.width = column.getWidth();\r\n            currentColumnAttrs[column.getField()] = forField;\r\n            this.setState({ currentColumnAttrs });\r\n        }\r\n    }\r\n\r\n    columnVisibilityChanged (column, visible) {\r\n        let forField = this.state.currentColumnAttrs[column.getField()];\r\n        if (!forField) forField = {};\r\n        if (forField.hidden !== !visible) {\r\n            let currentColumnAttrs = { ...this.state.currentColumnAttrs };\r\n            forField.hidden = !visible;\r\n            currentColumnAttrs[column.getField()] = forField;\r\n            this.setState({ currentColumnAttrs });\r\n        }\r\n    }\r\n\r\n    isKey (field) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        //console.log(\"Field is: \", field);\r\n        if (dsHome.dsViews[dsView].keys && dsHome.dsViews[dsView].keys.length) {\r\n            for (let i = 0; i < dsHome.dsViews[dsView].keys.length; i++) {\r\n                let key = dsHome.dsViews[dsView].keys[i];\r\n                //console.log(\"key is: \", key);\r\n                if (field === key)\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    toggleModal (confirmed) {\r\n        this.state.modalCallback(confirmed);\r\n        this.setState({ showModal: !this.state.showModal });\r\n    }\r\n\r\n    cellClickEvents (e, cell) {\r\n        if (e.type === \"dblclick\" && !this.state.singleClickEdit && !this.state.disableEditing && this.cellEditCheckForConflicts(cell)) {\r\n            // Force edit\r\n            cell.edit(true);\r\n        }\r\n    }\r\n    cellEditCheckForConflicts (cell) {\r\n        try {\r\n            let column = cell.getColumn().getField();\r\n            let _id = cell.getRow().getData()['_id'];\r\n            if (this.lockedByOthersCells[_id][column])\r\n                return false;\r\n        } catch (e) {}\r\n        if (this.mouseDownOnHtmlLink || this.mouseDownOnBadgeCopyIcon) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    cellEditCheck (cell) {      \r\n        if (!this.state.singleClickEdit)  return false;\r\n        if (this.state.disableEditing) return false;\r\n        if (!this.state.connectedState) return false;\r\n        return this.cellEditCheckForConflicts(cell);\r\n    }\r\n    cellForceEditTrigger (cell) {\r\n        console.log(\"In cellForceEditTrigger\");\r\n        if (!this.state.singleClickEdit)  return false;\r\n        if (this.state.disableEditing) return false;\r\n        if (!this.state.connectedState) return false;\r\n        let noConcurrentEdits = this.cellEditCheckForConflicts(cell);\r\n        if (noConcurrentEdits) {\r\n            setImmediate(() => {\r\n                console.log(\"Going to call force edit\");\r\n                cell.edit(true);\r\n            });\r\n        }        \r\n    }\r\n\r\n    cellEditCancelled (cell) {\r\n        const { match } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let column = cell.getColumn().getField();\r\n        let _id = cell.getRow().getData()['_id'];\r\n        if (!_id) {\r\n            return;\r\n        }\r\n        let me = this;\r\n        if (this.cellImEditing === cell) {\r\n            this.cellImEditing = null;\r\n        } else {\r\n            console.log(\"Not nullifying cellImEditing as it is not me!\");\r\n        }\r\n        let unlockReq = { _id, field: column, dsName, dsView }\r\n        socket.emit('unlockReq', unlockReq);\r\n        if (this.timers[\"post-cell-edited\"]) {\r\n            clearTimeout(this.timers[\"post-cell-edited\"]);\r\n            this.timers[\"post-cell-edited\"] = null;\r\n        }\r\n        this.timers[\"post-cell-edited\"] = setTimeout(() => {\r\n            if (!me.cellImEditing) {\r\n                //cell.getRow().normalizeHeight();\r\n                console.log(\"Doing adjusttablesize (cellEditCancelled)... \");\r\n                this.ref.table.rowManager.adjustTableSize(false);\r\n                this.normalizeAllImgRows();\r\n                this.applyHighlightJsBadge();\r\n            } else {\r\n                console.log(\"Skipping adjusttablesize (cellEditCancelled)...\");\r\n            }\r\n        }, 500);\r\n        this.ref.table.element.focus({preventScroll: false});\r\n    }\r\n\r\n    cellEditing (cell) {\r\n        const { match } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let column = cell.getColumn().getField();\r\n        let _id = cell.getRow().getData()['_id'];\r\n        if (!_id) {\r\n            return;\r\n        }\r\n        this.cellImEditing = cell;\r\n        let lockReq = { _id, field: column, dsName, dsView }\r\n        socket.emit('lockReq', lockReq);\r\n        //cell.__dg__prevBgColor = cell.getElement().style.backgroundColor;\r\n        //cell.getElement().style.backgroundColor = cell.__dg__prevBgColor;\r\n        //delete cell.__dg__prevBgColor;\r\n        // If you have started editing some cell, don't fire this timer. \r\n        if (this.timers[\"post-cell-edited\"]) {\r\n            clearTimeout(this.timers[\"post-cell-edited\"]);\r\n            this.timers[\"post-cell-edited\"] = null;\r\n        }\r\n    }\r\n\r\n    toggleFilters () {\r\n        const { dsHome, match } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        this.ref.table.clearHeaderFilter();\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        //console.log(\"Current definitions: \", currentDefs);\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            newVal = currentDefs[j].headerFilter ? false : 'input';\r\n            try {\r\n                // If the headerFilter has to be set, then set it from the backend value. \r\n                if (newVal) {\r\n                    if (dsHome.dsViews[dsView].columnAttrs[j].headerFilterType)\r\n                        newVal = dsHome.dsViews[dsView].columnAttrs[j].headerFilterType;\r\n                }\r\n            } catch (e) {}\r\n            currentDefs[j].headerFilter = newVal;\r\n            //this.ref.table.updateColumnDefinition(currentDefs[j].field, {editor: newVal});\r\n        }\r\n        this.ref.table.setColumns(currentDefs);\r\n        this.setState( { filterButtonText: newVal ? 'Disable Filtering' : 'Enable Filtering'} );\r\n        //let row = this.ref.table.getRows();\r\n        //console.log(row);\r\n        //row.normalizeHeight();\r\n\r\n        //this.ref.table.redraw(true);\r\n    }\r\n\r\n    toggleEditing () {\r\n        const { dsHome, match } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        //console.log(\"Current definitions: \", currentDefs);\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            newVal = currentDefs[j].editor ? false : 'input';\r\n            currentDefs[j].editor = newVal;\r\n            try {\r\n                // If the editor has to be set, then set it from the backend value. \r\n                if (newVal) {\r\n                    currentDefs[j].editor = dsHome.dsViews[dsView].columnAttrs[j].editor;\r\n                    if (currentDefs[j].editor === 'textarea') {\r\n                        currentDefs[j].editor = MyTextArea;\r\n                    } else if (currentDefs[j].editor === 'codemirror') {\r\n                        currentDefs[j].editor = MyCodeMirror;\r\n                    } else if (currentDefs[j].editor === 'date') {\r\n                        currentDefs[j].editor = DateEditor;\r\n                    }\r\n                    console.log(\"Field: \", currentDefs[j].field, \"editor: \", dsHome.dsViews[dsView].columnAttrs[j].editor);\r\n                }\r\n            } catch (e) {}\r\n        //this.ref.table.updateColumnDefinition(currentDefs[j].field, {editor: newVal});\r\n        }\r\n        let initialHeaderFilter = this.ref.table.getHeaderFilters();\r\n        this.ref.table.setColumns(currentDefs);\r\n        this.setState( { editingButtonText: newVal ? 'Disable Editing' : 'Enable Editing', initialHeaderFilter, refresh: this.state.refresh + 1 } );\r\n    }\r\n\r\n    async addRow (e, cell, data) {\r\n        const { dispatch, match, dsHome } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        if (!data) data = {};\r\n        try {\r\n            if (Object.keys(dsHome.dsRowAdds[dsView]).length) {\r\n                console.log(\"A row add is in progress..\");\r\n                return;\r\n            }\r\n        } catch (e) {}\r\n        // XXX: 20 is pagination size. Make it a constant. \r\n        //let row = await this.ref.table.addRow({}, false, 20);\r\n        let row = await this.ref.table.addRow(data, true);\r\n        console.log(\"Row is: \", row);\r\n    }\r\n\r\n    startPreso () {\r\n        let slideFound = false;\r\n        let sectionHtml = \"\";\r\n        let slideList = document.querySelectorAll(\".slide\");\r\n        for (let i = 0; i < slideList.length; i++) {\r\n            let slide = slideList[i];\r\n            slideFound = true;\r\n            sectionHtml += `<section class=\"top\">${slide.innerHTML}</section>`;\r\n        }\r\n        if (!slideFound) return;\r\n\r\n        sectionHtml = sectionHtml.replace(/<pre class=\"code-badge-pre\"[\\s\\S]*?(<code [\\s\\S]*?<\\/code>)<\\/pre>/gi, '<pre>$1</pre>');\r\n        localStorage.setItem('revealjsSections', sectionHtml);\r\n        window.open('/revealjs', '_blank');\r\n    }\r\n\r\n    // The procedure we do in copyFormatted preserves all the styling! \r\n    // Thus, we will use the same html generation function, but copy it \r\n    // to clipboard with the tweaks as in copyFormatted. \r\n    // Ideally, the html for each cell should be copied from it's innerHTML. \r\n    // That will preserve the dynamically generated images like plantuml. See \r\n    // the copyCellToClipboard method. Since we don't have a hook, we are settling\r\n    // for now. Only plantuml images don't appear in table copy. \r\n    // Now fixed. Setting colVisProp to \"clipboard\" will call the correct \r\n    // formatter in which we clone and use the resolved images! See \r\n    // col.formatterClipboard function below!\r\n    myCopyToClipboard () {\r\n        let visible = true, style = true, colVisProp = \"clipboard\", \r\n            config = null;\r\n        let html = this.ref.table.modules.export.getHtml(visible, style, config, colVisProp);\r\n        this.copyFormatted(null, html);\r\n    }\r\n\r\n    copyToClipboard () {\r\n        // You have to also set 'clipboard' to true in table options.\r\n        //this.ref.table.copyToClipboard();\r\n        this.myCopyToClipboard();\r\n    }\r\n\r\n    // https://stackoverflow.com/questions/34191780/javascript-copy-string-to-clipboard-as-text-html\r\n    copyFormatted (element, html) {\r\n        // Create container for the HTML\r\n        var container = document.createElement('div')\r\n        // XXX: Try to see if you can get the html from the element. But this\r\n        // didn't do the job. Also messed up the styling it seems. Background color is lost etc. \r\n        if (element) html = element.innerHTML;\r\n        html = this.fixImgSizeForClipboard(html);\r\n        // To replace the markup due to the highlightjs badges. \r\n        // The regex arrived by looking at the generated markup \r\n        // and some clever regex as usual. \r\n        // This mostly is needed when html comes from innerHTML!\r\n        html = html.replace(/<pre class=\"code-badge-pre\"[\\s\\S]*?(<code [\\s\\S]*?<\\/code>)<\\/pre>/gi, '<pre>$1</pre>');\r\n\r\n        html = html.replace(/<code class=\"hljs\">/gi, '<code class=\"hljs\" style=\"background-color:white; font-size:12px\">');\r\n        container.innerHTML = html\r\n\r\n        // Hide element\r\n        container.style.position = 'fixed'\r\n        container.style.pointerEvents = 'none'\r\n        container.style.opacity = 0\r\n    \r\n        // Detect all style sheets of the page\r\n        var activeSheets = Array.prototype.slice.call(document.styleSheets)\r\n        .filter(function (sheet) {\r\n            return !sheet.disabled\r\n        })\r\n        //console.log(`ActiveSheets: `, activeSheets);\r\n    \r\n        // Mount the container to the DOM to make `contentWindow` available\r\n        document.body.appendChild(container)\r\n    \r\n        // Copy to clipboard\r\n        window.getSelection().removeAllRanges()    \r\n        var range = document.createRange()\r\n        range.selectNode(container)\r\n        window.getSelection().addRange(range)\r\n        document.execCommand('copy')\r\n    \r\n        \r\n        for (var i = 0; i < activeSheets.length; i++) {\r\n            //if (activeSheets[i].title === \"highlightJsBadge\" || /bootstrap|datagroom/.test(activeSheets[i].href))\r\n            if (!/static\\/css/.test(activeSheets[i].href))\r\n                activeSheets[i].disabled = true\r\n        }\r\n        \r\n        document.execCommand('copy')\r\n    \r\n        \r\n        for (var i = 0; i < activeSheets.length; i++) {\r\n            //if (activeSheets[i].title === \"highlightJsBadge\" || /bootstrap|datagroom/.test(activeSheets[i].href))\r\n            if (!/static\\/css/.test(activeSheets[i].href))\r\n                activeSheets[i].disabled = false\r\n\r\n        }\r\n        \r\n        // Remove the container\r\n        document.body.removeChild(container)\r\n    }\r\n\r\n    copyFormattedBetter (container) {\r\n        // Copy to clipboard\r\n        window.getSelection().removeAllRanges()    \r\n        var range = document.createRange()\r\n        range.selectNode(container)\r\n        window.getSelection().addRange(range)\r\n        document.execCommand('copy')    \r\n        window.getSelection().removeAllRanges();    \r\n    }\r\n\r\n\r\n    copyCellToClipboard (e, cell) {\r\n        let colDef = cell.getColumn().getDefinition();\r\n        let html = colDef.formatter(cell, colDef.formatterParams);\r\n        //this.copyFormatted(html);\r\n\r\n        // Now use the innerHTML! \r\n        this.copyFormatted(/*cell.getElement()*/ null, `<div style=\"font-family:verdana; font-size:12px; background-color: white\">${cell.getElement().innerHTML}</div>`);\r\n\r\n        //this.copyFormattedBetter(cell.getElement());\r\n    }\r\n\r\n    step1 () {\r\n        const { match, dsHome } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        if ( !Object.keys(dsHome).length || !dsHome.dsViews || !dsHome.dsViews[dsView] ) {\r\n            //dispatch(dsActions.loadColumnsForUserView(dsName, dsView, user.user)); \r\n        }\r\n\r\n        let s1 = '';\r\n        try {\r\n            if (dsHome.dsViews[dsView].columns) {\r\n                //console.log(\"Column found!\");\r\n            }\r\n        } catch (e) {}\r\n        return s1;\r\n    }\r\n    recordRef (ref) {\r\n        // setting state is causing grief to the Tabulator component. \r\n        //this.setState({ ref });\r\n        this.ref = ref;\r\n        return true;\r\n    }\r\n\r\n    downloadXlsx () {\r\n        const { dispatch, match, user } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        // XXX: Doesn't work from the front end. \r\n        // this.ref.table.download(\"xlsx\", \"data.xlsx\", { sheetName: \"export\" })\r\n\r\n        dispatch(dsActions.downloadXlsx(dsName, dsView, user.user));\r\n    }\r\n\r\n    addRowStatus () {\r\n        const { dispatch, match, dsHome } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let status = ''\r\n        try {\r\n            if (dsHome.dsRowAdds[dsView].status === 'filling') {\r\n                return '';\r\n            }\r\n            if (dsHome.dsRowAdds[dsView].status === 'fail') { \r\n                status = 'New row add api failed';\r\n            } else if (dsHome.dsRowAdds[dsView].serverStatus.status === 'fail') {\r\n                status = 'Row addition failed, key might already be used. Try a different key.';\r\n            } else if (dsHome.dsRowAdds[dsView].serverStatus.status === 'success') {\r\n                console.log(\"Updating with: \", dsHome.dsRowAdds[dsView].serverStatus._id);\r\n                dsHome.dsRowAdds[dsView].uiRow.update({_id: dsHome.dsRowAdds[dsView].serverStatus._id})\r\n                dispatch({ type: dsConstants.CLEAR_ROW_ADD_TRACKER });\r\n            }\r\n        } catch (e) {}\r\n        return <b style={{color: \"red\"}}> {status} </b>;\r\n    }\r\n\r\n    cellEditStatus () {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let modalStatus = this.state.modalStatus;\r\n        let showModal = false;\r\n        //console.log('In cellEditStatus');\r\n        try {\r\n            Object.entries(dsHome.dsEdits).map( (kv) => {\r\n                let k = kv[0];\r\n                if (dsHome.dsEdits[k].editStatus === 'done' && \r\n                    dsHome.dsEdits[k].serverStatus.status === 'fail' && \r\n                    dsHome.dsEdits[k].serverStatus.hasOwnProperty('value')) {\r\n                    // set the cell's value from the server.\r\n                    let update = { _id: k };\r\n                    update[dsHome.dsEdits[k].serverStatus.column] = dsHome.dsEdits[k].serverStatus.value;\r\n                    console.log('Update: ', update);\r\n                    this.ref.table.updateData([ update ]);\r\n                    modalStatus += `Update <b style=\"color:red\">failed</b>, [key, RejectedValue]: [${dsHome.dsEdits[k].serverStatus.column}, ${dsHome.dsEdits[k].editTracker.newVal}]<br/><br/>`\r\n                    showModal = true;\r\n                    // Release the lock\r\n                    this.cellImEditing = null;\r\n                    let column = dsHome.dsEdits[k].editTracker.field;\r\n                    let unlockReq = { _id: k, field: column, dsName, dsView }\r\n                    socket.emit('unlockReq', unlockReq);\r\n                    dispatch({ type: dsConstants.EDIT_SINGLE_DELETE_TRACKER, _id: k })\r\n                } else if (dsHome.dsEdits[k].editStatus === 'done' && \r\n                    dsHome.dsEdits[k].serverStatus.status === 'fail' && \r\n                    dsHome.dsEdits[k].serverStatus.hasOwnProperty('error')) {\r\n                    // when you are editing a key. You simply get an error. Restore old value. \r\n                    let update = { _id: k };\r\n                    update[dsHome.dsEdits[k].editTracker.field] = dsHome.dsEdits[k].editTracker.oldVal;\r\n                    this.ref.table.updateData([ update ]);\r\n                    modalStatus += `Update <b style=\"color:red\">failed</b>, (error: ${dsHome.dsEdits[k].serverStatus.error}), reverted [key, RejectedValue]: [${dsHome.dsEdits[k].editTracker.field}, ${dsHome.dsEdits[k].editTracker.newVal}]<br/><br/>`\r\n\r\n                    showModal = true;\r\n                    // Release the lock\r\n                    this.cellImEditing = null;\r\n                    let column = dsHome.dsEdits[k].editTracker.field;\r\n                    let unlockReq = { _id: k, field: column, dsName, dsView }\r\n                    socket.emit('unlockReq', unlockReq);\r\n                    dispatch({ type: dsConstants.EDIT_SINGLE_DELETE_TRACKER, _id: k })\r\n                } else if (dsHome.dsEdits[k].editStatus === 'done' && \r\n                    dsHome.dsEdits[k].serverStatus.status === 'success') {\r\n\r\n                    showModal = false;\r\n                    // Release the lock and publish new value to everyone\r\n                    this.cellImEditing = null;\r\n                    let column = dsHome.dsEdits[k].editTracker.field;\r\n                    let newVal = dsHome.dsEdits[k].editTracker.newVal;\r\n                    let unlockReq = { _id: k, field: column, dsName, dsView, newVal }\r\n                    socket.emit('unlockReq', unlockReq);\r\n                    dispatch({ type: dsConstants.EDIT_SINGLE_DELETE_TRACKER, _id: k })\r\n\r\n                } else if (dsHome.dsEdits[k].editStatus === 'fail') {\r\n                    let update = { _id: k };\r\n                    update[dsHome.dsEdits[k].editTracker.field] = dsHome.dsEdits[k].editTracker.oldVal;\r\n                    this.ref.table.updateData([ update ]);\r\n                    modalStatus += `Update <b style=\"color:red\">failed</b>, reverted [key, RejectedValue]: [${dsHome.dsEdits[k].editTracker.field}, ${dsHome.dsEdits[k].editTracker.newVal}]<br/><br/>`;\r\n                    showModal = true;\r\n                    // Release the lock\r\n                    this.cellImEditing = null;\r\n                    let column = dsHome.dsEdits[k].editTracker.field;\r\n                    let unlockReq = { _id: k, field: column, dsName, dsView }\r\n                    socket.emit('unlockReq', unlockReq);\r\n                    dispatch({ type: dsConstants.EDIT_SINGLE_DELETE_TRACKER, _id: k })\r\n                }\r\n                // Revert the value for other failures also. \r\n            })\r\n        } catch (e) {}\r\n        //console.log(\"Status: \", status);\r\n        if (showModal /* && !this.state.showModal*/) {\r\n            let self = this;\r\n            let modalQuestion = modalStatus ? <div dangerouslySetInnerHTML={{__html: modalStatus}} /> : <div dangerouslySetInnerHTML={{__html: '<b style=\"color:green\">Edit Success</b>'}} />;\r\n            this.setState({ modalTitle: \"Edit Status\", \r\n                            modalQuestion: modalQuestion,\r\n                            modalStatus: modalStatus,\r\n                            modalOk: \"Dismiss\",\r\n                            modalCallback: (confirmed) => {self.setState({showModal: false, modalQuestion: '', modalStatus: ''})},\r\n                            showModal: true });\r\n        }\r\n        return <b style={{color: \"red\"}}> {''} </b>;\r\n    }\r\n\r\n    cellEdited (cell) {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        // When I'm using MyAutoCompleter, we have to explicitly adjust the \r\n        // height. But added it everywhere. \r\n        cell.getRow().normalizeHeight();\r\n        // XXX: This below call makes you lose continuous editing. Maybe you can \r\n        // call this in a delayed fashion.\r\n        if (this.timers[\"post-cell-edited\"]) {\r\n            clearTimeout(this.timers[\"post-cell-edited\"]);\r\n            this.timers[\"post-cell-edited\"] = null;\r\n        }\r\n        this.timers[\"post-cell-edited\"] = setTimeout(() => {\r\n            //cell.getRow().normalizeHeight();\r\n            this.ref.table.rowManager.adjustTableSize(false);\r\n            this.normalizeAllImgRows();\r\n            this.applyHighlightJsBadge();\r\n        }, 500);\r\n\r\n        //This maybe too expensive? Not good because it loses scrolling position\r\n        //this.ref.table.redraw();\r\n        // This is the correct routine to call which doesn't lose your scrolling. \r\n        //this.ref.table.rowManager.adjustTableSize();\r\n        //this.normalizeAllImgRows();\r\n        //this.applyHighlightJsBadge();\r\n\r\n\r\n        let column = cell.getColumn().getField();\r\n        let _id = cell.getRow().getData()['_id'];\r\n        if (!_id) {\r\n            let keyObj = {};\r\n            console.log('Looks like new row edit... ');\r\n            let { oldVal, newVal } = this.fixValueType(cell, column, dsHome, dsView);\r\n            if (dsHome.dsViews[dsView].keys && dsHome.dsViews[dsView].keys.length) {\r\n                let atLeastOneKeyNotEmpty = false;\r\n                for (let i = 0; i < dsHome.dsViews[dsView].keys.length; i++) {\r\n                    let key = dsHome.dsViews[dsView].keys[i];\r\n                    if (cell.getRow().getData()[key]) {\r\n                        atLeastOneKeyNotEmpty = true;\r\n                    }\r\n                    keyObj[key] = cell.getRow().getData()[key];\r\n                }\r\n                if (!atLeastOneKeyNotEmpty) {\r\n                    console.log(\"Not ready, all keys empty\");\r\n                    return;\r\n                }\r\n            }\r\n            let rowData = cell.getRow().getData();\r\n            console.log('rowData: ', rowData);\r\n            let uiRow = cell.getRow();\r\n            dispatch(dsActions.insertOneDoc(dsName, dsView, user.user, keyObj, rowData, uiRow)); \r\n            return;\r\n        }\r\n        // Edit logic\r\n        let { oldVal, newVal } = this.fixValueType(cell, column, dsHome, dsView);\r\n\r\n        let selectorObj = {};\r\n        selectorObj[\"_id\"] = _id;\r\n        for (let i = 0; i < dsHome.dsViews[dsView].keys.length; i++) {\r\n            let key = dsHome.dsViews[dsView].keys[i];\r\n            selectorObj[key] = cell.getRow().getData()[key];\r\n        }\r\n        selectorObj[column] = oldVal;\r\n\r\n        let editObj = {};\r\n        editObj[column] = newVal;\r\n        dispatch(dsActions.editSingleAttribute(dsName, dsView, user.user, _id, column, oldVal, newVal, selectorObj, editObj));\r\n\r\n    }\r\n    \r\n    fixValueType(cell, column, dsHome, dsView) {\r\n        let oldVal = cell.getOldValue();\r\n        let typeOfOldVal = 'tbd';\r\n        if (oldVal !== '')\r\n            typeOfOldVal = typeof oldVal;\r\n        console.log(\"Type of old val:\", typeOfOldVal);\r\n        console.log(\"oldvalue is: \", oldVal);\r\n        //if (oldVal !== '' && !Number.isNaN(Number(oldVal))) oldVal = Number(oldVal);\r\n        let newVal = cell.getValue();\r\n        // Old logic, now overridden below. Will get rid of this\r\n        // once I confirm the new logic works fine. \r\n        if (newVal !== '' && !Number.isNaN(Number(newVal)))\r\n            newVal = Number(newVal);\r\n        if (typeOfOldVal == 'string')\r\n            newVal = newVal.toString();\r\n\r\n        let configuredType = \"string\"; \r\n        try {\r\n            for (let i = 0; i < dsHome.dsViews[dsView].columnAttrs.length; i++) {\r\n                let col = dsHome.dsViews[dsView].columnAttrs[i];\r\n                if (col.field == column) {\r\n                    if (col.headerFilterType == 'number') {\r\n                        configuredType = 'number';\r\n                    }\r\n                    break; \r\n                }\r\n            }\r\n        } catch (e) {}\r\n\r\n        // This overrides the previous logic\r\n        if (configuredType == 'string') {\r\n            newVal = newVal.toString();\r\n        } else if (configuredType == 'number') {\r\n            if (newVal !== '' && !Number.isNaN(Number(newVal)))\r\n                newVal = Number(newVal);\r\n        }\r\n\r\n        // XXX: Tabulator always sets the value to string. \r\n        // This fixes it correctly.\r\n        cell.setValue(newVal);\r\n        return { oldVal, newVal };\r\n    }\r\n\r\n    duplicateAndAddRowHandler (e, cell) {\r\n        console.log(\"Duplicate and add row called..\");\r\n        let newData = JSON.parse(JSON.stringify(cell.getData()));\r\n        delete newData._id;\r\n        console.log(\"newData: \", newData);\r\n        this.addRow(null, cell, newData);\r\n        //cell.setValue(\"\");\r\n    }\r\n\r\n    /* Start: Handling of single row delete */\r\n    rowDeleteStatus () {\r\n        const { dispatch, dsHome } = this.props;\r\n        let status = ''\r\n        try {\r\n            Object.entries(dsHome.dsDeletes).map( (kv) => {\r\n                let k = kv[0];\r\n                if (dsHome.dsDeletes[k].deleteStatus === 'done' && \r\n                    dsHome.dsDeletes[k].serverStatus.status === 'fail') {\r\n                    //this.ref.table.updateData([ update ]);\r\n                    status += `Delete failed on server `\r\n                } else if (dsHome.dsDeletes[k].deleteStatus === 'done' && \r\n                    dsHome.dsDeletes[k].serverStatus.status === 'success') {\r\n                    let row = dsHome.dsDeletes[k].deleteTracker.row;\r\n                    row.delete();\r\n                    dispatch({ type: dsConstants.DELETE_SINGLE_DELETE_TRACKER, _id: k })\r\n                } else if (dsHome.dsDeletes[k].deleteStatus === 'fail') {\r\n                    status += `Delete API failed`;\r\n                }\r\n            })\r\n        } catch (e) {}\r\n        //console.log(\"Status: \", status);\r\n        return <b style={{color: \"red\"}}> {status} </b>;\r\n    }\r\n\r\n    deleteRowHandler (e, cell, confirmed) {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        console.log(\"Delete row handler called...:\", confirmed);\r\n        if (confirmed) {\r\n            let _id = cell.getRow().getData()['_id'];\r\n            if (!_id) {\r\n                cell.getRow().delete();\r\n                return;\r\n            }\r\n            dispatch(dsActions.deleteOneDoc(dsName, dsView, user.user, _id, cell.getRow()));\r\n        }\r\n        this.setState({ showModal: !this.state.showModal });\r\n    }\r\n\r\n    deleteRowQuestion (e, cell) {\r\n        let me = this;\r\n        this.setState({ modalTitle: \"Delete current row?\", \r\n                        modalQuestion: `This will delete the current row. Please confirm. Undoing support is not yet available!`,\r\n                        modalCallback: (confirmed) => me.deleteRowHandler(e, cell, confirmed),\r\n                        showModal: !this.state.showModal });\r\n    }\r\n\r\n    /* End: Handling of single row delete */\r\n\r\n    /* Start: Handling of delete all rows in view */\r\n\r\n    deleteAllRowsStatus () {\r\n        const { dispatch, dsHome } = this.props;\r\n        let status = ''\r\n        try {\r\n            Object.entries(dsHome.dsDeletes).map( (kv) => {\r\n                let k = kv[0];\r\n                if (dsHome.dsDeletes[k].deleteStatus === 'done' && \r\n                    dsHome.dsDeletes[k].serverStatus.status === 'fail') {\r\n                    status += `Delete failed on server `\r\n                } else if (dsHome.dsDeletes[k].deleteStatus === 'done' && \r\n                    dsHome.dsDeletes[k].serverStatus.status === 'success') {\r\n                    /*\r\n                    let rows = dsHome.dsDeletes[k].deleteTracker.rows;\r\n                    for (let i = 0; i < rows.length; i++)\r\n                        rows[i].delete();\r\n                    */\r\n                    this.ref.table.clearData();\r\n                    dispatch({ type: dsConstants.DELETE_MANY_DELETE_TRACKER, _id: k })\r\n                } else if (dsHome.dsDeletes[k].deleteStatus === 'fail') {\r\n                    status += `Delete API failed`;\r\n                }\r\n            })\r\n        } catch (e) {}\r\n        return <b style={{color: \"red\"}}> {status} </b>;\r\n    }\r\n\r\n    deleteAllRowsInView (confirmed) {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        console.log(\"Confirmed is: \", confirmed);\r\n        if (confirmed) {\r\n            let rows = this.ref.table.getRows();\r\n            let objects = [];\r\n            console.log(\"Will now delete Rows: \", rows);\r\n            for (let i = 0; i < rows.length; i++) {\r\n                let _id = rows[i].getData()['_id'];\r\n                if (_id)\r\n                    objects.push(_id);\r\n            }\r\n            dispatch(dsActions.deleteManyDocs(dsName, dsView, user.user, objects, rows));\r\n        }\r\n        this.setState({ showModal: !this.state.showModal });\r\n    }\r\n\r\n    deleteAllRowsInViewQuestion () {\r\n        let rows = this.ref.table.getRows();\r\n        this.setState({ modalTitle: \"Delete all rows in view?\", \r\n                        modalQuestion: `This will delete ${rows.length} rows. Please confirm. Undoing support is not yet available!`,\r\n                        modalCallback: this.deleteAllRowsInView,\r\n                        showModal: !this.state.showModal });\r\n    }\r\n\r\n    /* End: Handling of all rows in view */\r\n\r\n\r\n    /* Start: Handling of delete all rows in queries */\r\n    async deleteAllRowsInQuery() {\r\n        const { match, user } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let body = {};\r\n        let baseUrl = `${config.apiUrl}/ds/deleteFromQuery/${dsName}/${dsView}/${user.user}`\r\n        let filters = this.ref.table.getHeaderFilters();\r\n        let url = this.ajaxURLGenerator(baseUrl, {}, { filters, pretend: true });\r\n        let dataLen = JSON.stringify(body).length.toString();\r\n        let response = await fetch(url, {\r\n            method: \"post\",\r\n            body: JSON.stringify(body),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": dataLen,\r\n            }     \r\n        });\r\n        let responseJson = null;\r\n        if (response.ok) {\r\n            responseJson = await response.json();\r\n            console.log('deleteFromQuery responseJson total: ', responseJson.total);\r\n            this.setState({ modalTitle: \"Delete all Rows in query?\", \r\n                            modalQuestion: `This will delete ${responseJson.total} rows. Please confirm. Undoing support is not yet available!`,\r\n                            modalCallback: async (confirmed) => { \r\n                                if (confirmed) {\r\n                                    url = this.ajaxURLGenerator(baseUrl, {}, { filters, pretend: false });\r\n                                    let dataLen = JSON.stringify(body).length.toString();\r\n                                    let response = await fetch(url, {\r\n                                        method: \"post\",\r\n                                        body: JSON.stringify(body),\r\n                                        headers: {\r\n                                            \"Content-Type\": \"application/json\",\r\n                                            \"Content-Length\": dataLen,\r\n                                        }     \r\n                                    });\r\n                                    if (response.ok) {\r\n                                        let delJson = await response.json();\r\n                                        if (delJson.count == responseJson.total) {\r\n                                            this.ref.table.clearData();\r\n                                        }\r\n                                    }\r\n                                }\r\n                            },\r\n                            showModal: !this.state.showModal });            \r\n        }\r\n        return responseJson;\r\n    }\r\n\r\n    /* End: Handling of delete all rows in queries */\r\n\r\n    jiraRefreshStatus () {\r\n        const { dispatch, dsHome } = this.props;\r\n        if (dsHome && dsHome.dsJiraRefresh && dsHome.dsJiraRefresh.status === 'done') {\r\n            this.setState({ refresh: this.state.refresh + 1 });\r\n            dispatch({ type: dsConstants.JIRA_REFRESH_DELETE_TRACKER })\r\n        }\r\n\r\n    }\r\n\r\n    jiraRefreshHandler () {\r\n        const { dispatch, match, user } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let initialHeaderFilter = this.ref.table.getHeaderFilters();\r\n        this.setState({initialHeaderFilter});\r\n        dispatch(dsActions.refreshJira(dsName, dsView, user.user));\r\n    }\r\n\r\n    setFreezeColumn (e, column, freeze) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        // Last column freezing or unfreezing is no-op in our design. \r\n        if (currentDefs[currentDefs.length - 1].field === column.getField()) \r\n            return;\r\n\r\n        // Preserve the filters first. \r\n        let initialHeaderFilter = this.ref.table.getHeaderFilters();\r\n        this.setState({initialHeaderFilter});\r\n\r\n        if (freeze)\r\n            this.setState({frozenCol: column.getField(), refresh: this.state.refresh + 1});\r\n        else \r\n            this.setState({frozenCol: \"\", refresh: this.state.refresh + 1});\r\n        // Doesn't do the right thing. \r\n        // https://github.com/olifolkerd/tabulator/issues/2868\r\n        /*\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                currentDefs[j].frozen = freeze;\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {frozen: freeze});\r\n                break;\r\n            }\r\n        } */\r\n    }\r\n    freezeColumn (e, column) {\r\n        this.setFreezeColumn(e, column, true);\r\n    }\r\n    unfreezeColumn (e, column) {\r\n        this.setFreezeColumn(e, column, false)\r\n    }\r\n\r\n    toggleSingleFilter (e, column) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                newVal = currentDefs[j].headerFilter ? false : 'input';\r\n                try {\r\n                    // If the headerFilter has to be set, then set it from the backend value. \r\n                    if (newVal) {\r\n                        if (dsHome.dsViews[dsView].columnAttrs[j].headerFilterType)\r\n                            newVal = dsHome.dsViews[dsView].columnAttrs[j].headerFilterType;\r\n                        /*\r\n                        if (currentDefs[j].field === \"SlNo\") {\r\n                            currentDefs[j].headerFilter = 'number';\r\n                            newVal = 'number'\r\n                        }*/\r\n                    }\r\n                } catch (e) {}\r\n                currentDefs[j].headerFilter = newVal;\r\n                // Comment this line and uncomment couple of lines below to use setCOlumns\r\n                // if you don't like the header row width. \r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {headerFilter: newVal});\r\n            }\r\n        }\r\n        // uncomment this and comment updatecolumnDefinition above if you don't like header width. \r\n        //this.ref.table.setColumns(currentDefs);\r\n    }\r\n\r\n    handleColorPickerClose () {\r\n        this.setState({ showColorPicker: false });\r\n    }\r\n    handleColorPickerOnChangeComplete (color) {\r\n        console.log(\"Got back color: \", color);\r\n        this.setState({ showColorPicker: true, color: color.hex });\r\n    }\r\n    pickFillColorHandler (e, cell) {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        console.log(\"pickFillColorHandler called: \", e);\r\n        let _id = cell.getRow().getData()['_id'];\r\n        this.setState({ showColorPicker: true, colorPickerLeft: e.pageX, colorPickerTop: e.pageY });\r\n    }\r\n\r\n    \r\n    setColumnDefinitions () {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let headerMenuWithoutHide = [\r\n            {\r\n                label:\"Toggle Filters\",\r\n                action: this.toggleSingleFilter\r\n            },\r\n            {\r\n                label:\"Freeze\",\r\n                action: this.freezeColumn\r\n            },\r\n            {\r\n                label:\"Unfreeze\",\r\n                action: this.unfreezeColumn\r\n            }\r\n        ];\r\n        let headerMenuWithHide = [\r\n            {\r\n                label:\"Toggle Filters\",\r\n                action: this.toggleSingleFilter\r\n            },\r\n            {\r\n                label:\"Freeze\",\r\n                action: this.freezeColumn\r\n            },\r\n            {\r\n                label:\"Unfreeze\",\r\n                action: this.unfreezeColumn\r\n            },\r\n            {\r\n                label:\"<i class='fas fa-eye-slash'></i> Hide Column\",\r\n                action: this.hideColumn\r\n            },            \r\n            {\r\n                label:\"<i class='fas fa-eye'></i> Unhide all Columns\",\r\n                action: this.showAllCols\r\n            },            \r\n        ];\r\n        let cellContextMenu = [\r\n            {\r\n                label:\"Duplicate row & add...\",\r\n                action: this.duplicateAndAddRowHandler\r\n            },\r\n            {\r\n                label:\"Add empty row...\",\r\n                action: this.addRow\r\n            },\r\n            {\r\n                label:\"Copy cell to clipboard...\",\r\n                action: this.copyCellToClipboard\r\n            },\r\n            {\r\n                label:\"Generate slides...\",\r\n                action: this.startPreso\r\n            },\r\n            {\r\n                label:\"<i class='fas fa-eye-slash'></i> Hide Column\",\r\n                action: this.hideColumnFromCell\r\n            },            \r\n            {\r\n                label:\"<i class='fas fa-eye'></i> Unhide all Columns\",\r\n                action: this.showAllCols\r\n            },            \r\n            {\r\n                separator: true\r\n            },\r\n            /*\r\n            {\r\n                label:\"Pick fill color...\",\r\n                action: this.pickFillColorHandler\r\n            },\r\n            {\r\n                separator: true\r\n            },*/\r\n            {\r\n                label:\"Delete all rows in view...\",\r\n                action: this.deleteAllRowsInViewQuestion\r\n            },\r\n            {\r\n                label:\"Delete all rows in query...\",\r\n                action: this.deleteAllRowsInQuery\r\n            },\r\n            {\r\n                label:\"Delete row...\",\r\n                action: this.deleteRowQuestion\r\n            },\r\n        ];        \r\n        let columns = [];\r\n        for (let i = 0; i < dsHome.dsViews[dsView].columnAttrs.length; i++) {\r\n            let col = JSON.parse(JSON.stringify(dsHome.dsViews[dsView].columnAttrs[i]));\r\n            if (!this.isKey(col.field)) {\r\n                col.headerMenu = headerMenuWithHide;\r\n            } else {\r\n                col.headerMenu = headerMenuWithoutHide;\r\n                col.titleFormatter = (t, titleFormatterParams) => {\r\n                    return `<u>${t.getValue()}</u>`;\r\n                }\r\n            }\r\n            col.contextMenu = cellContextMenu;\r\n            col.editable = this.cellEditCheck;\r\n            // This handles all editing trigger logic. We always use \r\n            // the force edit feature here. \r\n            col.cellForceEditTrigger = this.cellForceEditTrigger;\r\n\r\n            if (this.state.showAllFilters) {\r\n                col.headerFilter = \"input\";\r\n                if (col.headerFilterType)\r\n                    col.headerFilter = col.headerFilterType;\r\n            }\r\n            // Do in a function so that you can attach to all formatters.\r\n            function doConditionalFormatting (cell, formatterParams) {\r\n                if (formatterParams && formatterParams.conditionalFormatting) {\r\n                    let rowData = cell.getRow().getData();\r\n                    for (let i = 0; i < formatterParams.conditionalExprs.length; i++) {\r\n                        // XXX: Add more error checking here\r\n                        let exprStr = formatterParams.conditionalExprs[i].split('->')[0].trim();\r\n                        let expr = QueryParsers.parseExpr(exprStr);\r\n                        if (QueryParsers.evalExpr(expr, rowData)) {\r\n                            let values = formatterParams.conditionalExprs[i].split('->')[1].trim();\r\n                            values = JSON.parse(values);\r\n                            if (values.backgroundColor) {\r\n                                cell.getElement().style.backgroundColor = values.backgroundColor;\r\n                            }\r\n                            if (values.color) {\r\n                                cell.getElement().style.color = values.color;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                }            \r\n            }\r\n            if (col.editor === \"input\") {\r\n                col.formatter = (cell, formatterParams) => {\r\n                    let value = cell.getValue();\r\n                    doConditionalFormatting(cell, formatterParams);\r\n                    if (value === undefined) return \"\";\r\n                    return value;\r\n                }\r\n                /* // This loses conditional formatting!\r\n                col.formatterClipboard = (cell, formatterParams) => {\r\n                    let value = cell.getValue();\r\n                    doConditionalFormatting(cell, formatterParams);\r\n                    if (value === undefined) return \"\";\r\n                    return value;\r\n                } */\r\n            }\r\n            if (col.editor === \"textarea\" || col.editor === \"codemirror\" || (col.editor === false && col.formatter === \"textarea\") || (col.editor === \"autocomplete\")) {\r\n                // By default, all textareas support markdown now. \r\n                col.formatter = (cell, formatterParams) => {\r\n                    //console.log(\"html formatter\");\r\n                    let value = cell.getValue();\r\n                    doConditionalFormatting(cell, formatterParams);\r\n                    if (value === undefined) return \"\";\r\n                    if (typeof value != \"string\") return value;\r\n                    value = MarkdownIt.render(value);\r\n                    return `<div style=\"white-space:normal;word-wrap:break-word;margin-bottom:-12px;\">${value}</div>`;\r\n                }\r\n                // Control comes here during full table clipboard copy.\r\n                // from this.myCopyToClipboard function call. \r\n                col.formatterClipboard = (cell, formatterParams) => {\r\n                    //console.log(\"html clipboard\");\r\n                    //console.log(\"cell element: \", cell.getElement());\r\n                    //console.log(\"cell field is: \", cell.getField());\r\n                    //console.log(\"cell cell is: \", cell.getRow().getCell(cell.getField())._cell.element);\r\n                    let h = cell.getRow().getCell(cell.getField())._cell.element;\r\n                    h = h.cloneNode(true);\r\n                    // Setting the color of the original cell on the encapsulating\r\n                    // element during copy-to-clipboard. \r\n                    cell.getElement().style.backgroundColor = h.style.backgroundColor;\r\n                    cell.getElement().style.color = h.style.color;\r\n                    //console.log(\"Returning, h: \", h);\r\n                    return h;\r\n                }\r\n\r\n                /* // This loses conditional formatting! (Solved above!)\r\n                col.formatterClipboard = (cell, formatterParams) => {\r\n                    let value = cell.getValue();\r\n                    console.log(\"Coming to formatterClipboard\");\r\n                    doConditionalFormatting(cell, formatterParams);\r\n                    if (value === undefined) return \"\";\r\n                    if (typeof value != \"string\") return value;\r\n                    value = MarkdownIt.render(value);\r\n                    return `<div style=\"white-space:normal;word-wrap:break-word;\">${value}</div>`;\r\n                }*/\r\n                col.variableHeight = true;\r\n                if (col.editor === \"textarea\" || col.editor === \"codemirror\") {\r\n                    col.editorParams.dsName = dsName;\r\n                    if (col.editor === \"textarea\")\r\n                        col.editor = MyTextArea;\r\n                    else \r\n                        col.editor = MyCodeMirror;\r\n                    let me = this;\r\n                    col.cellEditCancelled = (cell) => {\r\n                        if (!me.cellImEditing) {\r\n                            console.log(\"Normalize, Inside second editcancelled..\")\r\n                            cell.getRow().normalizeHeight();\r\n                        } else {\r\n                            console.log(\"Skipping normalize, Inside second editcancelled\");\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (col.editor === \"autocomplete\" && col.editorParams.multiselect) {\r\n                col.editor = MyAutoCompleter;\r\n                if (!col.editorParams.verticalNavigation) {\r\n                    col.editorParams.verticalNavigation = \"table\"\r\n                }\r\n            } else if (col.editor === \"autocomplete\" && !col.editorParams.multiselect) {\r\n                // To support conditional values, I'm using a copy. \r\n                col.editor = MySingleAutoCompleter;\r\n                if (!col.editorParams.verticalNavigation) {\r\n                    col.editorParams.verticalNavigation = \"table\"\r\n                }\r\n            }\r\n            if (col.editor === \"date\") {\r\n                col.editor = DateEditor;\r\n                col.editorParams = { format: \"MM/DD/YYYY\" };\r\n            }\r\n            columns.push(col);\r\n        }\r\n        // One more iteration to deal with frozen columns. \r\n        if (this.state.frozenCol) {\r\n            let beforeFrozen = true;\r\n            for (let i = 0; i < columns.length; i++) {\r\n                let col = columns[i];\r\n                if (beforeFrozen)\r\n                    col.frozen = true;\r\n                else\r\n                    delete col.frozen;\r\n                if (col.field === this.state.frozenCol) {\r\n                    beforeFrozen = false;\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = 0; i < columns.length; i++) {\r\n                let col = columns[i];\r\n                delete col.frozen;\r\n            }\r\n        }\r\n        return columns;\r\n    }\r\n\r\n    ajaxResponse (url, params, response) {\r\n        //console.log('ajaxResponse: ', response);\r\n        this.setState({ totalRecs: response.total});\r\n        return response; \r\n    }\r\n\r\n    // From tabulator\r\n    generateParamsList (data, prefix) {\r\n        var self = this,\r\n        output = [];\r\n    \r\n        prefix = prefix || \"\";\r\n    \r\n        if ( Array.isArray(data) ) {\r\n            data.forEach(function(item, i){\r\n                output = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n            });\r\n        }else if (typeof data === \"object\"){\r\n            for (var key in data){\r\n                output = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n            }\r\n        }else{\r\n            output.push({key:prefix, value:data});\r\n        }\r\n    \r\n        return output;    \r\n    }\r\n\r\n    serializeParams (params) {\r\n        var output = this.generateParamsList(params),\r\n        encoded = [];\r\n    \r\n        output.forEach(function(item){\r\n            encoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\r\n        });\r\n    \r\n        return encoded.join(\"&\");    \r\n    }\r\n\r\n    ajaxURLGenerator (url, config, params) {\r\n        if(url){\r\n            if(params && Object.keys(params).length) {\r\n                // Pick this from a checkbox. \r\n                params.chronology = this.state.chronologyDescending ? 'desc' : 'asc';\r\n                if(!config.method || config.method.toLowerCase() == \"get\"){\r\n                    config.method = \"get\";\r\n    \r\n                    url += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\r\n                }\r\n            }\r\n        }\r\n        return url;    \r\n    }\r\n\r\n    step2 () {\r\n        const { match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let s2 = '';\r\n        let fixedHeight = false, vh = undefined;\r\n        try {\r\n            fixedHeight = dsHome.dsViews[dsView].otherTableAttrs.fixedHeight;\r\n        } catch (e) {};\r\n        if (fixedHeight) {\r\n            vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\r\n            if (vh) { \r\n                vh -= 50;\r\n                vh = vh + \"px\"; \r\n            } else {\r\n                vh = undefined;\r\n            }\r\n        }\r\n        if (dsHome && dsHome.dsViews && dsHome.dsViews[dsView] && dsHome.dsViews[dsView].columns) {\r\n            let columns = this.setColumnDefinitions();\r\n            let me = this;\r\n            s2 = <Row>\r\n                        <div id=\"tabulator\">\r\n                            <MyTabulator\r\n                                columns={columns}\r\n                                data={[]}\r\n                                options={{\r\n                                    ajaxURL: `${config.apiUrl}/ds/view/${this.props.match.params.dsName}/${dsView}/${user.user}`,\r\n                                    ajaxURLGenerator:this.ajaxURLGenerator,\r\n                                    chronology: this.state.chronologyDescending,\r\n                                    forceRefresh: this.state.refresh,\r\n                                    //ajaxProgressiveLoad:\"load\",\r\n                                    //ajaxProgressiveLoadDelay: 200,\r\n                                    pagination:\"remote\",\r\n                                    paginationDataSent: {\r\n                                        page: 'page',\r\n                                        size: 'per_page' // change 'size' param to 'per_page'\r\n                                    },\r\n                                    paginationDataReceived: {\r\n                                        last_page: 'total_pages'\r\n                                    },\r\n                                    current_page: 1,\r\n                                    paginationSize: this.state.pageSize,\r\n                                    paginationSizeSelector: [5, 10, 25, 30, 50, 100, 500, 1000, 2000, 5000, true],\r\n                                    ajaxResponse: this.ajaxResponse,\r\n                                    ajaxError: function (error) {\r\n                                        console.log('ajaxError', error);\r\n                                    },\r\n                                    //movableColumns: true,\r\n                                    //keybindings: {\"navRight\": 39, \"navLeft\": 37},\r\n                                    cellEdited: this.cellEdited,\r\n                                    cellEditing: this.cellEditing,\r\n                                    cellEditCancelled: this.cellEditCancelled,\r\n                                    cellClick: this.cellClickEvents,\r\n                                    cellDblClick: this.cellClickEvents,\r\n                                    index: \"_id\",\r\n                                    ajaxSorting: true,\r\n                                    ajaxFiltering: true,\r\n                                    initialHeaderFilter: this.state.initialHeaderFilter,\r\n                                    initialSort: JSON.parse(JSON.stringify(this.state.initialSort)), // it'll mess up the state otherwise!\r\n                                    //columnResized: this.columnResized,\r\n                                    //columnVisibilityChanged: this.columnVisibilityChanged,\r\n                                    height: vh,\r\n                                    //virtualDomBuffer: 500,\r\n                                    //selectable: true,\r\n                                    //persistence: { columns: true },\r\n                                    //persistenceID: `${dsName}_${dsView}`,\r\n                                    clipboard: \"fullTableCopyOnly\",\r\n                                    clipboardCopyFormatter: (type, output) => {\r\n                                        if (type === 'html') {\r\n                                            output = me.fixImgSizeForClipboard(output);\r\n                                            \r\n                                            output=output.replaceAll('<th>', '<th style=\"border: 1px solid #ddd; padding: 8px; padding-top: 12px; padding-bottom: 12px; text-align: left; background-color: darkgreen;color: white;\">');\r\n                                            \r\n                                            output=output.replaceAll('<td>', '<td style=\"border: 1px solid #ddd; padding: 8px;\">')\r\n                                            // To replace the markup due to the highlightjs badges. The regex arrived by looking at the generated markup and some clever regex as usual. \r\n                                            //console.log(\"Output: \", output);\r\n                                            output=output.replace(/<pre class=\"code-badge-pre\"[\\s\\S]*?(<code [\\s\\S]*?<\\/code>)<\\/pre>/gi, '<pre>$1</pre>');\r\n                                            //console.log(\"Output: \", output);\r\n                                        }\r\n                                        return output;\r\n                                    },\r\n                                    rowFormatter: (row) => {\r\n                                        if(!row.getData()._id){\r\n                                            row.getElement().style.backgroundColor = \"lightGray\";\r\n                                        } else {\r\n                                            row.getElement().style.backgroundColor = \"white\";\r\n                                        }  \r\n                                    },\r\n                                    cellMouseEnter: (e, cell) => {\r\n                                        if (cell.getElement().style.backgroundColor !== \"#fcfcfc\") \r\n                                            cell.__dg__prevBgColor = cell.getElement().style.backgroundColor;\r\n                                        //cell.getElement().style.backgroundColor = \"#fcfcfc\";\r\n                                    },\r\n                                    cellMouseLeave: (e, cell) => {\r\n                                        //cell.getElement().style.backgroundColor = cell.__dg__prevBgColor;\r\n                                        delete cell.__dg__prevBgColor;\r\n                                    },\r\n                                    renderComplete: this.renderComplete\r\n                                }}\r\n                                innerref={this.recordRef}\r\n                                />\r\n                        </div>\r\n                    </Row>            \r\n        }\r\n        return s2;\r\n    }\r\n\r\n    processFilterChange (filter) {\r\n        const { match, history, dsHome } = this.props;\r\n        let dsView = match.params.dsView;\r\n        let newUrl = match.url;\r\n        \r\n        let urlWords = match.url.split('/');\r\n        //console.log('in processFilterChange: ', filter);\r\n        //console.log('urlWords: ', urlWords);\r\n        newUrl = '/' + urlWords[1] + '/' + urlWords[2] + '/' + urlWords[3];\r\n        if (filter) newUrl += '/' + filter;\r\n        let initialHeaderFilter = [], initialSort = [], filterColumnAttrs = {};\r\n        if (filter) {\r\n            try {\r\n                // Tabulator messes up the hdrSorters, so we give it a copy. \r\n                initialHeaderFilter = JSON.parse(JSON.stringify(dsHome.dsViews[dsView].filters[filter].hdrFilters));\r\n                initialSort = JSON.parse(JSON.stringify(dsHome.dsViews[dsView].filters[filter].hdrSorters));\r\n                if (dsHome.dsViews[dsView].filters[filter].filterColumnAttrs) {\r\n                    filterColumnAttrs = JSON.parse(JSON.stringify(dsHome.dsViews[dsView].filters[filter].filterColumnAttrs));\r\n                }\r\n                if (JSON.stringify(this.state.initialHeaderFilter) !== JSON.stringify(initialHeaderFilter) || JSON.stringify(this.state.initialSort) !== JSON.stringify(initialSort) || JSON.stringify(this.state.filterColumnAttrs) !== JSON.stringify(filterColumnAttrs)) {\r\n                    this.setState({ showAllFilters: true, filter, initialHeaderFilter, initialSort, filterColumnAttrs, refresh: this.state.refresh + 1});\r\n                    console.log('moving to :', newUrl);\r\n                    history.push(newUrl);\r\n                }\r\n            } catch (e) { \r\n                console.log(\"I am getting an exception...: \", e)\r\n                // At least note it down... \r\n                if (this.state.filter !== filter) {\r\n                    this.setState({ filter });\r\n                    history.push(newUrl);\r\n                }\r\n            }\r\n        } else {\r\n            initialHeaderFilter = [];\r\n            initialSort = [];\r\n            filterColumnAttrs = {};\r\n            if (this.state.initialHeaderFilter.length === 0 && this.state.initialSort.length === 0 && Object.keys(this.state.filterColumnAttrs).length === 0) {\r\n                console.log(\"should not be coming here\");\r\n            } else /*if (this.state.initialHeaderFilter !== initialHeaderFilter || this.state.initialSort !== initialSort)*/ {\r\n                // Don't set showAllFilters to true here. This is the fix for\r\n                // navigating correctly when you click on 'show filters' checkbox. \r\n                this.setState({ /*showAllFilters: true,*/ filter, initialHeaderFilter, initialSort, filterColumnAttrs, refresh: this.state.refresh + 1});\r\n            }\r\n            //console.log(\"match:\", match);\r\n            //console.log(\"location:\", this.props.location)\r\n            if (newUrl !== this.props.location.pathname)\r\n                history.push(newUrl);\r\n        }\r\n\r\n        this.applyFilterColumnAttrs();\r\n    }\r\n\r\n    applyFilterColumnAttrs () {\r\n        try {\r\n            console.log(\"Applying for: \", this.state.filter);\r\n            // process filterColumnAttrs\r\n            let cols = this.ref.table.getColumns();\r\n            if (Object.keys(this.state.filterColumnAttrs)) {\r\n                for (let field in this.state.filterColumnAttrs) {\r\n                    let fieldAttrs = this.state.filterColumnAttrs[field];\r\n                    for (let i = 0; i < cols.length; i++) {\r\n                        if (cols[i].getField() === field) {\r\n                            if (fieldAttrs.hidden && cols[i].isVisible()) {\r\n                                cols[i].hide();\r\n                            }\r\n                            if (cols[i].getWidth() !== fieldAttrs.width) {\r\n                                cols[i].setWidth(fieldAttrs.width);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                // When you clear a filter, filterColumnAttrs will be empty object.\r\n                // Then, you have to unhide everything. \r\n                this.showAllCols();\r\n            }\r\n        } catch (e) { console.log(\"Exception while applying for: \", this.state.filter, e) }\r\n    }\r\n\r\n    // Unused. \r\n    retainColumnAttrs () {\r\n        try {\r\n            let cols = this.ref.table.getColumns();\r\n            for (let field in this.state.currentColumnAttrs) {\r\n                let fieldAttrs = this.state.currentColumnAttrs[field];\r\n                for (let i = 0; i < cols.length; i++) {\r\n                    if (cols[i].getField() === field) {\r\n                        if (fieldAttrs.hidden && cols[i].isVisible()) {\r\n                            cols[i].hide();\r\n                        }\r\n                        if (cols[i].getWidth() !== fieldAttrs.width) {\r\n                            cols[i].setWidth(fieldAttrs.width);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (e) {}\r\n    }\r\n\r\n    fixOneTimeLocalStorage () {\r\n        const { match } = this.props;\r\n        // We don't want to store editor and headerFilter status in localStorage\r\n        // Only width is what we care about. Storing too much causes inconsistencies\r\n        // in initialization of the tabulator table. \r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let lsKey = `tabulator-${dsName}_${dsView}-columns`;\r\n        let lsValue = localStorage.getItem(lsKey);\r\n        lsValue = JSON.parse(lsValue);\r\n        if (this.state.firstTime && lsValue && lsValue.length) {\r\n            this.setState({ firstTime: false });\r\n            lsValue.forEach(element => {\r\n                delete element.editor;\r\n                delete element.headerFilter;\r\n                delete element.editorParams;\r\n                delete element.headerMenu;\r\n                delete element.contextMenu;\r\n            });\r\n            localStorage.setItem(lsKey, JSON.stringify(lsValue));\r\n        }\r\n    }\r\n    pageSizeChange (value) {\r\n        if (value && value.value) {\r\n            console.log(\"Setting pageSize to: \", value.value);\r\n            this.setState({pageSize: value.value});\r\n        } else {\r\n            console.log(\"Setting pageSize to: \", 20);\r\n            this.setState({pageSize: 20});\r\n        }\r\n    }\r\n\r\n    displayConnectedStatus () {\r\n        if (this.state.connectedState) {\r\n            return <span><i class='fas fa-server'></i> <b>Server connection:</b> <b style={{ 'color': 'darkgreen' }}>Connected</b></span>\r\n        } else {\r\n            return <span><i class='fas fa-server'></i> <b>Server connection:</b> <b style={{ 'color': 'red' }}>Disconnected</b></span>\r\n        }\r\n    }\r\n\r\n    render () {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let me = this; \r\n        this.fixOneTimeLocalStorage();\r\n        let jiraRefreshButton = \"\";\r\n        console.log(\"In DsView render..\");\r\n        if (document.title != dsName) {\r\n            document.title = dsName;\r\n        }        \r\n        try {\r\n            if (dsHome.dsViews[dsView].jiraConfig.jira) {\r\n                //jiraRefreshButton = <Button size=\"sm\" onClick={this.jiraRefreshHandler}> Refresh Jira </Button>\r\n                jiraRefreshButton = <> | <button className=\"btn btn-link\" onClick={this.jiraRefreshHandler}> <i class='fas fa-redo'></i> Refresh Jira </button> </>\r\n                if (dsHome && dsHome.dsJiraRefresh && dsHome.dsJiraRefresh.status === 'refreshing')\r\n                    //jiraRefreshButton = <Button size=\"sm\" onClick={this.jiraRefreshHandler}> Refresh Jira </Button>\r\n                    jiraRefreshButton = <> | <button className=\"btn btn-link\" onClick={this.jiraRefreshHandler} disabled> <i class='fas fa-redo'></i> Refresh Jira </button> </>\r\n            }\r\n        } catch (e) {};\r\n        let dsDescription = \"\"; \r\n        try {\r\n            let value = MarkdownIt.render(dsHome.dsViews[dsView].dsDescription.dsDescription);\r\n            dsDescription = <div dangerouslySetInnerHTML={{ __html: value }}/>\r\n        } catch (e) {};\r\n        this.processFilterChange(this.state.filter);\r\n        //this.retainColumnAttrs();\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                        <h3 style={{ 'float': 'center' }}> {match.params.dsName}</h3>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col md={10} sm={10} xs={10}> \r\n                        {dsDescription}\r\n                    </Col>\r\n                </Row>\r\n                {this.step1()}\r\n                <br/>\r\n                <Row>\r\n                    <button className=\"btn btn-link\" onClick={this.downloadXlsx}> <i class='fas fa-file-export'></i> Get xlsx </button> | \r\n                    <button className=\"btn btn-link\" onClick={this.copyToClipboard}> <i class='fas fa-clipboard'></i> Copy-to-clipboard </button> | \r\n                    <button className=\"btn btn-link\" onClick={this.addRow}> <i class='fas fa-plus'></i> Add Row </button>\r\n                    {/* \r\n                    <Button size=\"sm\" onClick={this.downloadXlsx}> Get xlsx </Button>\r\n                    <Button size=\"sm\" onClick={this.toggleFilters}> {this.state.filterButtonText} </Button>\r\n                    <Button size=\"sm\" onClick={this.toggleEditing}> {this.state.editingButtonText} </Button>\r\n                    <Button size=\"sm\" onClick={this.copyToClipboard}> Copy-to-clipbard </Button>\r\n                    <Button size=\"sm\" onClick={this.addRow}> Add Row </Button>\r\n                    */}\r\n                    {jiraRefreshButton}\r\n                    {this.cellEditStatus()}\r\n                    {this.addRowStatus()}\r\n                    {this.rowDeleteStatus()}\r\n                    {this.deleteAllRowsStatus()}\r\n                    {this.jiraRefreshStatus()}\r\n                </Row>\r\n                {/* \r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Desc order\" checked={this.state.chronologyDescending} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    let initialHeaderFilter = me.ref.table.getHeaderFilters();\r\n                                    me.setState({chronologyDescending: checked, initialHeaderFilter});\r\n                                    localStorage.setItem(\"chronologyDescending\", JSON.stringify(checked));\r\n                                }}/>\r\n                    </Col>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;1-click editing\" checked={this.state.singleClickEdit} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({singleClickEdit: checked});\r\n                                    localStorage.setItem(\"singleClickEdit\", JSON.stringify(checked));\r\n                                }}/>\r\n                    </Col>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Show filters\" checked={this.state.showAllFilters} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({showAllFilters: checked});\r\n                                    localStorage.setItem(\"showAllFilters\", JSON.stringify(checked));\r\n                                    me.toggleFilters();\r\n                                }}/>\r\n                    </Col>\r\n                    <Col md={3} sm={3} xs={3}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Disable Editing\" checked={this.state.disableEditing} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({disableEditing: checked});\r\n                                    localStorage.setItem(\"disableEditing\", JSON.stringify(checked));\r\n                                    me.toggleEditing();\r\n                                }}/>\r\n                    </Col>\r\n                </Row>\r\n                */}\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <input type=\"checkbox\" checked={this.state.chronologyDescending} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    let initialHeaderFilter = me.ref.table.getHeaderFilters();\r\n                                    me.setState({chronologyDescending: checked, initialHeaderFilter});\r\n                                    localStorage.setItem(\"chronologyDescending\", JSON.stringify(checked));\r\n                                }}/>\r\n                    &nbsp; Desc order <i class='fas fa-level-down-alt'></i>&nbsp;&nbsp;| &nbsp;\r\n\r\n                    <input type=\"checkbox\" label=\"&nbsp;1-click editing\" checked={this.state.singleClickEdit} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({singleClickEdit: checked});\r\n                                    localStorage.setItem(\"singleClickEdit\", JSON.stringify(checked));\r\n                                }}/>\r\n                    &nbsp; 1-click editing <i class='fas fa-bolt'></i>&nbsp;&nbsp;| &nbsp;\r\n\r\n                    <input type=\"checkbox\" label=\"&nbsp;Show filters\" checked={this.state.showAllFilters} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({showAllFilters: checked});\r\n                                    localStorage.setItem(\"showAllFilters\", JSON.stringify(checked));\r\n                                    me.toggleFilters();\r\n                                }}/>\r\n                    &nbsp; Show filters <i class='fas fa-filter'></i>&nbsp;&nbsp;| &nbsp;\r\n\r\n                    <input type=\"checkbox\" label=\"&nbsp;Disable Editing\" checked={this.state.disableEditing} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({disableEditing: checked});\r\n                                    localStorage.setItem(\"disableEditing\", JSON.stringify(checked));\r\n                                    me.toggleEditing();\r\n                                }}/>\r\n                    &nbsp; Disable Editing <i class='fas fa-ban'></i>&nbsp;&nbsp;\r\n\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    <Route exact path={`${match.path}/:filter`} render={(props) => {\r\n                        let filter = props.match.params.filter;\r\n                        if (filter !== me.state.filter) {\r\n                            me.processFilterChange(filter);\r\n                        }\r\n                    }} />\r\n                }\r\n                <FilterControls show={me.state.showAllFilters} dsName={dsName} dsView={dsView} tableRef={me.ref} onFilterChange={me.processFilterChange} defaultValue={me.state.filter}/>    \r\n                <br/>\r\n                <Row>\r\n                <Col md={12} sm={12} xs={12}> \r\n                    <b><i class='fas fa-clone'></i> Total records: {this.state.totalRecs} | </b>\r\n                    <Link to={`/dsEditLog/${match.params.dsName}`} target=\"_blank\"><i class='fas fa-file-alt'></i> <b>Edit-log</b></Link> |&nbsp;\r\n                    <Link to={`/dsViewEdit/${match.params.dsName}/${match.params.dsView}`} target=\"_blank\"><i class='fas fa-edit'></i> <b>Edit-view</b></Link> |&nbsp;\r\n                    <Link to={`/dsBulkEdit/${match.params.dsName}`} target=\"_blank\"><i class='fas fa-edit'></i> <b>Bulk-edit</b></Link> |&nbsp;\r\n                    <Link to={`/dsAttachments/${match.params.dsName}`} target=\"_blank\"><i class='fas fa-file-alt'></i> <b>Attachments</b></Link> |&nbsp;\r\n                    {this.displayConnectedStatus()}\r\n                </Col>\r\n                </Row>\r\n                {this.step2()}\r\n                <Modal show={this.state.showModal}\r\n                    onClose={this.toggleModal} title={this.state.modalTitle} cancel={this.state.modalCancel} ok={this.state.modalOk}>\r\n                    {this.state.modalQuestion}\r\n                </Modal>\r\n                {this.state.showColorPicker ? <ColorPicker left={this.state.colorPickerLeft} top={this.state.colorPickerTop} color={this.state.color} onChangeComplete={this.handleColorPickerOnChangeComplete} handleClose={this.handleColorPickerClose}/>: ''}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cDsView = connect(mapStateToProps)(DsView);\r\n\r\n\r\nexport default cDsView\r\n","'use strict'\r\n\r\nimport React from 'react'\r\nimport { ChromePicker, SketchPicker, GithubPicker, PhotoshopPicker, CompactPicker, SwatchesPicker } from 'react-color'\r\n\r\nclass ColorPicker extends React.Component {\r\n\r\n  render() {\r\n    let { left, top, color, handleClose, onChangeComplete } = this.props;\r\n    console.log(\"left, top: \", left, top);\r\n    const popover = {\r\n      position: 'absolute',\r\n      zIndex: 2,\r\n      left,\r\n      top\r\n    }\r\n    const cover = {\r\n      position: 'fixed',\r\n      top: '0px',\r\n      right: '0px',\r\n      bottom: '0px',\r\n      left: '0px',\r\n    }\r\n    return (\r\n      <div>\r\n        <div style={ popover }>\r\n          <div style={ cover } onClick={ handleClose }/>\r\n          <SketchPicker color={ color } onChangeComplete={ onChangeComplete }/>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ColorPicker","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport Select from 'react-select';\r\nimport { dsConstants } from '../../constants';\r\n\r\nclass FilterControls extends React.Component {\r\n    constructor (props) {\r\n        super (props)\r\n        this.state = {\r\n            save: false, \r\n            saveName: null,\r\n            saveErrorMsg: '', \r\n            saveDescription: null,\r\n\r\n            saveAsNew: false,\r\n            saveAsNewName: '',\r\n            saveAsNewDescription: '',\r\n            saveAsNewErrorMsg: '',\r\n\r\n            deleteFilter: false,\r\n            deleteFilterErrorMsg: ''\r\n        };\r\n        this.deleteFilterControls = this.deleteFilterControls.bind(this);\r\n        this.saveControls = this.saveControls.bind(this);\r\n        this.saveAsNewControls = this.saveAsNewControls.bind(this);\r\n    }\r\n\r\n    deleteFilterControls () {\r\n        let returnJsx = \"\";\r\n        let me = this;\r\n        const { dispatch, dsName, dsView, user, dsHome } = this.props;\r\n        let name = this.props.defaultValue;\r\n\r\n        if (this.state.deleteFilter) {\r\n            try {\r\n                if (dsHome.dsFilterDeletes[dsView].status === 'success' && dsHome.dsFilterDeletes[dsView].serverStatus.status === 'success' && this.state.deleteFilter) {\r\n                    dispatch({ type: dsConstants.CLEAR_DELETE_FILTER_TRACKER });\r\n                    this.setState({ deleteFilter: false });\r\n                }\r\n            } catch (e) {}\r\n\r\n            returnJsx = \r\n            <>\r\n            <Row>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <b>Delete:</b> {name} ? &nbsp;&nbsp; \r\n                    <Button size=\"sm\" onClick={() => {\r\n                        if (!me.props.tableRef) return;\r\n                        if (!this.props.defaultValue) {\r\n                            // Set an error message to first select from dropdown\r\n                            return;\r\n                        }\r\n                        me.setState({ deleteFilterErrorMsg: '' });\r\n                        console.log(\"State: \", me.state);\r\n                        dispatch(dsActions.deleteFilter(dsName, dsView, user.user, { name }));\r\n                        setTimeout(() => {dispatch(dsActions.loadColumnsForUserView(dsName, dsView, user.user));}, 500);\r\n\r\n                        me.setState({ saveName: null, saveDescription: null })\r\n                        me.props.onFilterChange(null);\r\n                    }}> \r\n                        Confirm delete\r\n                    </Button>\r\n                    {this.state.deleteFilterErrorMsg && \r\n                    <b style={{color: \"red\"}}> {this.state.deleteFilterErrorMsg} </b>}\r\n                </Col>\r\n            </Row>\r\n            </>\r\n        }\r\n        return returnJsx;\r\n    }\r\n\r\n\r\n    saveControls () {\r\n        let returnJsx = \"\";\r\n        let me = this;\r\n        const { dispatch, dsName, dsView, user, dsHome } = this.props;\r\n        let name = this.props.defaultValue;\r\n\r\n        if (this.state.save) {\r\n            try {\r\n                // This is way too subtle. Initially, we set saveDescription to 'null. \r\n                // Then, we initialize it just once when we have the store ready. \r\n                if (this.state.saveName !== name) {\r\n                    this.setState({ saveName: name, saveDescription: dsHome.dsViews[dsView].filters[name].description});\r\n                }\r\n            } catch (e) { return \"\" }\r\n            try {\r\n                if (dsHome.dsFilterEdits[dsView].status === 'fail' || dsHome.dsFilterEdits[dsView].serverStatus.status === 'fail') {\r\n                    let errMsg = 'save failed';\r\n                    if (this.state.saveErrorMsg !== errMsg)\r\n                        this.setState({ saveErrorMsg: errMsg });\r\n                }\r\n            } catch (e) {}\r\n            try {\r\n                if (dsHome.dsFilterEdits[dsView].status === 'success' && dsHome.dsFilterEdits[dsView].serverStatus.status === 'success' && this.state.save) {\r\n                    dispatch({ type: dsConstants.CLEAR_EDIT_FILTER_TRACKER });\r\n                    this.setState({ save: false });\r\n                }\r\n            } catch (e) {}\r\n            returnJsx = \r\n            <>\r\n            <Row>\r\n                <Col md={2} sm={2} xs={2}> \r\n                    <b>Saving to:</b>\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    {name}\r\n                </Col>\r\n            </Row> <br/>\r\n            <Row>\r\n                <Col md={2} sm={2} xs={2}> \r\n                    <b>Description: </b>\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control as=\"textarea\" size=\"sm\" rows=\"3\" value={this.state.saveDescription} onChange={(event) => {\r\n                        let value = event.target.value;\r\n                        me.setState({saveDescription: value})\r\n                    }} />\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <Button size=\"sm\" onClick={() => {\r\n                        if (!me.props.tableRef) return;\r\n                        if (!this.props.defaultValue) {\r\n                            // Set an error message to first select from dropdown\r\n                            return;\r\n                        }\r\n                        me.setState({ saveErrorMsg: '' });\r\n                        let hdrFilters = me.props.tableRef.table.getHeaderFilters();\r\n                        let hdrSortersTmp = me.props.tableRef.table.getSorters();\r\n                        let hdrSorters = [];\r\n                        for (let i = 0; i < hdrSortersTmp.length; i++) {\r\n                            let sorter = {};\r\n                            sorter.column = hdrSortersTmp[i].field;\r\n                            sorter.dir = hdrSortersTmp[i].dir;\r\n                            hdrSorters.push(sorter);\r\n                        }\r\n                        let filterColumnAttrs = {};\r\n                        let cols = me.props.tableRef.table.getColumns();\r\n                        for (let i = 0; i < cols.length; i++) {\r\n                            let field = cols[i].getField();\r\n                            let attrsForField = {};\r\n                            if (!cols[i].isVisible()) {\r\n                                attrsForField.hidden = true;\r\n                            }\r\n                            attrsForField.width = cols[i].getWidth();\r\n                            filterColumnAttrs[field] = attrsForField;\r\n                        }\r\n                \r\n                        console.log(\"State: \", me.state);\r\n                        let newFilter = {};\r\n                        newFilter.name = name; \r\n                        newFilter.description = me.state.saveDescription;\r\n                        newFilter.hdrFilters = hdrFilters;\r\n                        newFilter.hdrSorters = hdrSorters;\r\n                        newFilter.filterColumnAttrs = filterColumnAttrs;\r\n                        console.log(\"Save Filter object: \", newFilter);\r\n                        dispatch(dsActions.editFilter(dsName, dsView, user.user, newFilter));\r\n                        setTimeout(() => {dispatch(dsActions.loadColumnsForUserView(dsName, dsView, user.user));}, 500);\r\n                    }}> \r\n                        Save\r\n                    </Button>\r\n                    {this.state.saveErrorMsg && \r\n                    <b style={{color: \"red\"}}> {this.state.saveErrorMsg} </b>}\r\n                </Col>\r\n            </Row>\r\n            </>\r\n\r\n        }\r\n        return returnJsx;\r\n    }\r\n\r\n    saveAsNewControls () {\r\n        let returnJsx = \"\";\r\n        let me = this;\r\n        const { dispatch, dsName, dsView, user, dsHome } = this.props;\r\n\r\n        if (this.state.saveAsNew) {\r\n\r\n            try {\r\n                if (dsHome.dsFilterAdds[dsView].status === 'fail' || dsHome.dsFilterAdds[dsView].serverStatus.status === 'fail') {\r\n                    let errMsg = 'save as new failed, try with new name maybe. Or try \"save\" instead';\r\n                    if (this.state.saveAsNewErrorMsg !== errMsg)\r\n                        this.setState({ saveAsNewErrorMsg: errMsg });\r\n                }\r\n            } catch (e) {}\r\n            try {\r\n                if (dsHome.dsFilterAdds[dsView].status === 'success' && dsHome.dsFilterAdds[dsView].serverStatus.status === 'success' && this.state.saveAsNew) {\r\n                    dispatch({ type: dsConstants.CLEAR_ADD_FILTER_TRACKER });\r\n                    this.setState({ saveAsNew: false, saveAsNewName: '', saveAsNewDescription: '' });\r\n                }\r\n            } catch (e) {}\r\n\r\n            returnJsx = \r\n            <>\r\n            <Row>\r\n                <Col md={2} sm={2} xs={2}> \r\n                    <b>Filter name:</b>\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"text\" size=\"sm\" value={this.state.saveAsNewName} onChange={(event) => {        \r\n                        let value = event.target.value;\r\n                        if (!value || (value.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/g) && value.length <= 64)) {\r\n                            me.setState({ saveAsNewName: event.target.value });\r\n                        }\r\n                    }} />\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <Button size=\"sm\" onClick={() => {\r\n                        if (!me.props.tableRef) return;\r\n                        if (!this.state.saveAsNewName) {\r\n                            me.setState({ saveAsNewErrorMsg: 'Name is mandatory' });\r\n                            return;\r\n                        }\r\n                        me.setState({ saveAsNewErrorMsg: '' });\r\n                        let hdrFilters = me.props.tableRef.table.getHeaderFilters();\r\n                        let hdrSortersTmp = me.props.tableRef.table.getSorters();\r\n                        let hdrSorters = [];\r\n                        for (let i = 0; i < hdrSortersTmp.length; i++) {\r\n                            let sorter = {};\r\n                            sorter.column = hdrSortersTmp[i].field;\r\n                            sorter.dir = hdrSortersTmp[i].dir;\r\n                            hdrSorters.push(sorter);\r\n                        }\r\n                        let filterColumnAttrs = {};\r\n                        let cols = me.props.tableRef.table.getColumns();\r\n                        for (let i = 0; i < cols.length; i++) {\r\n                            let field = cols[i].getField();\r\n                            let attrsForField = {};\r\n                            if (!cols[i].isVisible()) {\r\n                                attrsForField.hidden = true;\r\n                            }\r\n                            attrsForField.width = cols[i].getWidth();\r\n                            filterColumnAttrs[field] = attrsForField;\r\n                        }\r\n                \r\n                        let newFilter = {};\r\n                        newFilter.name = this.state.saveAsNewName;\r\n                        newFilter.description = this.state.saveAsNewDescription;\r\n                        newFilter.hdrFilters = hdrFilters;\r\n                        newFilter.hdrSorters = hdrSorters;\r\n                        newFilter.filterColumnAttrs = filterColumnAttrs;\r\n                        console.log(\"New Filter object: \", newFilter);\r\n                        dispatch(dsActions.addFilter(dsName, dsView, user.user, newFilter)); \r\n                        setTimeout(() => {dispatch(dsActions.loadColumnsForUserView(dsName, dsView, user.user));}, 500);\r\n\r\n                        // XXX: Make this a function pls and reuse it. \r\n                        // This is needed so that we set this again for new selection\r\n                        me.setState({ saveName: null, saveDescription: null })\r\n                        console.log(\"Calling onFilterChange with:\", this.state.saveAsNewName)\r\n                        me.props.onFilterChange(this.state.saveAsNewName);\r\n\r\n                        }}> \r\n                        Create \r\n                    </Button>\r\n                    {this.state.saveAsNewErrorMsg && \r\n                    <b style={{color: \"red\"}}> {this.state.saveAsNewErrorMsg} </b>}\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col md={2} sm={2} xs={2}> \r\n                    <b>Description: </b>\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control as=\"textarea\" size=\"sm\" rows=\"3\" value={this.state.saveAsNewDescription} onChange={(event) => {\r\n                        let value = event.target.value;\r\n                        me.setState({saveAsNewDescription: value})\r\n                    }} />\r\n                </Col>\r\n            </Row>\r\n            </>\r\n        }\r\n        return returnJsx;\r\n    }\r\n\r\n    render () {\r\n        const { dispatch, dsName, dsView, user, dsHome } = this.props;\r\n        let me = this;\r\n        if (!this.props.show) {\r\n            me.props.onFilterChange(null);\r\n            return null;\r\n        }\r\n        let filterOptions = [];\r\n        let defaultValueIdx = -1;\r\n        let filterDescription = \"\";\r\n        try {\r\n            let keys = Object.keys(dsHome.dsViews[dsView].filters);\r\n            for (let i = 0; i < keys.length; i++) {\r\n                if (keys[i] === '_id') continue;\r\n                let row = {};\r\n                row.value = keys[i];\r\n                row.label = keys[i];\r\n                if (this.props.defaultValue === keys[i]) {\r\n                    defaultValueIdx = i - 1; // because we are skipping _id\r\n                    console.log(\"Setting defaultValueIdx to:\", defaultValueIdx);\r\n                    filterDescription = dsHome.dsViews[dsView].filters[keys[i]].description;\r\n                }\r\n                filterOptions.push(row);\r\n            }\r\n        } catch (e) {}\r\n        // https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html\r\n        return (\r\n            <>\r\n            <br/>\r\n            <Row>\r\n                    <Col md={1} sm={1} xs={1}> \r\n                    <b>Filters:</b>\r\n                    </Col>\r\n                    <Col md={8} sm={8} xs={8}> \r\n                    <Select key={`my_unique_select_key__${JSON.stringify(filterOptions[defaultValueIdx])}`} className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" defaultValue={filterOptions[defaultValueIdx]} value={filterOptions[defaultValueIdx]} options={filterOptions} onChange={(value) => { \r\n                        // This is needed so that we set this again for new selection\r\n                        me.setState({ saveName: null, saveDescription: null })\r\n                        if (value) {\r\n                            me.props.onFilterChange(value.value)\r\n                        } else {\r\n                            me.setState({ saveAsNew: false, save: false });\r\n                            me.props.onFilterChange(null);\r\n                        }\r\n                    }}/>\r\n                    </Col>\r\n            </Row>\r\n            {filterDescription && <br/>}\r\n            <Row>\r\n                {filterDescription && \r\n                    <Col md={1} sm={1} xs={1}> \r\n                    <b>Filter Desc:</b>\r\n                    </Col>\r\n                }\r\n                {filterDescription &&\r\n                    <Col md={8} sm={8} xs={8}>\r\n                        {filterDescription}\r\n                    </Col>\r\n                }\r\n            </Row>\r\n            {filterDescription && <br/>}\r\n            <Row>\r\n                <button className=\"btn btn-link\" onClick={() => { me.setState({ saveAsNew: !this.state.saveAsNew, save: false, deleteFilter: false }) }}> <i class='fas fa-filter'></i> Save-as-new-filter </button> | \r\n                <button className=\"btn btn-link\" onClick={() => { me.setState({ save: !this.state.save, saveAsNew: false, deleteFilter: false }) }}> <i class='fas fa-save'></i> Save </button> | \r\n                <button className=\"btn btn-link\" onClick={() => { me.setState({ deleteFilter: !this.state.deleteFilter, save: false, saveAsNew: false }) }}> <i class='fas fa-trash-alt'></i> Delete-filter </button>\r\n            </Row>\r\n            {this.saveAsNewControls()}\r\n            {this.saveControls()}\r\n            {this.deleteFilterControls()}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nFilterControls.propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    onFilterChange: PropTypes.func.isRequired,\r\n    tableRef: PropTypes.object.isRequired,\r\n    show: PropTypes.bool,\r\n    dsName: PropTypes.string.isRequired,\r\n    dsView: PropTypes.string.isRequired,\r\n    children: PropTypes.node,\r\n    defaultValue: PropTypes.string\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cFilterControls = connect(mapStateToProps)(FilterControls);\r\n\r\nexport default cFilterControls;","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();","import { userConstants } from '../constants';\r\n\r\nlet user = JSON.parse(localStorage.getItem('user'));\r\nconst initialState = user ? { loggedIn: true, user } : {};\r\n\r\nexport function authentication(state = initialState, action) {\r\n  switch (action.type) {\r\n    case userConstants.LOGIN_REQUEST:\r\n      return {\r\n        loggingIn: true,\r\n        user: action.user\r\n      };\r\n    case userConstants.LOGIN_SUCCESS:\r\n      return {\r\n        loggedIn: true,\r\n        user: action.user\r\n      };\r\n    case userConstants.LOGIN_FAILURE:\r\n      return {};\r\n    case userConstants.LOGOUT:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}","import { allDsConstants } from '../constants';\r\n\r\nconst initialState = {};\r\n\r\nexport function allDs (state = initialState, action) {\r\n    switch (action.type) {\r\n        case allDsConstants.LOAD_DSLIST_REQUEST:\r\n            return {\r\n                dsListStatus: 'loading'\r\n            }\r\n        case allDsConstants.LOAD_DSLIST_SUCCESS:\r\n            return {\r\n                dsListStatus: 'success',\r\n                dsList : action.dsList\r\n            }\r\n        case allDsConstants.LOAD_DSLIST_FAILURE:\r\n            return {\r\n                dsListStatus: 'fail'\r\n            }\r\n        case allDsConstants.SEEKING_DELETE_CONFIRM:\r\n            let confirmObj = {};\r\n            if ( state.deleteConfirm )\r\n                confirmObj = state.deleteConfirm;\r\n            confirmObj[action.dsName] = 1;\r\n            return {\r\n                ...state,\r\n                deleteConfirm: confirmObj\r\n            }\r\n        case allDsConstants.DELETE_DS_REQUEST: \r\n            let deleteInProgressObj = {};\r\n            if ( state.deleteInProgress )\r\n                deleteInProgressObj = state.deleteInProgress;\r\n            deleteInProgressObj[action.dsName] = 1;\r\n            return {\r\n                ...state,\r\n                deleteInProgress: deleteInProgressObj\r\n            }\r\n        case allDsConstants.DELETE_DS_SUCCESS: \r\n            {\r\n                delete state.deleteInProgress[action.dsName];\r\n                delete state.deleteConfirm[action.dsName];\r\n                let dbList = state.dsList.dbList;\r\n                let prunedDbList = [];\r\n                for (let i = 0; i < dbList.length; i++) {\r\n                    if (dbList[i].name === action.dsName)\r\n                        continue;\r\n                    prunedDbList.push(dbList[i]);\r\n                }\r\n                state.dsList.dbList = prunedDbList;\r\n                return {\r\n                    ...state,\r\n                }\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux';\r\n\r\nimport { authentication } from './authentication.reducer';\r\nimport { registration } from './registration.reducer';\r\nimport { users } from './users.reducer';\r\nimport { alert } from './alert.reducer';\r\nimport { newDs } from '../routes/home/NewDsStoreMgmt';\r\nimport { dsHome } from './dsHome.reducer';\r\nimport { allDs } from './allDs.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  authentication,\r\n  registration,\r\n  users,\r\n  alert,\r\n  allDs,\r\n  newDs,\r\n  dsHome\r\n});\r\n\r\nexport default rootReducer;","import { userConstants } from '../constants';\r\n\r\nexport function registration(state = {}, action) {\r\n  switch (action.type) {\r\n    case userConstants.REGISTER_REQUEST:\r\n      return { registering: true };\r\n    case userConstants.REGISTER_SUCCESS:\r\n      return {};\r\n    case userConstants.REGISTER_FAILURE:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}","import { userConstants } from '../constants';\r\n\r\nexport function users(state = {}, action) {\r\n  switch (action.type) {\r\n    case userConstants.GETALL_REQUEST:\r\n      return {\r\n        loading: true\r\n      };\r\n    case userConstants.GETALL_SUCCESS:\r\n      return {\r\n        items: action.users\r\n      };\r\n    case userConstants.GETALL_FAILURE:\r\n      return { \r\n        error: action.error\r\n      };\r\n    case userConstants.DELETE_REQUEST:\r\n      // add 'deleting:true' property to user being deleted\r\n      return {\r\n        ...state,\r\n        items: state.items.map(user =>\r\n          user.id === action.id\r\n            ? { ...user, deleting: true }\r\n            : user\r\n        )\r\n      };\r\n    case userConstants.DELETE_SUCCESS:\r\n      // remove deleted user from state\r\n      return {\r\n        items: state.items.filter(user => user.id !== action.id)\r\n      };\r\n    case userConstants.DELETE_FAILURE:\r\n      // remove 'deleting:true' property and add 'deleteError:[error]' property to user \r\n      return {\r\n        ...state,\r\n        items: state.items.map(user => {\r\n          if (user.id === action.id) {\r\n            // make copy of user without 'deleting:true' property\r\n            const { deleting, ...userCopy } = user;\r\n            // return copy of user with 'deleteError:[error]' property\r\n            return { ...userCopy, deleteError: action.error };\r\n          }\r\n\r\n          return user;\r\n        })\r\n      };\r\n    default:\r\n      return state\r\n  }\r\n}","import { alertConstants } from '../constants';\r\n\r\nexport function alert(state = {}, action) {\r\n  switch (action.type) {\r\n    case alertConstants.SUCCESS:\r\n      return {\r\n        type: 'alert-success',\r\n        message: action.message\r\n      };\r\n    case alertConstants.ERROR:\r\n      return {\r\n        type: 'alert-danger',\r\n        message: action.message\r\n      };\r\n    case alertConstants.CLEAR:\r\n      return {};\r\n    default:\r\n      return state\r\n  }\r\n}","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { createLogger } from \"redux-logger\";\r\nimport rootReducer from '../reducers';\r\n\r\nconst configureStore = () => {\r\n    const middlewares = [ thunk ];\r\n\r\n\r\n    if ( process.env.NODE_ENV !== \"production\" ) {\r\n        middlewares.push( createLogger() );\r\n    }\r\n\r\n\r\n    /* eslint-disable no-underscore-dangle */\r\n    return createStore(\r\n        rootReducer,\r\n        window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n        applyMiddleware( ...middlewares ),\r\n    );\r\n    /* eslint-enable */\r\n};\r\n\r\nexport const store = configureStore();\r\n","export function authHeader() {\r\n    // return authorization header with jwt token\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n\r\n    if (user && user.token) {\r\n        return { 'Authorization': 'Bearer ' + user.token };\r\n    } else {\r\n        return {};\r\n    }\r\n}","export * from './history';\r\nexport * from './store';\r\nexport * from './auth-header';","\r\nfunction parseExpr (exprStr) {\r\n    let expr = {};\r\n    // Example strings. \r\n    // '\"Team\" = \"VIT\"'\r\n    // ' \"Team\" = \"SIT\" '\r\n    // \"Team\" = \"VIT\" (simpler)\r\n    exprStr = exprStr.replace(/^\\s*'/, '');\r\n    exprStr = exprStr.replace(/\\s*'$/, '');\r\n    let m = exprStr.match(/^\\s*\"(.*?)\"\\s*=\\s*\"(.*?)\"\\s*$/);\r\n    if (m && (m.length >= 2)) {\r\n        expr[\"=\"] = {};\r\n        let key = m[1], value = m[2];\r\n        expr[\"=\"].key = key;\r\n        expr[\"=\"].value = value;\r\n    }\r\n    m = exprStr.match(/^\\s*\"(.*?)\"\\s*=~\\s*\"(.*?)\"\\s*$/);\r\n    if (m && (m.length >= 2)) {\r\n        expr[\"=~\"] = {};\r\n        let key = m[1], regex = m[2];\r\n        expr[\"=~\"].key = key;\r\n        expr[\"=~\"].regex = regex;\r\n    }\r\n    return expr;\r\n}\r\n\r\nfunction evalExpr (expr, data) {\r\n    for (let key in expr) {\r\n        if (key === \"=\") {\r\n            let equalsExpr = expr[key];\r\n            let rowValue = data[equalsExpr[\"key\"]];\r\n            if (rowValue === equalsExpr[\"value\"]) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        if (key === \"=~\") {\r\n            let equalsExpr = expr[key];\r\n            let rowValue = data[equalsExpr[\"key\"]];\r\n            let regex = new RegExp(equalsExpr[\"regex\"], \"i\");\r\n            if (regex.test(rowValue)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        // For other operators like 'and', 'or' - recurse here. \r\n    }\r\n}\r\n\r\nexport default {\r\n    parseExpr, \r\n    evalExpr\r\n}","import React, { Component } from 'react'\r\nimport { ReactTabulator } from 'react-tabulator';\r\n\r\nclass MyTabulator extends Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.recordTabRef = this.recordTabRef.bind(this);\r\n        this.ref = null;\r\n    }\r\n    // Without this, an edit of a cell used to lose the\r\n    // scroll position of the ReactTabulator. Paging is not an issue\r\n    shouldComponentUpdate (nextProps, nextState) {\r\n        //console.log(\"Current Options: \", this.props.options);\r\n        //console.log(\"Next options: \", nextProps.options);\r\n        if (this.props.options.paginationSize !== nextProps.options.paginationSize || \r\n            this.props.options.chronology !== nextProps.options.chronology || \r\n            this.props.options.forceRefresh !== nextProps.options.forceRefresh ||\r\n            this.props.options.height !== nextProps.options.height) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    componentDidUpdate () {\r\n        //console.log(\"Component did update...: \", this.props.options);\r\n    }\r\n    componentWillUnmount () {\r\n        this.ref = null;\r\n    }\r\n    recordTabRef (ref) {\r\n        // innerref is there purely to forward the ref back to caller. \r\n        const { innerref } = this.props;\r\n        this.ref = ref;\r\n        innerref(ref);\r\n        return true;\r\n    }\r\n    render () {\r\n        return <ReactTabulator {...this.props} ref={this.recordTabRef} />\r\n    }\r\n}\r\n\r\nexport default MyTabulator","var map = {\n\t\"./locale\": 264,\n\t\"./locale.js\": 264\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 602;","function MyTextArea(cell, onRendered, success, cancel, editorParams) {\r\n    var self = this,\r\n        cellValue = cell.getValue(),\r\n        vertNav = editorParams.verticalNavigation || \"hybrid\",\r\n        value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\r\n        count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\r\n        input = document.createElement(\"textarea\"),\r\n        scrollHeight = 0;\r\n\r\n    //create and style input\r\n    input.style.display = \"block\";\r\n    input.style.padding = \"2px\";\r\n    input.style.height = \"100%\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n    input.style.whiteSpace = \"pre-wrap\";\r\n    input.style.resize = \"none\";\r\n\r\n    if (editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\") {\r\n        for (let key in editorParams.elementAttributes) {\r\n            if (key.charAt(0) == \"+\") {\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            } else {\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    input.value = value;\r\n\r\n    onRendered(function () {\r\n        input.focus({\r\n            preventScroll: true\r\n        });\r\n        input.style.height = \"100%\";\r\n    });\r\n\r\n    function onChange(e) {\r\n\r\n        if (((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue) {\r\n\r\n            if (success(input.value)) {\r\n                cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n            }\r\n            /*\r\n            setTimeout(function () {\r\n                cell.getRow().normalizeHeight();\r\n            }, 300) */\r\n        } else {\r\n            cancel();\r\n        }\r\n    }\r\n\r\n    //submit new value on blur or change\r\n    input.addEventListener(\"change\", onChange);\r\n    input.addEventListener(\"blur\", onChange);\r\n    // This is how you can retain focus while editing. \r\n    // You also have to disable blur I think. \r\n    // This is experimental. \r\n    //window.addEventListener(\"mousedown\", onChange);\r\n    //input.addEventListener(\"mousedown\", function (e) {\r\n    //    e.stopPropagation();\r\n    //})\r\n    input.addEventListener(\"keyup\", function () {\r\n\r\n        // Jayaram: 8/23 change, only set height if it is different in the\r\n        // below block. \r\n        //input.style.height = \"\";\r\n\r\n        var heightNow = input.scrollHeight;\r\n\r\n        //input.style.height = heightNow + \"px\";\r\n\r\n        if (!scrollHeight) scrollHeight = heightNow;\r\n        if (heightNow != scrollHeight) {\r\n            console.log(\"ScrollHeight, heightNow\", scrollHeight, heightNow);\r\n            input.style.height = heightNow + \"px\";\r\n            scrollHeight = heightNow;\r\n            cell.getRow().normalizeHeight();\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"keydown\", function (e) {\r\n\r\n        switch (e.keyCode) {\r\n            case 13:\r\n                if (e.ctrlKey) {\r\n                    onChange(e);\r\n                }\r\n                break;\r\n            case 27:\r\n                cancel();\r\n                break;\r\n\r\n            // Jayaram: Copied from 'textarea' handling within the source. \r\n            // Added the below keycodes (Home/End: 35/36) to not leave the editor. \r\n            case 33:\r\n            case 34:\r\n                //e.stopImmediatePropagation();\r\n                //e.stopPropagation();\r\n                e.preventDefault();\r\n                const cursorPosition = e.key === 'PageUp' ? 0 : e.target.textLength;\r\n                e.target.setSelectionRange(cursorPosition, cursorPosition);\r\n                // Intentional that break is commented here. To make sure you don't leave\r\n                // editing when you press pgup/pgdown. \r\n                //break;\r\n            case 35:\r\n            case 36:\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                break;\r\n\r\n            case 38: //up arrow\r\n                if (vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)) {\r\n                    e.stopImmediatePropagation();\r\n                    e.stopPropagation();\r\n                }\r\n\r\n                break;\r\n\r\n            case 40: //down arrow\r\n                if (vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)) {\r\n                    e.stopImmediatePropagation();\r\n                    e.stopPropagation();\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n\r\n        }\r\n    });\r\n\r\n    if (editorParams.mask) {\r\n        this.table.modules.edit.maskInput(input, editorParams);\r\n    }\r\n\r\n    return input;\r\n}\r\n\r\nexport default MyTextArea;","function SharedState (component, more) {\r\n  return {\r\n    setState: state => component.setState(state),\r\n    getState: () => component.state,\r\n    ...more\r\n  }\r\n}\r\n\r\nexport default SharedState","import React from 'react'\r\n\r\nconst childrenWithProps = (children, props) => React.Children.map(children, c => React.cloneElement(c, props))\r\n\r\nexport default childrenWithProps\r\n","import React, { Component } from 'react'\r\nimport cn from 'classnames'\r\nimport childrenWithProps from '../childrenWithProps'\r\n\r\nclass Item extends Component {\r\n  render() {\r\n    const { shared, className, children } = this.props\r\n    const { opened } = shared.getState()\r\n    const open = opened === this.element\r\n    const toggleMenu = (e) => shared.toggle(this.element, e)\r\n\r\n    return (\r\n      <li role=\"presentation\" ref={ li => this.element = li } className={ cn(className, { open }) }>\r\n        { childrenWithProps(children, { opened, toggleMenu }) }\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nfunction Content({ children, className, open, toggleMenu }) {\r\n  return (\r\n    <a href=\"#!\" className={ cn('dropdown-toggle', className) } aria-expanded={ open } onClick={ toggleMenu }>\r\n      { children }\r\n    </a>\r\n  )\r\n}\r\n\r\nfunction SubMenu({ children, className }) {\r\n  return (\r\n    <ul className={ cn('dropdown-menu', className) } role=\"menu\">\r\n      { children }\r\n    </ul>\r\n  )\r\n}\r\n\r\nItem.Content = Content\r\nItem.SubMenu = SubMenu\r\n\r\nexport default Item\r\n","// the hacky part of this nice library :(\r\nconst body = window.document.body\r\n\r\n// and cross browser when? it's almost 2018 dude!\r\nfunction bodyNextClick(cb, isOn = true) {\r\n  const self = { on, off, target }\r\n  let status = false\r\n  let current_target = null\r\n\r\n  return isOn ? on() : self\r\n\r\n  function on () {\r\n    if (!status) {\r\n      window.document.body.addEventListener('click', handler)\r\n      status = true\r\n    }\r\n\r\n    return self\r\n  }\r\n\r\n  function off () {\r\n    if (status) {\r\n      body.removeEventListener('click', handler)\r\n      status = false\r\n    }\r\n\r\n    return self\r\n  }\r\n\r\n  function target(element) {\r\n    current_target = element\r\n    return element ? on() : off()\r\n  }\r\n\r\n  function handler (e) {\r\n    console.log(e.path.indexOf(current_target))\r\n    // TODO: unless ul.dropdown-menu is on the path\r\n    // which means that user clicked on an item of dropdown.\r\n    if (e.path.indexOf(current_target) === -1) {\r\n      cb(e, off)\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  bodyNextClick\r\n} ","import React, { Component } from 'react'\r\nimport SharedState from '../SharedState'\r\nimport childrenWithProps from '../childrenWithProps'\r\nimport Item from './Item'\r\nimport { bodyNextClick } from '../domUtils'\r\n\r\nclass TopNavBar extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      opened: null\r\n    }\r\n\r\n    this.shared = SharedState(this, {\r\n      toggle: (item, e) => {\r\n        if (e) e.preventDefault()\r\n        const opened = item === this.state.opened ? null : item\r\n        console.log('opened', opened)\r\n        this.setState({ opened })\r\n        this.closeOnClick.target(opened)\r\n      }\r\n    })\r\n\r\n    this.closeOnClick = bodyNextClick(e => this.shared.toggle(null), false)\r\n  }\r\n\r\n  render () {\r\n    const { shared } = this\r\n\r\n    return (\r\n      <ul className=\"nav navbar-nav navbar-right\">\r\n        { childrenWithProps(this.props.children, { shared }) }\r\n      </ul>\r\n    )\r\n  }\r\n}\r\n\r\nTopNavBar.Item = Item\r\n\r\nexport default TopNavBar","import TopNavBar from './TopNavBar'\r\nimport Item from './Item'\r\n\r\nexport default TopNavBar\r\n\r\nexport {\r\n  Item\r\n}","import { userConstants } from '../constants';\r\nimport { userService } from '../services';\r\nimport { alertActions } from './';\r\nimport { history } from '../helpers';\r\n\r\nexport const userActions = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    delete: _delete\r\n};\r\n\r\nfunction login(username, password) {\r\n    return /* There was no async here */ async dispatch => {\r\n        dispatch(request({ username }));\r\n        dispatch(alertActions.clear());\r\n        try {\r\n            let user = await userService.login(username, password);\r\n            console.log(\"user\", user);\r\n            dispatch(success(user));\r\n            //history.push('/ui');\r\n        } catch (error) {\r\n            //dispatch(failure(error.toString()));\r\n            //dispatch(alertActions.error(error.toString()));\r\n            dispatch(failure(\"Login incorrect: username or password is wrong\"));\r\n            dispatch(alertActions.error(\"Login incorrect: username or password is wrong\"));\r\n        }\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }\r\n}\r\n\r\nfunction logout() {\r\n    userService.logout();\r\n    return { type: userConstants.LOGOUT };\r\n}\r\n\r\nfunction register(user) {\r\n    return dispatch => {\r\n        dispatch(request(user));\r\n\r\n        userService.register(user)\r\n            .then(\r\n                user => { \r\n                    dispatch(success());\r\n                    history.push('/login');\r\n                    dispatch(alertActions.success('Registration successful'));\r\n                },\r\n                error => {\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }\r\n}\r\n\r\nfunction getAll() {\r\n    return dispatch => {\r\n        dispatch(request());\r\n\r\n        userService.getAll()\r\n            .then(\r\n                users => dispatch(success(users)),\r\n                error => dispatch(failure(error.toString()))\r\n            );\r\n    };\r\n\r\n    function request() { return { type: userConstants.GETALL_REQUEST } }\r\n    function success(users) { return { type: userConstants.GETALL_SUCCESS, users } }\r\n    function failure(error) { return { type: userConstants.GETALL_FAILURE, error } }\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    return dispatch => {\r\n        dispatch(request(id));\r\n\r\n        userService.delete(id)\r\n            .then(\r\n                user => dispatch(success(id)),\r\n                error => dispatch(failure(id, error.toString()))\r\n            );\r\n    };\r\n\r\n    function request(id) { return { type: userConstants.DELETE_REQUEST, id } }\r\n    function success(id) { return { type: userConstants.DELETE_SUCCESS, id } }\r\n    function failure(id, error) { return { type: userConstants.DELETE_FAILURE, id, error } }\r\n}","import { alertConstants } from '../constants';\r\n\r\nexport const alertActions = {\r\n    success,\r\n    error,\r\n    clear\r\n};\r\n\r\nfunction success(message) {\r\n    return { type: alertConstants.SUCCESS, message };\r\n}\r\n\r\nfunction error(message) {\r\n    return { type: alertConstants.ERROR, message };\r\n}\r\n\r\nfunction clear() {\r\n    return { type: alertConstants.CLEAR };\r\n}","import React, { Component } from 'react'\r\nimport { Item } from '../components/TopNavBar'\r\nimport { userActions } from '../actions';\r\n\r\nclass UserMenuItem extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.logout = this.logout.bind(this);\r\n  }\r\n\r\n  logout(){\r\n    userActions.logout();\r\n  }\r\n\r\n  render() {\r\n    const { user } = this.props;\r\n    return (\r\n      <Item {...this.props}>\r\n        <Item.Content className=\"user-profile\">\r\n          {/*<img src={user.userphoto} alt=\"\"/>*/}{user.user}\r\n          <span className=\" fa fa-angle-down\"></span>\r\n        </Item.Content>\r\n        <Item.SubMenu className=\"dropdown-usermenu pull-right\">\r\n          <li><a href=\"#!\"> Profile</a></li>\r\n          <li>\r\n            <a href=\"#!\">\r\n              <span className=\"badge bg-red pull-right\">50%</span>\r\n              <span>Settings</span>\r\n            </a>\r\n          </li>\r\n          <li><a href=\"#!\">Help</a></li>\r\n          <li><a href=\"/\" onClick={this.logout}><i className=\"fa fa-sign-out pull-right\"></i> Log Out</a></li>\r\n        </Item.SubMenu>\r\n      </Item>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UserMenuItem\r\n","// Top Navigation\r\nimport React, { Component } from 'react'\r\nimport TopNavBar from '../components/TopNavBar'\r\nimport UserMenuItem from './UserMenuItem'\r\n\r\nclass Top extends Component {\r\n  render () {\r\n    const { user, toggleCb, needMargin} = this.props;\r\n    return (\r\n      <div className={ needMargin ? \"top_nav\" : \"\" }>\r\n        <div className=\"nav_menu\">\r\n          <nav>\r\n            <div className=\"nav toggle\">\r\n              <a href=\"##\" id=\"menu_toggle\" onClick={ toggleCb }><i className=\"fas fa-bars\"></i></a>\r\n            </div>\r\n            <TopNavBar>\r\n              <UserMenuItem user={ user }/>\r\n            </TopNavBar>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Top","import React, { Component } from 'react'\r\n// import { Link } from 'react-router-dom'\r\n\r\nclass Left extends Component {\r\n  render() {\r\n    const { user, visible } = this.props;\r\n    if (!visible) \r\n      return (<div></div>);\r\n    return (\r\n      <div className=\"col-md-3 left_col\">\r\n        <div className=\"left_col scroll-view\">\r\n          <div className=\"navbar nav_title\" style={ { border: 0 } }>\r\n            <a href=\"/\" className=\"site_title\"><span>Datagroom</span></a>\r\n          </div>\r\n\r\n          <div className=\"clearfix\"></div>\r\n\r\n          { /* menu profile quick info */ }\r\n          <div className=\"profile clearfix\">\r\n            {/*\r\n            <div className=\"profile_pic\">\r\n            <img src={user.userphoto} alt=\"...\" className=\"img-circle profile_img\"/>\r\n            </div>\r\n            */}\r\n            <div className=\"profile_info\">\r\n              <span>Welcome,</span>\r\n              <h5 style= {{ color: \"white\" }}>{user.user}</h5>\r\n            </div>\r\n          </div>\r\n          { /* /menu profile quick info */ }\r\n\r\n          <br/>\r\n\r\n          { /* sidebar menu */ }\r\n          { this.props.children }\r\n          <div className=\"sidebar-footer hidden-small\">\r\n            <a href=\"##\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Settings\">\r\n              <span className=\"glyphicon glyphicon-cog\" aria-hidden=\"true\"></span>\r\n            </a>\r\n            <a href=\"##\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"FullScreen\">\r\n              <span className=\"glyphicon glyphicon-fullscreen\" aria-hidden=\"true\"></span>\r\n            </a>\r\n            <a href=\"##\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Lock\">\r\n              <span className=\"glyphicon glyphicon-eye-close\" aria-hidden=\"true\"></span>\r\n            </a>\r\n            <a data-toggle=\"tooltip\" data-placement=\"top\" title=\"Logout\" href=\"login.html\">\r\n              <span className=\"glyphicon glyphicon-off\" aria-hidden=\"true\"></span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default Left\r\n","import React, { Component } from 'react'\r\n\r\nclass Footer extends Component {\r\n  render () {\r\n    const { needMargin } = this.props;\r\n    return (\r\n      <footer style={!needMargin ? { 'margin-left': '0px' } : null}>\r\n        <div className=\"text-center\">\r\n          </div>\r\n          <div className=\"clearfix\"></div>\r\n        </footer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Footer","import React, { Component } from 'react'\r\nimport { Row, Col } from 'react-bootstrap'\r\nimport { uploadService } from '../../services'  // Call uploadService.fileUpload for sending file to gateway\r\nimport 'react-tabulator/lib/styles.css'; // required styles\r\nimport 'react-tabulator/lib/css/tabulator.min.css'; // theme\r\nimport { ReactTabulator } from 'react-tabulator';\r\nimport DateEditor from 'react-tabulator/lib/editors/DateEditor';\r\nimport MultiSelectEditor from 'react-tabulator/lib/editors/MultiSelectEditor';\r\nimport MultiValueFormatter from 'react-tabulator/lib/formatters/MultiValueFormatter';\r\nimport MyAutoCompleter from './MyAutoCompleter';\r\n\r\nrequire('./styles.css');\r\n\r\n  const data = [\r\n    { id: 1, name: 'Oli Bob', age: '12', color: 'red', dob: '01/01/1980', rating: 5, passed: true, pets: ['cat', 'dog'] },\r\n    { id: 2, name: 'Mary May', age: '1', color: 'green', dob: '12/05/1989', rating: 4, passed: true, pets: ['cat'] },\r\n    { id: 3, name: 'Christine Lobowski', age: '42', color: 'green', dob: '10/05/1985', rating: 4, passed: false },\r\n    { id: 4, name: 'Brendon Philips', age: '125', color: 'red', dob: '01/08/1980', rating: 4.5, passed: true },\r\n    { id: 5, name: 'Margret Marmajuke', age: '16', color: 'yellow', dob: '07/01/1999', rating: 4, passed: false },\r\n    {\r\n      id: 6,\r\n      name: 'Van Ng',\r\n      age: '37',\r\n      color: 'green',\r\n      dob: '06/10/1982',\r\n      rating: 4,\r\n      passed: true,\r\n      pets: ['dog', 'fish']\r\n    },\r\n    { id: 7, name: 'Duc Ng', age: '37', color: 'yellow', dob: '10/10/1982', rating: 4, passed: true, pets: ['dog'] }\r\n  ];\r\n  \r\n  // Editable Example:\r\n  const colorOptions = { ['']: '&nbsp;', red: 'red', green: 'green', yellow: 'yellow' };\r\n  const petOptions = [{ id: 'cat', name: 'cat' }, { id: 'dog', name: 'dog' }, { id: 'fish', name: 'fish' }];\r\n  let headerMenu = [\r\n    {\r\n        label:\"Toggle Filters\",\r\n        action: function(e, column) {\r\n            console.log(\"Toggle filters!\");\r\n            let currentDefs = column.getDefinition();\r\n            let curHdrFilter = currentDefs.headerFilter;\r\n            let curWidth = currentDefs.width;\r\n            column.updateDefinition({headerFilter: curHdrFilter ? false : 'input'});\r\n        }\r\n    }\r\n  ];\r\nconst editableColumns = [\r\n    { title: 'Name', field: 'name', editor: 'input', },\r\n    { title: 'Age', field: 'age', hozAlign: 'left', formatter: 'progress', editor: 'progress' },\r\n    {\r\n      title: 'Favourite Color',\r\n      field: 'color',\r\n      editor: MyAutoCompleter,\r\n      editorParams: { allowEmpty: true, showListOnEmpty: true, values: colorOptions, verticalNavigation:\"table\" },\r\n      formatter: \"textarea\",\r\n      headerMenu\r\n    },\r\n    { title: 'Date Of Birth', field: 'dob', editor: DateEditor, editorParams: { format: 'MM/DD/YYYY' } },\r\n    {\r\n      title: 'Pets',\r\n      field: 'pets',\r\n      sorter: (a, b) => a.toString().localeCompare(b.toString()),\r\n      editor: MultiSelectEditor,\r\n      editorParams: { values: petOptions },\r\n      formatter: MultiValueFormatter,\r\n      formatterParams: { style: 'PILL' }\r\n    },\r\n    { title: 'Passed?', field: 'passed', hozAlign: 'center', formatter: 'tickCross', editor: true }\r\n  ];\r\n\r\nclass Upload extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {activeTab:'', file: null};\r\n        this.onFileSelect = this.onFileSelect.bind(this);\r\n        this.onFileUpload = this.onFileUpload.bind(this);\r\n    }\r\n    onFileSelect(event) {\r\n        this.setState({file: event.target.files[0]});\r\n    }\r\n    // On file upload (click the upload button) \r\n    onFileUpload () { \r\n        // Create an object of formData \r\n        const formData = new FormData(); \r\n        // Update the formData object \r\n        formData.append( \r\n            \"file\", \r\n            this.state.file, \r\n            this.state.file.name \r\n        );     \r\n        // Details of the uploaded file \r\n         console.log(this.state.file); \r\n        // Request made to the backend api \r\n        // Send formData object \r\n        uploadService.fileUpload(formData);\r\n        //axios.post(\"api/uploadfile\", formData); \r\n    }; \r\n\r\n\r\n    render() {\r\n        return (\r\n                <Row>\r\n                <Col md={12}>\r\n                    <h3>Editable Table</h3>\r\n                    <ReactTabulator\r\n                    columns={editableColumns}\r\n                    data={data}\r\n                    cellEdited={(cell) => console.log('cellEdited:', cell)}\r\n                    dataEdited={(newData) => console.log('dataEdited', newData)}\r\n                    footerElement={<span>Footer</span>}\r\n                    options={{ movableColumns: true, movableRows: false, layout: \"fitDataFill\", keybindings: {\"navRight\": 39, \"navLeft\": 37} }}\r\n                    />\r\n                    <input type=\"file\" name=\"file\" onChange={this.onFileSelect} />\r\n                    <button onClick={this.onFileUpload}> \r\n                        Upload! \r\n                    </button> \r\n                </Col>\r\n                </Row>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Upload","import React, { Component } from 'react'\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom'\r\nimport { newDsActions } from './NewDsStoreMgmt';\r\nimport Select from 'react-select';\r\n\r\nclass NewDsFromXls extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            file: null,\r\n            formData: null,\r\n            range: \"\",\r\n            dsName: \"\"\r\n        };\r\n        this.onFileSelect = this.onFileSelect.bind(this);\r\n        this.sheetSelectorOnChange = this.sheetSelectorOnChange.bind(this);\r\n        this.sheetSelectionDone = this.sheetSelectionDone.bind(this);\r\n        this.rangeOnChange = this.rangeOnChange.bind(this);\r\n        this.rangeSelectionDone = this.rangeSelectionDone.bind(this);\r\n        this.keySelectorOnChange = this.keySelectorOnChange.bind(this);\r\n        this.dsNameOnChange = this.dsNameOnChange.bind(this);\r\n        this.createDs = this.createDs.bind(this);\r\n    }\r\n    onFileSelect(event) {\r\n        const { dispatch, user } = this.props;\r\n        this.setState({file: event.target.files[0]});\r\n        let file = event.target.files[0];\r\n        if ( file ) {\r\n            let remoteFileName = user.user + '_' + file.name;\r\n            // Create an object of formData \r\n            const formData = new FormData(); \r\n            // Update the formData object \r\n            formData.append( \r\n                \"file\", \r\n                file,\r\n                remoteFileName\r\n            );     \r\n            this.setState({ file, formData });\r\n            dispatch(newDsActions.uploadXlsFile(remoteFileName, formData));\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const { dispatch } = this.props;\r\n        dispatch(newDsActions.clearReduxStore());\r\n    }\r\n\r\n    componentWillUnmount () {\r\n    }\r\n\r\n    step1Status () {\r\n        const { newDs } = this.props;\r\n        let s1Status = '';\r\n\r\n        if (newDs && newDs.uploadStatus === 'fail') {\r\n            s1Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{newDs.uploadError}</b>\r\n                                </Col>\r\n                        </Row>\r\n        }\r\n        if (newDs && newDs.uploadStatus === 'success' && !newDs.sheetInfo.length) {\r\n            s1Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                <b style={{color: 'red'}}>Failed to recognize the sheets!</b>\r\n                                </Col>\r\n                        </Row>\r\n        }\r\n        return s1Status;\r\n    }\r\n    sheetSelectorOnChange (value) {\r\n        const { dispatch } = this.props;\r\n        console.log(value);\r\n        dispatch(newDsActions.setSelectedSheet(value ? value.value : null));\r\n        // Drop the result on the floor if you are no longer the selected value. \r\n        // This is required for race-conditions when the user rapidly changes the\r\n        // selection. \r\n        // Or add a button to do the actual network call. \r\n    }\r\n    sheetSelectionDone () {\r\n        const { newDs, dispatch } = this.props;\r\n        dispatch(newDsActions.findHeadersInSheet(newDs.fileName, newDs.selectedSheet));\r\n    }\r\n    step2 () {\r\n        const { newDs } = this.props;\r\n        let s2 = '';\r\n        if (newDs && newDs.uploadStatus === 'success' && newDs.sheetInfo.length) {\r\n            let sheetOptions = [];\r\n            newDs.sheetInfo.map((v) => {\r\n                let row = {};\r\n                row.value = v;\r\n                row.label = v;\r\n                sheetOptions.push(row);\r\n            });\r\n            s2 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 2.</b> Select sheet:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" options={sheetOptions} onChange={this.sheetSelectorOnChange}/>\r\n                    </Col>\r\n                    {/* \r\n                    <Select className=\"basic-multi-select\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" options={sheetOptions} onChange={this.sheetSelectorOnChange} isMulti/>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <button onClick={this.sheetSelectionDone}> Done </button> \r\n                    </Col>\r\n                    */}\r\n                 </Row>\r\n        }\r\n        return s2;\r\n    }\r\n\r\n    rangeOnChange (event) {\r\n        this.setState({ range: event.target.value });\r\n    }\r\n    rangeSelectionDone () {\r\n        const { newDs, dispatch } = this.props;\r\n        dispatch(newDsActions.loadHdrsFromRange(newDs.fileName, newDs.selectedSheet, this.state.range));\r\n    }\r\n\r\n    step3 () {\r\n        const { newDs } = this.props;\r\n        let s3 = '';\r\n        if (newDs && newDs.selectedSheet && newDs.selectedSheet.length) {\r\n            s3 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 3.</b> Specify range (must include hdrs):\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"text\" value={this.state.range} onChange={this.rangeOnChange} />\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Button onClick={this.rangeSelectionDone}> Validate </Button> \r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s3;\r\n    }\r\n\r\n    step3Status () {\r\n        const { newDs } = this.props;\r\n        let s3Status = '';\r\n        let statusJsx;\r\n        try {\r\n            if (!newDs.loadStatus.loadStatus) {\r\n                statusJsx = <b style={{color: 'red'}}> {newDs.loadStatus.error} </b>;\r\n            }\r\n        } catch (e) {}\r\n        try {\r\n            if (!newDs.loadStatus.loadStatus) {\r\n                if (Object.keys(newDs.loadStatus.hdrErrors).length) {\r\n                    statusJsx = Object.entries(newDs.loadStatus.hdrErrors).map ((kv) => {\r\n                        return <div>[ {kv[0]} ] : [ <b style={{color: 'red'}}> {kv[1]} </b> ] </div>\r\n                    })\r\n                } else {\r\n                    statusJsx = <b style={{color: 'red'}}> {newDs.loadStatus.error} </b>;\r\n                }\r\n            }\r\n        } catch (e) {}\r\n        if (statusJsx) {\r\n            s3Status = <Row>\r\n                            <Col md={12} sm={12} xs={12}> \r\n                            <b>Error: </b>{statusJsx}\r\n                            </Col>                        \r\n                       </Row>\r\n        }\r\n        return s3Status;\r\n    }\r\n\r\n    keySelectorOnChange (value) {\r\n        const { dispatch } = this.props;\r\n        console.log(value);\r\n        let flatKeys = [];\r\n        if ( value ) {\r\n            value.map((v) => {\r\n                flatKeys.push(v.value);\r\n            })\r\n        }\r\n        console.log(flatKeys);\r\n        dispatch(newDsActions.setSelectedKeys(flatKeys));\r\n        // Drop the result on the floor if you are no longer the selected value. \r\n        // This is required for race-conditions when the user rapidly changes the\r\n        // selection. \r\n        // Or add a button to do the actual network call. OR find a way to disable\r\n        // the component until call completes..\r\n    }\r\n\r\n    step4 () {\r\n        const { newDs } = this.props;\r\n        let s4 = '';\r\n        if (newDs && newDs.loadStatus && newDs.loadStatus.loadStatus && newDs.loadStatus.hdrs && Object.keys(newDs.loadStatus.hdrs).length) {\r\n            let hdrOptions = [];\r\n            Object.entries(newDs.loadStatus.hdrs).map((kv) => {\r\n                let row = {};\r\n                row.value = kv[1];\r\n                row.label = kv[1];\r\n                hdrOptions.push(row);\r\n            });\r\n            s4 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 4.</b> Select key(s):\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Select className=\"basic-multi-select\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" options={hdrOptions} onChange={this.keySelectorOnChange} isMulti/>\r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s4;\r\n    }\r\n\r\n    dsNameOnChange (event) {\r\n        let value = event.target.value;\r\n        if (!value || (value.match(/^[a-zA-Z][a-zA-Z0-9_]*$/g) && value.length <= 64))\r\n            this.setState({ dsName: event.target.value });\r\n    }\r\n    createDs () {\r\n        const { newDs, dispatch, user } = this.props;\r\n        dispatch(newDsActions.createDs(newDs.fileName, newDs.selectedSheet, newDs.selectedRange, newDs.selectedKeys, this.state.dsName, user.user));\r\n    }\r\n    step5 () {\r\n        const { newDs } = this.props;\r\n        let s5 = '';\r\n        if (newDs && newDs.loadStatus && newDs.loadStatus.loadStatus && newDs.loadStatus.hdrs && Object.keys(newDs.loadStatus.hdrs).length) {\r\n            s5 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 5.</b> Specify dataset name:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"text\" value={this.state.dsName} onChange={this.dsNameOnChange} />\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Button onClick={this.createDs}> Create </Button> \r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s5;\r\n    }\r\n\r\n    step5Status () {\r\n        const { newDs } = this.props;\r\n        let s5Status = '';\r\n\r\n        try {\r\n            if (newDs.createStatus.error) {\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{newDs.createStatus.error}</b>\r\n                                </Col>\r\n                           </Row>\r\n            } else if (newDs.createStatus.loadStatus && this.state.dsName !== \"\") {\r\n                let url = `/ds/${this.state.dsName}/default`;\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'green'}}>Successfully created: </b>\r\n                                    <Link to={url}>Click here for your dataset</Link>\r\n                                </Col>\r\n                           </Row>\r\n            }\r\n        } catch (e) {}\r\n        return s5Status;\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <h3 style={{ 'float': 'center' }}><label className=\"underline\">New Dataset from xls file</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 1.</b> Select xls file:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"file\" name=\"file\" onChange={this.onFileSelect} />\r\n                    </Col>\r\n                </Row>\r\n                {this.step1Status()}\r\n                <br/>\r\n                {this.step2()}\r\n                <br/>\r\n                {this.step3()}\r\n                {this.step3Status()}\r\n                <br/>\r\n                {this.step4()}\r\n                <br/>\r\n                {this.step5()}\r\n                <br/>\r\n                {this.step5Status()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { newDs } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        newDs\r\n    }\r\n}\r\n\r\nconst cNewDsFromXls = connect(mapStateToProps)(NewDsFromXls);\r\n\r\n\r\nexport default cNewDsFromXls","import React, { Component } from 'react'\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom'\r\nimport { newDsActions } from './NewDsStoreMgmt';\r\nimport Select from 'react-select';\r\n\r\nclass NewDsFromCsv extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            file: null,\r\n            formData: null,\r\n            range: \"\",\r\n            dsName: \"\"\r\n        };\r\n        this.onFileSelect = this.onFileSelect.bind(this);\r\n        this.keySelectorOnChange = this.keySelectorOnChange.bind(this);\r\n        this.dsNameOnChange = this.dsNameOnChange.bind(this);\r\n        this.createDs = this.createDs.bind(this);\r\n    }\r\n    onFileSelect(event) {\r\n        const { dispatch, user } = this.props;\r\n        this.setState({file: event.target.files[0]});\r\n        let file = event.target.files[0];\r\n        if ( file ) {\r\n            let remoteFileName = user.user + '_' + file.name;\r\n            // Create an object of formData \r\n            const formData = new FormData(); \r\n            // Update the formData object \r\n            formData.append( \r\n                \"file\", \r\n                file,\r\n                remoteFileName\r\n            );     \r\n            this.setState({ file, formData });\r\n            dispatch(newDsActions.uploadCsvFile(remoteFileName, formData));\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const { dispatch } = this.props;\r\n        dispatch(newDsActions.clearReduxStore());\r\n    }\r\n\r\n    componentWillUnmount () {\r\n    }\r\n\r\n    step1Status () {\r\n        const { newDs } = this.props;\r\n        let s1Status = '';\r\n\r\n        if (newDs && newDs.uploadStatus === 'fail') {\r\n            s1Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{newDs.uploadError}</b>\r\n                                </Col>\r\n                        </Row>\r\n        }\r\n        if (newDs && newDs.uploadStatus === 'success' && newDs.hdrs && !newDs.hdrs.length) {\r\n            s1Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                <b style={{color: 'red'}}>Failed to read the hdrs!</b>\r\n                                </Col>\r\n                        </Row>\r\n        }\r\n        return s1Status;\r\n    }\r\n    step2 () {\r\n        const { newDs } = this.props;\r\n        let s2 = '';\r\n        if (newDs && newDs.uploadStatus === 'success' && newDs.hdrs.length) {\r\n            let hdrOptions = [];\r\n            newDs.hdrs.map((v) => {\r\n                let row = {};\r\n                row.value = v;\r\n                row.label = v;\r\n                hdrOptions.push(row);\r\n            });\r\n            s2 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 2.</b> Select keys:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Select className=\"basic-multi-select\" classNamePrefix=\"select\" isClearable={true} name=\"keys\" options={hdrOptions} onChange={this.keySelectorOnChange} isMulti/>\r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s2;\r\n    }\r\n\r\n\r\n    keySelectorOnChange (value) {\r\n        const { dispatch } = this.props;\r\n        console.log(value);\r\n        let flatKeys = [];\r\n        if ( value ) {\r\n            value.map((v) => {\r\n                flatKeys.push(v.value);\r\n            })\r\n        }\r\n        console.log(flatKeys);\r\n        dispatch(newDsActions.setSelectedKeys(flatKeys));\r\n        // Drop the result on the floor if you are no longer the selected value. \r\n        // This is required for race-conditions when the user rapidly changes the\r\n        // selection. \r\n        // Or add a button to do the actual network call. OR find a way to disable\r\n        // the component until call completes..\r\n    }\r\n\r\n\r\n    dsNameOnChange (event) {\r\n        let value = event.target.value;\r\n        if (!value || (value.match(/^[a-zA-Z][a-zA-Z0-9_]*$/g) && value.length <= 64))\r\n            this.setState({ dsName: event.target.value });\r\n    }\r\n    createDs () {\r\n        const { newDs, dispatch, user } = this.props;\r\n        dispatch(newDsActions.createDsViaCsv(newDs.fileName, newDs.selectedKeys, this.state.dsName, user.user));\r\n    }\r\n    step5 () {\r\n        const { newDs } = this.props;\r\n        let s5 = '';\r\n        if (newDs && newDs.uploadStatus === 'success' && newDs.hdrs.length) {\r\n            s5 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 5.</b> Specify dataset name:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"text\" value={this.state.dsName} onChange={this.dsNameOnChange} />\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Button onClick={this.createDs}> Create </Button> \r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s5;\r\n    }\r\n\r\n    step5Status () {\r\n        const { newDs } = this.props;\r\n        let s5Status = '';\r\n\r\n        try {\r\n            if (newDs.createStatus.error) {\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{newDs.createStatus.error}</b>\r\n                                </Col>\r\n                           </Row>\r\n            } else if (newDs.createStatus.loadStatus && this.state.dsName !== \"\") {\r\n                let url = `/ds/${this.state.dsName}/default`;\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'green'}}>Successfully created: </b>\r\n                                    <Link to={url}>Click here for your dataset</Link>\r\n                                </Col>\r\n                           </Row>\r\n            }\r\n        } catch (e) {}\r\n        return s5Status;\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <h3 style={{ 'float': 'center' }}><label className=\"underline\">New Dataset from csv file</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 1.</b> Select csv file:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"file\" name=\"file\" onChange={this.onFileSelect} />\r\n                    </Col>\r\n                </Row>\r\n                {this.step1Status()}\r\n                <br/>\r\n                {this.step2()}\r\n                <br/>\r\n                {this.step5()}\r\n                <br/>\r\n                {this.step5Status()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { newDs } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        newDs\r\n    }\r\n}\r\n\r\nconst cNewDsFromCsv = connect(mapStateToProps)(NewDsFromCsv);\r\n\r\n\r\nexport default cNewDsFromCsv","import React, { Component } from 'react'\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom'\r\nimport { newDsActions } from './NewDsStoreMgmt';\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport Select from 'react-select';\r\n\r\nclass NewDsFromDs extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            fromDsName: \"\",\r\n            toDsName: \"\",\r\n            retainData: true,\r\n            incompleteInputErr: \"\"\r\n        };\r\n        this.dsSelectorOnChange = this.dsSelectorOnChange.bind(this);\r\n        this.dsNameOnChange = this.dsNameOnChange.bind(this);\r\n        this.createDs = this.createDs.bind(this);\r\n    }\r\n\r\n    componentDidMount () {\r\n        const { dispatch, user } = this.props;\r\n        dispatch(newDsActions.clearReduxStore());\r\n        dispatch(dsActions.getDsList(user.user));\r\n    }\r\n\r\n    componentWillUnmount () {\r\n    }\r\n\r\n    dsSelectorOnChange (value) {\r\n        const { dispatch } = this.props;\r\n        if (value)        \r\n            this.setState({ fromDsName: value.value });\r\n        else \r\n            this.setState({ fromDsName: \"\" });\r\n    }\r\n    step1 () {\r\n        const { allDs } = this.props;\r\n        let s1 = '';\r\n        try {\r\n            let sheetOptions = [];\r\n\r\n            allDs.dsList.dbList.map((v) => {\r\n                let row = {};\r\n                row.value = v.name;\r\n                row.label = v.name;\r\n                sheetOptions.push(row);\r\n            })\r\n            s1 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 1.</b> Select From DS:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" options={sheetOptions} onChange={this.dsSelectorOnChange}/>\r\n                    </Col>\r\n                 </Row>\r\n\r\n            return s1;\r\n        } catch (e) {}\r\n\r\n        return s1;\r\n    }\r\n\r\n    dsNameOnChange (event) {\r\n        let value = event.target.value;\r\n        if (!value || (value.match(/^[a-zA-Z][a-zA-Z0-9_]*$/g) && value.length <= 64))\r\n            this.setState({ toDsName: event.target.value });\r\n    }\r\n    createDs () {\r\n        const { newDs, dispatch, user } = this.props;\r\n        console.log(`createDs: ${this.state.fromDsName}, ${this.state.toDsName}, ${this.state.retainData}`);\r\n        if (!this.state.toDsName) {\r\n            this.setState({incompleteInputErr: \"Specify new DS name!\"});\r\n        } else if (!this.state.fromDsName) {\r\n            this.setState({incompleteInputErr: \"Select FROM DS name!\"});\r\n        } else {\r\n            this.setState({incompleteInputErr: \"\"});\r\n        }\r\n        dispatch(newDsActions.createDsFromDs(this.state.fromDsName, this.state.toDsName, user.user, this.state.retainData));\r\n    }\r\n    step2 () {\r\n        const { newDs } = this.props;\r\n        let s2 = '', me = this;\r\n        if (!this.state.fromDsName) return s2;\r\n\r\n        try {\r\n            s2 =<div>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Check type=\"checkbox\" label=\"&nbsp; Retain data\" checked={this.state.retainData} onChange={(event) => {\r\n                            me.setState({retainData: event.target.checked\r\n                        });\r\n                    }}/>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 2.</b> Specify new dataset name:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"text\" value={this.state.toDsName} onChange={this.dsNameOnChange} />\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Button onClick={this.createDs}> Create </Button> \r\n                    </Col>\r\n                </Row>\r\n                </div>\r\n        } catch (e) {};\r\n\r\n        return s2;\r\n    }\r\n\r\n    step2Status () {\r\n        const { newDs } = this.props;\r\n        let s5Status = '';\r\n\r\n        try {\r\n            if (this.state.incompleteInputErr) {\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{this.state.incompleteInputErr}</b>\r\n                                </Col>\r\n                           </Row>\r\n            } else if (newDs.createStatus.error) {\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{newDs.createStatus.error}</b>\r\n                                </Col>\r\n                           </Row>\r\n            } else if (newDs.createStatus.createStatus && this.state.toDsName !== \"\") {\r\n                let url = `/ds/${this.state.toDsName}/default`;\r\n                s5Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'green'}}>Successfully created: </b>\r\n                                    <Link to={url}>Click here for your dataset</Link>\r\n                                </Col>\r\n                           </Row>\r\n            }\r\n        } catch (e) {}\r\n        return s5Status;\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <h3 style={{ 'float': 'center' }}><label className=\"underline\">Copy Dataset from an existing Dataset</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                {this.step1()}\r\n                <br/>\r\n                {this.step2()}\r\n                <br/>\r\n                {this.step2Status()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { newDs } = state;\r\n    const { allDs } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        newDs,\r\n        allDs\r\n    }\r\n}\r\n\r\nconst cNewDsFromDs = connect(mapStateToProps)(NewDsFromDs);\r\n\r\n\r\nexport default cNewDsFromDs","import React, { Component } from 'react'\r\nimport { Row, Col } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport Select from 'react-select';\r\nimport 'react-tabulator/lib/styles.css'; // required styles\r\nimport 'react-tabulator/lib/css/tabulator.min.css'; // theme\r\nimport { ReactTabulator } from 'react-tabulator';\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\nclass DsHome extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            file: null,\r\n            range: \"\",\r\n            dsName: \"\"\r\n        };\r\n    }\r\n\r\n    step1 () {\r\n        const { newDs, dsHome } = this.props;\r\n\r\n        if ( !Object.keys(dsHome).length ) {\r\n            // Here, fetch all the views available for the dataset. \r\n            // dispatch(newDsActions.loadHdrsFromRange(newDs.fileName, newDs.selectedSheet, this.state.range));\r\n        }\r\n\r\n        let s1 = '';\r\n        if (newDs && newDs.loadStatus && newDs.loadStatus.loadStatus && newDs.loadStatus.hdrs && Object.keys(newDs.loadStatus.hdrs).length) {\r\n            let hdrOptions = [];\r\n            Object.entries(newDs.loadStatus.hdrs).map((kv) => {\r\n                let row = {};\r\n                row.value = kv[1];\r\n                row.label = kv[1];\r\n                hdrOptions.push(row);\r\n            });\r\n            s1 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 4.</b> Select key(s):\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Select className=\"basic-multi-select\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" options={hdrOptions} onChange={this.keySelectorOnChange} isMulti/>\r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s1;\r\n    }\r\n    \r\n    render () {\r\n        var columns = [\r\n            { title: 'Issue Id', field: 'IssueID', width: 150 },\r\n            { title: 'Cur Owner', field: 'CurrentOwner', width: 150 },\r\n            { title: 'Title', field: 'Title', width: 800, formatter: \"textarea\", variableHeight: true },\r\n        ];        \r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <h3 style={{ 'float': 'center' }}><label className=\"underline\">Browse Datasets</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                        <div>\r\n                            Hi, will load: {this.props.match.params.dsName}\r\n                            <ReactTabulator\r\n                                columns={columns}\r\n                                data={[]}\r\n                                options={{\r\n                                    ajaxURL: `${config.apiUrl}/ds/view/${this.props.match.params.dsName}`,\r\n                                    //ajaxProgressiveLoad:\"load\",\r\n                                    //ajaxProgressiveLoadDelay: 200,\r\n                                    pagination:\"remote\",\r\n                                    paginationDataSent: {\r\n                                        page: 'page',\r\n                                        size: 'per_page' // change 'size' param to 'per_page'\r\n                                    },\r\n                                    paginationDataReceived: {\r\n                                        last_page: 'total_pages'\r\n                                    },\r\n                                    current_page: 1,\r\n                                    paginationSize: 30,\r\n                                    ajaxResponse: function (url, params, response) {\r\n                                        console.log('ajaxResponse', url);\r\n                                        return response; //return the response data to tabulator\r\n                                    },\r\n                                    ajaxError: function (error) {\r\n                                        console.log('ajaxError', error);\r\n                                    }\r\n                    \r\n                                }}\r\n                            />\r\n                        </div>\r\n                </Row>            \r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cDsHome = connect(mapStateToProps)(DsHome);\r\n\r\n\r\nexport default cDsHome","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport Select from 'react-select';\r\nimport { dsConstants } from '../../constants';\r\n\r\nclass AccessCtrl extends React.Component {\r\n    constructor (props) {\r\n        super (props)\r\n        this.state = {\r\n            accessCtrl: false,\r\n            acl: null,\r\n\r\n            debounceTimers: {}\r\n        };\r\n    }\r\n\r\n    render () {\r\n        const { dispatch, dsName, dsView, user, dsHome } = this.props;\r\n        let me = this;\r\n\r\n        try {\r\n            if (this.state.acl === null && dsHome.dsViews[dsView].aclConfig) {\r\n                let acl = \"\";\r\n                if (typeof dsHome.dsViews[dsView].aclConfig.acl === \"string\") {\r\n                    acl = dsHome.dsViews[dsView].aclConfig.acl;\r\n                } else if (Array.isArray(dsHome.dsViews[dsView].aclConfig.acl)) {\r\n                    for (let i = 0; i < dsHome.dsViews[dsView].aclConfig.acl.length; i++) {\r\n                        acl += dsHome.dsViews[dsView].aclConfig.acl[i];\r\n                        if (i < dsHome.dsViews[dsView].aclConfig.acl.length - 1) \r\n                            acl += \", \";\r\n                    }\r\n                }\r\n                this.setState({ accessCtrl: dsHome.dsViews[dsView].aclConfig.accessCtrl, \r\n                                acl: acl\r\n                             });\r\n            }\r\n        } catch (e) {};\r\n\r\n        // https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html\r\n        return (\r\n            <>\r\n            <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Add access-control\" checked={this.state.accessCtrl} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({accessCtrl: checked});\r\n                                    let aclArray = [];\r\n                                    let tmpArr = this.state.acl.split(',');\r\n                                    for (let i = 0; i < tmpArr.length; i++) {\r\n                                        let item = tmpArr[i].trim();\r\n                                        if (item) aclArray.push(item);\r\n                                    }\r\n                                    if (!checked) {\r\n                                        aclArray = []; aclArray.push(user.user);\r\n                                    } else {\r\n                                        if (!aclArray.includes(user.user)) aclArray.push(user.user);\r\n                                    }\r\n                                    me.props.onChange({accessCtrl: checked, acl: aclArray})\r\n                                }}/>\r\n                    </Col>\r\n                    { this.state.accessCtrl && \r\n                        <Col md={6} sm={6} xs={6}> \r\n                        <Form.Control type=\"text\" defaultValue={this.state.acl} onChange={(event) => {\r\n                                let value = event.target.value;\r\n                                if (me.state.debounceTimers[\"__accessCtrl\"]) {\r\n                                    clearTimeout(me.state.debounceTimers[\"__accessCtrl\"]);\r\n                                }\r\n                                me.state.debounceTimers[\"__accessCtrl\"] = setTimeout(() => {\r\n                                    delete me.state.debounceTimers[\"__accessCtrl\"];\r\n                                    if (!value) return;\r\n                                    me.setState({acl: value});\r\n                                    let aclArray = [];\r\n                                    let tmpArr = value.split(',');\r\n                                    for (let i = 0; i < tmpArr.length; i++) {\r\n                                        let item = tmpArr[i].trim();\r\n                                        if (item) aclArray.push(item);\r\n                                    }\r\n                                    me.props.onChange({accessCtrl: this.state.accessCtrl, acl: aclArray});\r\n                                }, 1000)\r\n                            }} />\r\n                        </Col> \r\n                    }\r\n\r\n            </Row>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nAccessCtrl.propTypes = {\r\n    onChange: PropTypes.func.isRequired, \r\n    /*\r\n    onClose: PropTypes.func.isRequired,\r\n    onFilterChange: PropTypes.func.isRequired,\r\n    tableRef: PropTypes.object.isRequired,\r\n    show: PropTypes.bool,\r\n    dsName: PropTypes.string.isRequired,\r\n    dsView: PropTypes.string.isRequired,\r\n    children: PropTypes.node,\r\n    defaultValue: PropTypes.string */\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cAccessCtrl = connect(mapStateToProps)(AccessCtrl);\r\n\r\nexport default cAccessCtrl;","import React, { Component } from 'react'\r\nimport { Row, Col, Form, Button, Checkbox } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport { dsConstants } from '../../constants';\r\nimport MyTabulator from './MyTabulator';\r\nimport './simpleStyles.css';\r\nimport { dsHome } from '../../reducers/dsHome.reducer';\r\nimport Select from 'react-select';\r\nimport AccessCtrl from './DsViewEditAccessCtrl';\r\n\r\n\r\nlet MarkdownIt = new require('markdown-it')({\r\n    linkify: true,\r\n    html: true\r\n}).use(require('markdown-it-bracketed-spans')).use(require('markdown-it-attrs')).use(require('markdown-it-container'), 'code');\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\nclass DsViewEdit extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            file: null,\r\n            range: \"\",\r\n            dsName: \"\",\r\n            firstTime: true,\r\n            filterButtonText: 'Enable Filters',\r\n            editingButtonText: 'Disable Editing',\r\n            refreshAfterRender: false,\r\n            jira: null,\r\n            jql: \"\",\r\n            jiraFieldMapping: '# Jira keys: \"key\", \"summary\", \"type\", \"assignee\", \"severity\", \"priority\", \"reporter\", \"foundInRls\", \"created\", \"rrtTargetRls\", \"targetRls\", \"status\", \"feature\", \"rzFeature\", \"versions\", \"parent\", \"subtasks\", \"subtasksDetails\", \"dependsLinks\", \"implementLinks\", \"packageLinks\", \"relatesLinks\", \"testLinks\", \"coversLinks\", \"defectLinks\", \"automatesLinks\", \"updated\", \"votes\", \"systemFeature\", \"labels\"\\n\\n',\r\n            dsDescription: null,\r\n            widths: {},\r\n            fixedHeight: null,\r\n            setViewStatus: '',\r\n            aclConfig: null,\r\n\r\n            somethingChanged: 0,\r\n            debounceTimers: {}\r\n        };\r\n        //this.widths = {};\r\n        this.editors = {};\r\n        this.ref = null;\r\n        this.recordRef = this.recordRef.bind(this);\r\n        this.pushColumnDefs = this.pushColumnDefs.bind(this);\r\n        this.addCol = this.addCol.bind(this);\r\n        this.showAllCols = this.showAllCols.bind(this);\r\n        this.toggleSingleFilter = this.toggleSingleFilter.bind(this);\r\n        this.setEditor = this.setEditor.bind(this);\r\n        this.setEditorToFalse = this.setEditorToFalse.bind(this);\r\n        this.setEditorToInput = this.setEditorToInput.bind(this);\r\n        this.setEditorToTextArea = this.setEditorToTextArea.bind(this);\r\n        this.setEditorToCodeMirror = this.setEditorToCodeMirror.bind(this);\r\n        this.setEditorToDate = this.setEditorToDate.bind(this);\r\n        this.setFormatter = this.setFormatter.bind(this);\r\n        this.setFormatterToPlainText = this.setFormatterToPlainText.bind(this);\r\n        this.setFormatterToTextArea = this.setFormatterToTextArea.bind(this)\r\n        this.hideColumn = this.hideColumn.bind(this);\r\n        this.setHdrFilterType = this.setHdrFilterType.bind(this);\r\n        this.setHdrFilterTypeToNumber = this.setHdrFilterTypeToNumber.bind(this);\r\n        this.setHdrFilterTypeToText = this.setHdrFilterTypeToText.bind(this);\r\n        this.plusFiftyToWidth = this.plusFiftyToWidth.bind(this);\r\n        this.editorParamsControl = this.editorParamsControl.bind(this);\r\n        this.renderComplete = this.renderComplete.bind(this);\r\n        this.setViewStatus = this.setViewStatus.bind(this);\r\n    }\r\n    componentDidMount () {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        if ( !Object.keys(dsHome).length || !dsHome.dsViews || !dsHome.dsViews[dsView] ) {\r\n            dispatch(dsActions.loadColumnsForUserView(dsName, dsView, user.user)); \r\n        }\r\n    }\r\n    componentWillUnmount () {\r\n        const { dispatch } = this.props;\r\n        dispatch( { type: dsConstants.CLEAR_COLUMNS } );\r\n    }\r\n\r\n    recordRef (ref) {\r\n        // setting state is causing grief to the Tabulator component. \r\n        //this.setState({ ref });\r\n        this.ref = ref;\r\n        return true;\r\n    }\r\n\r\n    showAllCols () {\r\n        let cols = this.ref.table.getColumns();\r\n        for (let i = 0; i < cols.length; i++) {\r\n            if (!cols[i].isVisible())\r\n                cols[i].show();\r\n        }\r\n    }\r\n    renderComplete () {\r\n        let widths = {};\r\n        let cols = this.ref.table.getColumns();\r\n        for (let i = 0; i < cols.length; i++) {\r\n            widths[cols[i].getField()] = cols[i].getWidth();\r\n            //this.widths[cols[i].getField()] = cols[i].getWidth();\r\n        }\r\n        //console.log(\"Widths are: \", widths);\r\n        this.setState({ widths });\r\n    }\r\n\r\n    async addCol (e, data) {\r\n        const { dispatch, match, dsHome } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        console.log(\"Add col called..: \", data);\r\n        if (!data) data = {};\r\n        try {\r\n            if (Object.keys(dsHome.dsColAdds[dsView]).length) {\r\n                console.log(\"A col add is in progress..\");\r\n                return;\r\n            }\r\n        } catch (e) {}\r\n        let col = await this.ref.table.addColumn({title: \"\", field: \"\", editableTitle: true});\r\n        console.log(\"Col is: \", col);\r\n    }\r\n\r\n    pushColumnDefs () {\r\n        const { dispatch, match, user } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        this.setState({ setViewStatus: '' });\r\n        let currentDefs = JSON.parse(JSON.stringify(this.ref.table.getColumnDefinitions()));\r\n        console.log(\"currentDefs from tabulator: \", currentDefs);\r\n        let cols = this.ref.table.getColumns();\r\n        for (let i = 0; i < cols.length; i++) {\r\n            for (let j = 0; j < currentDefs.length; j++) {\r\n                if (currentDefs[j].field === cols[i].getField()) {\r\n                    currentDefs[j].width = cols[i].getWidth();\r\n                    console.log(\"Set width: \", currentDefs[j].width);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        // Read header filters. \r\n        let hdrFilters = this.ref.table.getHeaderFilters();\r\n        for (let i = 0; i < hdrFilters.length; i++) {\r\n            for (let j = 0; j < currentDefs.length; j++) {\r\n                if (currentDefs[j].field === hdrFilters[i].field) {\r\n                    currentDefs[j].hdrFilter = hdrFilters[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        let filteredDefs = [];\r\n        for (let i = 0; i < currentDefs.length; i++) {\r\n            delete currentDefs[i].headerMenu;\r\n            for (let j = 0; j < cols.length; j++) {\r\n                if (currentDefs[i].field === cols[j].getField()) {\r\n                    if (!cols[j].isVisible()) {\r\n                        currentDefs[i].visible = false;\r\n                    } else {\r\n                        delete currentDefs[i].visible;\r\n                    }\r\n                }\r\n            }\r\n            currentDefs[i].editor = this.editors[currentDefs[i].field];\r\n            // Just remove editorParms.values, showListOnEmpty, allowEmpty, multiselect \r\n            // if it is not autocomplete. \r\n            if (currentDefs[i].editor !== \"autocomplete\") {\r\n                try {\r\n                    delete currentDefs[i].editorParams.values;\r\n                    delete currentDefs[i].editorParams.showListOnEmpty;\r\n                    delete currentDefs[i].editorParams.allowEmpty;\r\n                    delete currentDefs[i].editorParams.multiselect;\r\n                } catch (e) {}\r\n            }\r\n            filteredDefs.push(currentDefs[i]);\r\n        }\r\n        let jiraColumns = {\r\n            \"Work-id\": false,\r\n            \"Description\": false\r\n        }; let jiraColumnsPresent = true;\r\n        let jiraFields = { 'key': 1, 'summary':1, 'type':1, 'assignee':1, 'severity':1, 'priority':1, 'foundInRls':1, 'reporter':1, 'created':1, 'rrtTargetRls':1, 'targetRls':1, 'status':1, 'feature':1, 'rzFeature': 1, 'versions': 1, 'parent': 1, 'subtasks': 1, 'subtasksDetails': 1, 'dependsLinks': 1, 'implementLinks': 1, 'packageLinks': 1, 'relatesLinks': 1, 'testLinks': 1, 'coversLinks': 1, \"defectLinks\": 1, \"automatesLinks\": 1, 'updated': 1, 'votes': 1, 'systemFeature': 1, 'labels': 1};\r\n        let dsFields = {};\r\n        for (let i = 0; i < currentDefs.length; i++) {\r\n            for (let key in jiraColumns) {\r\n                if (currentDefs[i].field === key) {\r\n                    jiraColumns[key] = true;\r\n                }\r\n            }\r\n            dsFields[currentDefs[i].field] = 1;\r\n        }\r\n        for (let key in jiraColumns) {\r\n            if (!jiraColumns[key]) {\r\n                console.log(\"Unknown jira column: \", key);\r\n                jiraColumnsPresent = false; \r\n                break;\r\n            }\r\n        }\r\n        function validateMapping (jiraFieldMapping) {\r\n            let ret = { status: true, error: '' };\r\n            for (let key in jiraFieldMapping) {\r\n                //if (key === \"key\") continue;\r\n                if (!jiraFields[key]) {\r\n                    ret.error = `Unknown Jira key: ${key}`;\r\n                    ret.status = false;\r\n                    break;\r\n                }\r\n                if (!dsFields[jiraFieldMapping[key]]) {\r\n                    ret.error = `Unknown column in data-set: ${jiraFieldMapping[key]}`;\r\n                    ret.status = false;\r\n                }\r\n            }\r\n            return ret;\r\n        }\r\n        let jiraFieldMapping = {};\r\n        if (this.state.jiraFieldMapping) {\r\n            let lines = this.state.jiraFieldMapping.split('\\n');\r\n            for (let i = 0; i < lines.length; i++) {\r\n                let line = lines[i];\r\n                if (/^\\s*#/.test(line)) continue;\r\n                let m = line.match(/^\\s*\"(.*?)\"\\s*->\\s*\"(.*?)\"\\s*$/);\r\n                if (m && (m.length >= 2)) {\r\n                    let jiraKey = m[1], dsField = m[2];\r\n                    jiraFieldMapping[jiraKey] = dsField;\r\n                    continue;\r\n                }\r\n                m = line.match(/^\\s*'(.*?)'\\s*->\\s*'(.*?)'\\s*$/);\r\n                if (m && (m.length >= 2)) {\r\n                    let jiraKey = m[1], dsField = m[2];\r\n                    jiraFieldMapping[jiraKey] = dsField;\r\n                    continue;\r\n                }\r\n\r\n            }\r\n            let ret = validateMapping(jiraFieldMapping);\r\n            console.log(\"validate ret: \", ret);\r\n            jiraColumnsPresent = ret.status;\r\n            if (!ret.status) { \r\n                this.setState({ setViewStatus: \"Jira validation failed!\" });\r\n                console.log(\"Validation failed\")\r\n                return;\r\n            }\r\n        }\r\n        let jiraConfig = null;\r\n        if (jiraColumnsPresent && this.state.jira && this.state.jql) {\r\n            jiraConfig = {\r\n                jira: true,\r\n                jql: this.state.jql,\r\n                jiraFieldMapping\r\n            }\r\n        }\r\n        let dsDescription = {\r\n            dsDescription: this.state.dsDescription\r\n        }\r\n        let otherTableAttrs = {\r\n            fixedHeight: this.state.fixedHeight\r\n        }\r\n        // XXX: Push all columns including invisible ones.\r\n        currentDefs = filteredDefs;\r\n        console.log(\"Will push these definitions: \", currentDefs);\r\n        dispatch(dsActions.setViewDefinitions(dsName, dsView, user.user, currentDefs, jiraConfig, dsDescription, otherTableAttrs, this.state.aclConfig));\r\n    }\r\n\r\n    setViewStatus () {\r\n        const { match, dsHome } = this.props;\r\n        let status = '';\r\n        try {\r\n            if (dsHome.dsSetView.status === \"fail\") {\r\n                status = dsHome.dsSetView.message;\r\n            }\r\n        } catch (e) {};\r\n        if (this.state.setViewStatus) status = this.state.setViewStatus;\r\n        if (status)\r\n            return <b style={{color: \"red\"}}> {status} </b>;\r\n        try {\r\n            if (dsHome.dsSetView.status === \"success\" && dsHome.dsSetView.serverStatus.status === \"success\") {\r\n                status = `success at ${new Date()}`;\r\n            }\r\n        } catch (e) {};\r\n        return <b style={{color: \"green\"}}> {status} </b>;\r\n    }\r\n\r\n    isKey (field) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        //console.log(\"Field is: \", field);\r\n        if (dsHome.dsViews[dsView].keys && dsHome.dsViews[dsView].keys.length) {\r\n            for (let i = 0; i < dsHome.dsViews[dsView].keys.length; i++) {\r\n                let key = dsHome.dsViews[dsView].keys[i];\r\n                //console.log(\"key is: \", key);\r\n                if (field === key)\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    hideColumn (e, column) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        if (!this.isKey(column.getField()))\r\n            column.hide();\r\n    }\r\n\r\n    setEditor (e, column, editor) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                let width = column.getWidth(); // For some weird reason, width gets lost. Hence. \r\n                this.editors[column.getField()] = editor;\r\n                if (editor === \"codemirror\" || editor === \"date\") editor = \"textarea\";\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {editor, width});\r\n                break;\r\n            }\r\n            //this.ref.table.updateColumnDefinition(currentDefs[j].field, {editor: newVal});\r\n        }\r\n        //this.ref.table.setColumns(currentDefs);\r\n        //currentDefs = this.ref.table.getColumnDefinitions();\r\n    }\r\n\r\n    setEditorToInput (e, column) {\r\n        this.setEditor(e, column, 'input');\r\n    }\r\n\r\n    setEditorToTextArea (e, column) {\r\n        this.setEditor(e, column, 'textarea');\r\n    }\r\n\r\n    setEditorToCodeMirror (e, column) {\r\n        this.setEditor(e, column, 'codemirror');\r\n    }\r\n\r\n    setEditorToAutocomplete (e, column) {\r\n        this.setEditor(e, column, 'autocomplete');\r\n    }\r\n\r\n    setEditorToDate (e, column) {\r\n        this.setEditor(e, column, 'date');\r\n    }\r\n\r\n    setEditorToFalse (e, column) {\r\n        this.setEditor(e, column, false);\r\n    }\r\n\r\n    plusFiftyToWidth (e, column) {\r\n        console.log(\"Column: \", column.getWidth());\r\n        let curWidth = column.getWidth();\r\n        column.setWidth(curWidth + 50);\r\n    }\r\n\r\n    markdownFormatter (cell, formatterParams) {\r\n        let value = cell.getValue();\r\n        if (typeof value != \"string\") return value;\r\n        console.log(\"Value is: \", value);\r\n        value = MarkdownIt.render(value);\r\n        return `<div style=\"white-space:normal;word-wrap:break-word;\">${value}</div>`;\r\n    }\r\n\r\n    setFormatter (e, column, formatter) {\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {formatter});\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    setFormatterToPlainText (e, column) {\r\n        this.setFormatter(e, column, 'plaintext');\r\n    }\r\n\r\n    setFormatterToTextArea (e, column) {\r\n        this.setFormatter(e, column, 'textarea');\r\n    }\r\n\r\n    setHdrFilterType (e, column, headerFilterType) {\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {headerFilterType});\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    setHdrFilterTypeToNumber (e, column) {\r\n        this.setHdrFilterType(e, column, 'number');\r\n    }\r\n    setHdrFilterTypeToText (e, column) {\r\n        this.setHdrFilterType(e, column, 'input');\r\n    }\r\n    setHozAlign(e, column, hozAlign) {\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {hozAlign});\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    setVertAlign(e, column, vertAlign) {\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {vertAlign});\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    toggleSingleFilter (e, column) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        //console.log(\"Current definitions: \", currentDefs);\r\n        //console.log(\"Column: \", column);\r\n        console.log(\"Column: \", column.getWidth());\r\n        let cols = this.ref.table.getColumns();\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                newVal = currentDefs[j].headerFilter === 'input' ? false : 'input';\r\n                currentDefs[j].headerFilter = newVal;\r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {headerFilter: newVal});\r\n                break;\r\n            }\r\n            // Uncomment both the below if you wish perfect columns.\r\n            //currentDefs[j].width = cols[j].getWidth();\r\n        }\r\n        //this.ref.table.setColumns(currentDefs);\r\n    }\r\n\r\n    dsDescription () {\r\n        const { match, dsHome } = this.props;\r\n        let dsView = match.params.dsView;\r\n        let initialDesc = \"\", me = this;\r\n        try {\r\n            // First time, set it from the store. Subsequent edits will remain in this.state.\r\n            if (this.state.dsDescription === null) {\r\n                if (dsHome.dsViews[dsView].dsDescription.dsDescription)\r\n                    this.setState({dsDescription: dsHome.dsViews[dsView].dsDescription.dsDescription});\r\n            }\r\n        } catch (e) { }\r\n\r\n        let retJsx = \r\n        <Row>\r\n            <Col md={2} sm={2} xs={2}> \r\n                <b>Dataset Description: </b>\r\n            </Col>\r\n            <Col md={10} sm={10} xs={10}> \r\n                <Form.Control as=\"textarea\" rows=\"3\" defaultValue={this.state.dsDescription} onChange={(event) => {\r\n                    let value = event.target.value;\r\n                    let key = \"__dg__dsDescription\"\r\n                    if (me.state.debounceTimers[key]) {\r\n                        clearTimeout(me.state.debounceTimers[key]);\r\n                    }\r\n                    me.state.debounceTimers[key] = setTimeout(() => {\r\n                        delete me.state.debounceTimers[key];\r\n                        //if (!value) return;\r\n                        me.setState({dsDescription: value})\r\n                    }, 1000)\r\n                }} />\r\n            </Col>\r\n        </Row>\r\n        return retJsx;\r\n    }\r\n\r\n    editorParamsControl (col) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let epc = \"\";\r\n\r\n        try {\r\n            let me = this;\r\n            let columnDef = this.ref.table.getColumn(col.field).getDefinition();\r\n            //console.log(\"editorParamsControl got called: \", columnDef);\r\n            if (columnDef.editor === \"autocomplete\") {\r\n                let valueStr = \"\", checked = true, condValues = false, condExprStr = \"\";\r\n                try {\r\n                    valueStr = columnDef.editorParams.values.join(', ');\r\n                } catch (e) {}\r\n                try {\r\n                    checked = columnDef.editorParams.multiselect;\r\n                } catch (e) {}\r\n                try {\r\n                    condValues = columnDef.editorParams.conditionalValues;\r\n                } catch (e) {}\r\n                try {\r\n                    condExprStr = columnDef.editorParams.conditionalExprs.join('\\n');\r\n                } catch (e) {}\r\n                epc = <div>\r\n                        Values:\r\n                        <Form.Control type=\"text\" defaultValue={valueStr} onChange={(event) => {\r\n                                let value = event.target.value;\r\n                                if (me.state.debounceTimers[col.field]) {\r\n                                    clearTimeout(me.state.debounceTimers[col.field]);\r\n                                }\r\n                                me.state.debounceTimers[col.field] = setTimeout(() => {\r\n                                    delete me.state.debounceTimers[col.field];\r\n                                    // trigger render again no matter what changed. \r\n                                    //me.setState({somethingChanged: me.state.somethingChanged++});        \r\n                                    if (!value) return;\r\n                                    let valArray = value.split(',').map(v => v.trim());\r\n                                    let editorParams = { \r\n                                        ...columnDef.editorParams,\r\n                                        values: valArray,\r\n                                        showListOnEmpty: true,\r\n                                        allowEmpty: true\r\n                                    }\r\n                                    console.log(\"EditorParams: \", editorParams);\r\n                                    me.ref.table.updateColumnDefinition(col.field, {editorParams});\r\n        \r\n                                }, 1000)\r\n                        }} />\r\n                        <Form.Check type=\"checkbox\" label=\"&nbsp; autocomplete multi\" checked={checked} onChange={(event) => {\r\n                            let checked = event.target.checked;\r\n                            let curEditorParams = columnDef.editorParams || {}\r\n                            let editorParams = { \r\n                                ...curEditorParams,\r\n                                multiselect: checked\r\n                            }\r\n                            // trigger render again no matter what changed. \r\n                            me.setState({somethingChanged: me.state.somethingChanged++});\r\n                            me.ref.table.updateColumnDefinition(col.field, {editorParams});\r\n                        }}/>\r\n                        <Form.Check type=\"checkbox\" label=\"&nbsp; autocomplete cond-values\" checked={condValues} onChange={(event) => {\r\n                            let checked = event.target.checked;\r\n                            let curEditorParams = columnDef.editorParams || {}\r\n                            let editorParams = { \r\n                                ...curEditorParams,\r\n                                conditionalValues: checked\r\n                            }\r\n                            // trigger render again no matter what changed. \r\n                            me.setState({somethingChanged: me.state.somethingChanged++});\r\n                            me.ref.table.updateColumnDefinition(col.field, {editorParams});\r\n                        }}/>\r\n                        { condValues && \r\n                            <Form.Control as=\"textarea\" rows=\"3\" defaultValue={condExprStr} onChange={(event) => {\r\n                                let value = event.target.value;\r\n                                if (me.state.debounceTimers[col.field]) {\r\n                                    clearTimeout(me.state.debounceTimers[col.field]);\r\n                                }\r\n                                me.state.debounceTimers[col.field] = setTimeout(() => {\r\n                                    delete me.state.debounceTimers[col.field];\r\n                                    // trigger render again no matter what changed. \r\n                                    //me.setState({somethingChanged: me.state.somethingChanged++});        \r\n                                    if (!value) return;\r\n                                    let condExprs = value.split('\\n').map(v => v.trim());\r\n                                    condExprs = condExprs.filter(v=> v !== \"\");\r\n                                    let editorParams = { \r\n                                        ...columnDef.editorParams,\r\n                                        conditionalExprs: condExprs,\r\n                                        showListOnEmpty: true,\r\n                                        allowEmpty: true\r\n                                    }\r\n                                    me.ref.table.updateColumnDefinition(col.field, {editorParams});\r\n                                }, 1000)\r\n                            }} />\r\n                        }\r\n                      </div>\r\n            }\r\n        } catch (e) {}\r\n        return epc;\r\n    }\r\n\r\n\r\n    step1 () {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let s1 = [];\r\n        let editorOptions = [];\r\n        ['line', 'paragraph', 'codemirror', 'autocomplete', 'date'].map((v) => {\r\n            let row = {};\r\n            row.value = v;\r\n            row.label = v;\r\n            editorOptions.push(row);\r\n        })\r\n        let filterOptions = [];\r\n        ['number', 'text'].map((v) => {\r\n            let row = {};\r\n            row.value = v;\r\n            row.label = v;\r\n            filterOptions.push(row);\r\n        })\r\n        let hozAlignOptions = [];\r\n        ['left', 'center', 'right'].map((v)=> {\r\n            let row = {};\r\n            row.value = v;\r\n            row.label = v;\r\n            hozAlignOptions.push(row);\r\n        })\r\n        let vertAlignOptions = [];\r\n        ['top', 'middle', 'bottom'].map((v)=> {\r\n            let row = {};\r\n            row.value = v;\r\n            row.label = v;\r\n            vertAlignOptions.push(row);\r\n        })\r\n\r\n        // try-catch for invalid access to columnAttrs if it is not loaded yet. \r\n        try {\r\n            let me = this;\r\n            let label = \r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                        <b>Column Attributes: </b>\r\n                    </Col>\r\n                </Row>\r\n            s1.push(label); s1.push(<br/>);\r\n            for (let i = 0; i < dsHome.dsViews[dsView].columnAttrs.length; i++) {\r\n                let col = dsHome.dsViews[dsView].columnAttrs[i];\r\n                let editorCurVal = {};\r\n                if (col.editor === \"textarea\") {\r\n                    editorCurVal = editorOptions[1];\r\n                } else if (col.editor === \"input\") {\r\n                    editorCurVal = editorOptions[0];\r\n                } else if (col.editor === \"autocomplete\") {\r\n                    editorCurVal = editorOptions[3];\r\n                } else if (col.editor === \"codemirror\") {\r\n                    editorCurVal = editorOptions[2];\r\n                } else if (col.editor === \"date\") {\r\n                    editorCurVal = editorOptions[4];\r\n                }\r\n                let hdrFilterTypeCurVal = {};\r\n                if (col.headerFilterType === \"input\") {\r\n                    hdrFilterTypeCurVal = filterOptions[1];\r\n                } else if (col.headerFilterType === \"number\") {\r\n                    hdrFilterTypeCurVal = filterOptions[0];\r\n                } else {\r\n                    ;\r\n                }\r\n                let hozAlignCurVal = {};\r\n                if (col.hozAlign === 'left') {\r\n                    hozAlignCurVal = hozAlignOptions[0]\r\n                } else if (col.hozAlign === 'center') {\r\n                    hozAlignCurVal = hozAlignOptions[1]\r\n                } else if (col.hozAlign === 'right') {\r\n                    hozAlignCurVal = hozAlignOptions[2]\r\n                }\r\n                let vertAlignCurVal = {};\r\n                if (col.vertAlign === 'top') {\r\n                    vertAlignCurVal = vertAlignOptions[0]\r\n                } else if (col.vertAlign === 'middle') {\r\n                    vertAlignCurVal = vertAlignOptions[1]\r\n                } else if (col.vertAlign === 'bottom') {\r\n                    vertAlignCurVal = vertAlignOptions[2]\r\n                }\r\n                let conditionalFormatting = false, condFormatExprStr = \"\";\r\n                // XXX: This function should be using columnDef everywhere and not just col!\r\n                let columnDef = this.ref.table.getColumn(col.field).getDefinition();\r\n                try {\r\n                    conditionalFormatting = columnDef.formatterParams.conditionalFormatting;\r\n                } catch (e) {}\r\n                try {\r\n                    condFormatExprStr = columnDef.formatterParams.conditionalExprs.join('\\n');\r\n                } catch (e) {}\r\n\r\n                s1.push(<Row style={{'border': '1px solid black', 'border-radius': '5px', 'padding': '10px'}}>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>{col.field}</b>\r\n                    </Col>\r\n                    <Col md={2} sm={2} xs={2}>\r\n                        Hoz-Align:\r\n                        <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"hozAlignOptions\" options={hozAlignOptions} defaultValue={hozAlignCurVal} onChange={(value) => { \r\n                                console.log(\"Setting for: \", col.field, value);\r\n                                let column = me.ref.table.getColumn(col.field);\r\n                                me.setHozAlign(\"\", column, value.value)\r\n                            }}\r\n                        />\r\n                        Vert-Align:\r\n                        <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"vertAlignOptions\" options={vertAlignOptions} defaultValue={vertAlignCurVal} onChange={(value) => { \r\n                                console.log(\"Setting for: \", col.field, value);\r\n                                let column = me.ref.table.getColumn(col.field);\r\n                                me.setVertAlign(\"\", column, value.value)\r\n                            }}\r\n                        />\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}>\r\n                        Editor: \r\n                        <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"editorOptions\" options={editorOptions} defaultValue={editorCurVal} onChange={(value) => { \r\n                                console.log(\"Setting for: \", col.field);\r\n                                let column = me.ref.table.getColumn(col.field);\r\n                                if (value.value === \"paragraph\")\r\n                                    me.setEditorToTextArea(\"\", column);\r\n                                else if (value.value === \"codemirror\")\r\n                                    me.setEditorToCodeMirror(\"\", column);\r\n                                else if (value.value === \"line\")\r\n                                    me.setEditorToInput(\"\", column);\r\n                                else if (value.value === \"autocomplete\")\r\n                                    me.setEditorToAutocomplete(\"\", column);\r\n                                else if (value.value === \"date\")\r\n                                    me.setEditorToDate(\"\", column);\r\n\r\n                                // trigger render again\r\n                                me.setState({somethingChanged: me.state.somethingChanged++});\r\n                            }}\r\n                        />\r\n                        {this.editorParamsControl(col)}\r\n                        Hdr-filter-type: \r\n                        <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"filterOptions\" options={filterOptions} defaultValue={hdrFilterTypeCurVal} onChange={(value) => { \r\n                                console.log(\"Setting for: \", col.field, value);\r\n\r\n                                let column = me.ref.table.getColumn(col.field);\r\n                                if (value.value === \"number\")\r\n                                    me.setHdrFilterTypeToNumber(\"\", column);\r\n                                else if (value.value === \"text\") \r\n                                    me.setHdrFilterTypeToText(\"\", column);\r\n                            }}\r\n                        />\r\n                        <Form.Check type=\"checkbox\" label=\"&nbsp; conditional formatting\" checked={conditionalFormatting} onChange={(event) => {\r\n                            let checked = event.target.checked;\r\n                            let curFormatterParams = columnDef.formatterParams || {}\r\n                            let formatterParams = { \r\n                                ...curFormatterParams,\r\n                                conditionalFormatting: checked\r\n                            }\r\n                            // trigger render again no matter what changed. \r\n                            me.setState({somethingChanged: me.state.somethingChanged++});\r\n                            me.ref.table.updateColumnDefinition(col.field, { formatterParams });\r\n                        }}/>\r\n                        { conditionalFormatting && \r\n                            <Form.Control as=\"textarea\" rows=\"3\" defaultValue={condFormatExprStr} onChange={(event) => {\r\n                                let value = event.target.value;\r\n                                if (me.state.debounceTimers[col.field]) {\r\n                                    clearTimeout(me.state.debounceTimers[col.field]);\r\n                                }\r\n                                me.state.debounceTimers[col.field] = setTimeout(() => {\r\n                                    delete me.state.debounceTimers[col.field];\r\n                                    // trigger render again no matter what changed. \r\n                                    //me.setState({somethingChanged: me.state.somethingChanged++});        \r\n                                    if (!value) return;\r\n                                    let curFormatterParams = columnDef.formatterParams || {}\r\n                                    let condExprs = value.split('\\n').map(v => v.trim());\r\n                                    condExprs = condExprs.filter(v=> v !== \"\");\r\n                                    let formatterParams = { \r\n                                        ...curFormatterParams,\r\n                                        conditionalExprs: condExprs,\r\n                                    }\r\n                                    me.setState({somethingChanged: me.state.somethingChanged++});\r\n                                    me.ref.table.updateColumnDefinition(col.field, { formatterParams });\r\n                                }, 1000)\r\n                            }} />\r\n                        }\r\n\r\n\r\n\r\n                    </Col>\r\n                </Row>);\r\n                s1.push(<br/>);\r\n            }\r\n        } catch (e) {}\r\n\r\n        return <div>{s1}</div>;\r\n    }\r\n\r\n    step2 () {\r\n        const { match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let headerMenuWithoutHide = [\r\n            {\r\n                label:\"Toggle Filters\",\r\n                action: this.toggleSingleFilter\r\n            },\r\n            {\r\n                label:\"Set Editor to 'line'\",\r\n                action: this.setEditorToInput\r\n            },\r\n            {\r\n                label:\"Set Editor to 'paragraph'\",\r\n                action: this.setEditorToTextArea\r\n            },\r\n            {\r\n                label:\"Disable editing\",\r\n                action: this.setEditorToFalse\r\n            },\r\n            {\r\n                label:\"Set Formatter to 'line'\",\r\n                action: this.setFormatterToPlainText\r\n            },\r\n            {\r\n                label:\"Set Formatter to 'paragraph'\",\r\n                action: this.setFormatterToTextArea\r\n            },\r\n            {\r\n                label:\"Set header filter type to number\",\r\n                action: this.setHdrFilterTypeToNumber\r\n            },\r\n            {\r\n                label:\"Set header filter type to text\",\r\n                action: this.setHdrFilterTypeToText\r\n            },\r\n            {\r\n                label:\"Plus 50 to column width\",\r\n                action: this.plusFiftyToWidth\r\n            },\r\n        ];\r\n        let headerMenuWithHide = [\r\n            {\r\n                label:\"Toggle Filters\",\r\n                action: this.toggleSingleFilter\r\n            },\r\n            {\r\n                label:\"Set Editor to 'line'\",\r\n                action: this.setEditorToInput\r\n            },\r\n            {\r\n                label:\"Set Editor to 'paragraph'\",\r\n                action: this.setEditorToTextArea\r\n            },\r\n            {\r\n                label:\"Disable editing\",\r\n                action: this.setEditorToFalse\r\n            },\r\n            {\r\n                label:\"Set Formatter to 'line'\",\r\n                action: this.setFormatterToPlainText\r\n            },\r\n            {\r\n                label:\"Set Formatter to 'paragraph'\",\r\n                action: this.setFormatterToTextArea\r\n            },\r\n            {\r\n                label:\"<i class='fas fa-eye-slash'></i> Hide Column\",\r\n                action: this.hideColumn\r\n            },            \r\n            {\r\n                label:\"Set header filter type to number\",\r\n                action: this.setHdrFilterTypeToNumber\r\n            },\r\n            {\r\n                label:\"Set header filter type to text\",\r\n                action: this.setHdrFilterTypeToText\r\n            },\r\n            {\r\n                label:\"Plus 50 to column width\",\r\n                action: this.plusFiftyToWidth\r\n            },\r\n        ];\r\n        let s2 = '';\r\n\r\n        if (dsHome && dsHome.dsViews && dsHome.dsViews[dsView] && dsHome.dsViews[dsView].columns) {\r\n            let columns = [];\r\n            for (let i = 0; i < dsHome.dsViews[dsView].columnAttrs.length; i++) {\r\n                let col = JSON.parse(JSON.stringify(dsHome.dsViews[dsView].columnAttrs[i]));\r\n                if (!this.isKey(col.field)) {\r\n                    col.headerMenu = headerMenuWithHide;\r\n                } else {\r\n                    col.headerMenu = headerMenuWithoutHide;\r\n                }\r\n                if (!this.editors[col.field])\r\n                    this.editors[col.field] = col.editor;\r\n                if (col.editor === \"codemirror\" || col.editor === \"date\") col.editor = \"textarea\";\r\n                col.editable = () => { return false };\r\n                columns.push(col);\r\n            }\r\n            s2 = <Row>\r\n                        <div>\r\n                            <MyTabulator\r\n                                columns={columns}\r\n                                data={[]}\r\n                                options={{\r\n                                    ajaxURL: `${config.apiUrl}/ds/view/${this.props.match.params.dsName}/${dsView}/${user.user}`,\r\n                                    pagination:\"remote\",\r\n                                    paginationDataSent: {\r\n                                        page: 'page',\r\n                                        size: 'per_page' // change 'size' param to 'per_page'\r\n                                    },\r\n                                    paginationDataReceived: {\r\n                                        last_page: 'total_pages'\r\n                                    },\r\n                                    current_page: 1,\r\n                                    paginationSize: 20,\r\n                                    ajaxResponse: function (url, params, response) {\r\n                                        console.log('ajaxResponse', url);\r\n                                        return response; //return the response data to tabulator\r\n                                    },\r\n                                    ajaxError: function (error) {\r\n                                        console.log('ajaxError', error);\r\n                                    },\r\n                                    movableColumns: true,\r\n                                    cellEdited: this.cellEdited,\r\n                                    index: \"_id\",\r\n                                    ajaxSorting: true,\r\n                                    ajaxFiltering: true,\r\n                                    rowFormatter: (row) => {\r\n                                        if(!row.getData()._id){\r\n                                            row.getElement().style.backgroundColor = \"lightGray\";\r\n                                        } else {\r\n                                            row.getElement().style.backgroundColor = \"white\";\r\n                                        }                               \r\n                                    },\r\n                                    renderComplete: this.renderComplete,\r\n                                }}\r\n                                innerref={this.recordRef}\r\n                            />\r\n                        </div>\r\n                    </Row>            \r\n        }\r\n        return s2;\r\n    }\r\n\r\n\r\n    render () {\r\n        const { match, dsHome } = this.props;\r\n        let dsView = match.params.dsView;\r\n        let dsName = match.params.dsName;\r\n\r\n        document.title = `Edit-view: ${dsName}`;\r\n        \r\n        try {\r\n            if (this.state.jira === null && dsHome.dsViews[dsView].jiraConfig) {\r\n                let jiraFieldMapping = this.state.jiraFieldMapping;\r\n                for (let key in dsHome.dsViews[dsView].jiraConfig.jiraFieldMapping) {\r\n                    jiraFieldMapping += `\"${key}\" -> \"${dsHome.dsViews[dsView].jiraConfig.jiraFieldMapping[key]}\"` + '\\n';\r\n                }\r\n                this.setState({ jira: dsHome.dsViews[dsView].jiraConfig.jira, \r\n                                jql: dsHome.dsViews[dsView].jiraConfig.jql, \r\n                                jiraFieldMapping\r\n                             });\r\n            }\r\n        } catch (e) {};\r\n        try {\r\n            if (this.state.fixedHeight === null && dsHome.dsViews[dsView].otherTableAttrs) {\r\n                this.setState({ fixedHeight: dsHome.dsViews[dsView].otherTableAttrs.fixedHeight, \r\n                             });\r\n            }\r\n        } catch (e) {};\r\n        let pushButton = \"\"\r\n        try {\r\n            if (dsHome.dsSetView.status === \"setting\") {\r\n                //console.log(\"Button is disabled\");\r\n                pushButton = <Button disabled onClick={this.pushColumnDefs}> Set View </Button>\r\n            }\r\n        } catch (e) {};\r\n        if (!pushButton) {\r\n            //console.log(\"Button is enabled\");\r\n            pushButton = <Button onClick={this.pushColumnDefs}> Set View </Button>\r\n        }\r\n\r\n        let me = this;\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                        <h3 style={{ 'float': 'center' }}>Dataset view: {match.params.dsName} | {match.params.dsView}</h3>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                {this.dsDescription()}\r\n                <br/>\r\n                {this.step1()}\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Add Jira query\" checked={this.state.jira} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({jira: checked}); \r\n                                }}/>\r\n                    </Col>\r\n                    { this.state.jira && \r\n                        <Col md={6} sm={6} xs={6}> \r\n                        <Form.Control type=\"text\" defaultValue={this.state.jql} onChange={(event) => {\r\n                                let value = event.target.value;\r\n                                if (me.state.debounceTimers[\"__dsViewEdit__main\"]) {\r\n                                    clearTimeout(me.state.debounceTimers[\"__dsViewEdit__main\"]);\r\n                                }\r\n                                me.state.debounceTimers[\"__dsViewEdit__main\"] = setTimeout(() => {\r\n                                    delete me.state.debounceTimers[\"__dsViewEdit__main\"];\r\n                                    if (!value) return;\r\n                                    me.setState({jql: value});\r\n                                }, 1000)\r\n                            }} />\r\n                        </Col> \r\n                    }\r\n                </Row>\r\n                <Row>\r\n                    { this.state.jira && \r\n                        <Col md={2} sm={2} xs={2}> \r\n                            <b>Jira field mapping: </b>\r\n                        </Col>\r\n                    }\r\n                    { this.state.jira && \r\n                        <Col md={6} sm={6} xs={6}> \r\n                        <Form.Control as=\"textarea\" rows=\"3\" defaultValue={this.state.jiraFieldMapping} onChange={(event) => {\r\n                                let value = event.target.value;\r\n                                if (me.state.debounceTimers[\"__dsViewEdit__main\"]) {\r\n                                    clearTimeout(me.state.debounceTimers[\"__dsViewEdit__main\"]);\r\n                                }\r\n                                me.state.debounceTimers[\"__dsViewEdit__main\"] = setTimeout(() => {\r\n                                    delete me.state.debounceTimers[\"__dsViewEdit__main\"];\r\n                                    // trigger render again no matter what changed. \r\n                                    //me.setState({somethingChanged: me.state.somethingChanged++});        \r\n                                    if (!value) return;\r\n                                    me.setState({jiraFieldMapping: value});\r\n                                }, 1000)\r\n                            }} />\r\n                        </Col>\r\n                    }\r\n                </Row>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Fixed height\" checked={this.state.fixedHeight} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({fixedHeight: checked}); \r\n                                }}/>\r\n                    </Col>\r\n                </Row>\r\n                <AccessCtrl dsName={dsName} dsView={dsView} onChange={(value) => {\r\n                    console.log(`Received access control as:`, value);\r\n                    me.setState({aclConfig: value});\r\n                }}>\r\n                </AccessCtrl>\r\n                <br/>\r\n                <Row>\r\n                    <Button onClick={this.pushColumnDefs}> Set View </Button>\r\n                    <Button onClick={this.showAllCols}> Show all columns </Button>\r\n                    {/*\r\n                    <Button onClick={this.addCol}> Add Column </Button>\r\n                     */}\r\n                    {this.setViewStatus()}\r\n                </Row>\r\n                {this.step2()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cDsViewEdit = connect(mapStateToProps)(DsViewEdit);\r\n\r\n\r\nexport default cDsViewEdit","import React, { Component } from 'react'\r\nimport { Row, Col, Button, Form } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport { dsConstants } from '../../constants';\r\nimport MyTabulator from './MyTabulator';\r\nimport MyTextArea from './MyTextArea';\r\n//import 'highlight.js/styles/solarized-light.css'\r\nimport MyAutoCompleter from './MyAutoCompleter';\r\nimport MySingleAutoCompleter from './MySingleAutoCompleter';\r\n\r\nimport './simpleStyles.css';\r\nlet MarkdownIt = new require('markdown-it')({\r\n    linkify: true,\r\n    html: true\r\n}).use(require('markdown-it-bracketed-spans')).use(require('markdown-it-attrs')).use(require('markdown-it-container'), 'code').use(require('markdown-it-highlightjs'));\r\n\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\nclass DsEditLog extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            firstTime: true,\r\n            filterButtonText: 'Enable Filters',\r\n            editingButtonText: 'Disable Editing',\r\n            pageSize: 30,\r\n            totalRecs: 0, \r\n\r\n            singleClickEdit: false,\r\n            showAllFilters: false,\r\n            disableEditing: false,\r\n        };\r\n        this.ref = null;\r\n        \r\n        this.lockedByOthersCells = {};\r\n        this.firstRenderCompleted = false;\r\n        this.cellImEditing = null;\r\n\r\n        this.renderComplete = this.renderComplete.bind(this);\r\n        this.cellEditCheck = this.cellEditCheck.bind(this);\r\n\r\n        this.recordRef = this.recordRef.bind(this);\r\n        this.downloadXlsx = this.downloadXlsx.bind(this);\r\n        this.toggleFilters = this.toggleFilters.bind(this);\r\n        this.toggleSingleFilter = this.toggleSingleFilter.bind(this);\r\n        this.ajaxResponse = this.ajaxResponse.bind(this);\r\n        this.copyToClipboard = this.copyToClipboard.bind(this);\r\n\r\n        let singleClickEditFrmLocal = localStorage.getItem(\"singleClickEdit\");\r\n        singleClickEditFrmLocal = JSON.parse(singleClickEditFrmLocal);\r\n        this.state.singleClickEdit = singleClickEditFrmLocal;\r\n    }\r\n    componentDidMount () {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n    }\r\n    componentWillUnmount () {\r\n        const { dispatch } = this.props;\r\n    }\r\n\r\n    renderComplete () {\r\n        const { match } = this.props;\r\n        let dsName = match.params.dsName; \r\n    }\r\n\r\n    cellEditCheck (cell) {      \r\n        return false;\r\n    }\r\n\r\n\r\n    toggleFilters () {\r\n        const { dsHome, match } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        //console.log(\"Current definitions: \", currentDefs);\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            newVal = currentDefs[j].headerFilter ? false : 'input';\r\n            currentDefs[j].headerFilter = newVal;\r\n            try {\r\n                // If the headerFilter has to be set, then set it from the backend value. \r\n                if (newVal) {\r\n                    if (dsHome.dsViews[dsView].columnAttrs[j].headerFilterType)\r\n                        newVal = dsHome.dsViews[dsView].columnAttrs[j].headerFilterType;\r\n                }\r\n            } catch (e) {}\r\n            //this.ref.table.updateColumnDefinition(currentDefs[j].field, {editor: newVal});\r\n        }\r\n        this.ref.table.setColumns(currentDefs);\r\n        this.setState( { filterButtonText: newVal ? 'Disable Filtering' : 'Enable Filtering'} );\r\n        //let row = this.ref.table.getRows();\r\n        //console.log(row);\r\n        //row.normalizeHeight();\r\n\r\n        //this.ref.table.redraw(true);\r\n    }\r\n\r\n    copyToClipboard () {\r\n        // You have to also set 'clipboard' to true in table options.\r\n        this.ref.table.copyToClipboard();\r\n    }\r\n\r\n    recordRef (ref) {\r\n        // setting state is causing grief to the Tabulator component. \r\n        //this.setState({ ref });\r\n        this.ref = ref;\r\n        return true;\r\n    }\r\n\r\n    downloadXlsx () {\r\n        const { dispatch, match, user } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        // XXX: Doesn't work from the front end. \r\n        // this.ref.table.download(\"xlsx\", \"data.xlsx\", { sheetName: \"export\" })\r\n\r\n        dispatch(dsActions.downloadXlsx(dsName, dsView, user.user));\r\n    }\r\n\r\n\r\n    toggleSingleFilter (e, column) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                newVal = currentDefs[j].headerFilter ? false : 'input';\r\n                currentDefs[j].headerFilter = newVal;\r\n                try {\r\n                    // If the headerFilter has to be set, then set it from the backend value. \r\n                    if (newVal) {\r\n                        if (dsHome.dsViews[dsView].columnAttrs[j].headerFilterType)\r\n                            newVal = dsHome.dsViews[dsView].columnAttrs[j].headerFilterType;\r\n                        /*\r\n                        if (currentDefs[j].field === \"SlNo\") {\r\n                            currentDefs[j].headerFilter = 'number';\r\n                            newVal = 'number'\r\n                        }*/\r\n                    }\r\n                } catch (e) {}\r\n                // Comment this line and uncomment couple of lines below to use setCOlumns\r\n                // if you don't like the header row width. \r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {headerFilter: newVal});\r\n            }\r\n        }\r\n        // uncomment this and comment updatecolumnDefinition above if you don't like header width. \r\n        //this.ref.table.setColumns(currentDefs);\r\n    }\r\n\r\n    setColumnDefinitions () {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let headerMenu = [\r\n            {\r\n                label:\"Toggle Filters\",\r\n                action: this.toggleSingleFilter\r\n            }\r\n        ];\r\n        let columns = [];\r\n        let columnAttrs = [\r\n            {field: 'opr', title: 'opr', width: 100, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n            {field: 'status', title: 'status', width: 100, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n            {field: 'user', title: 'user', width: 150, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n            {field: 'date', title: 'date', width: 150, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n            {field: 'column', title: 'column', width: 150, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n            {field: 'selector', title: 'selector', width: 200, formatter: \"textarea\", headerTooltip: true}, \r\n            {field: 'oldVal', title: 'oldVal', width: 200, formatter: \"textarea\", headerTooltip: true}, \r\n            {field: 'newVal', title: 'newVal', width: 200, formatter: \"textarea\", headerTooltip: true}, \r\n            {field: 'doc', title: 'doc', width: 300, formatter: \"textarea\", headerTooltip: true}, \r\n        ];\r\n        for (let i = 0; i < columnAttrs.length; i++) {\r\n            let col = JSON.parse(JSON.stringify(columnAttrs[i]));\r\n            col.headerMenu = headerMenu;\r\n            col.editable = this.cellEditCheck;\r\n\r\n            \r\n            if (col.field === \"selector\" || col.field === \"doc\") {\r\n                col.formatter = (cell, formatterParams) => {\r\n                    let value = cell.getValue();\r\n                    var newLine = String.fromCharCode(13, 10);                \r\n                    if (value) {\r\n                        value = value.replace(/\\\\\\\\n/g, '__dg__newline');\r\n                        value = value.replace(/\\\\n/g, newLine);\r\n                        value = value.replace(/__dg__newline/g, '\\\\n');                    \r\n                        //return `<pre>${value}</pre>`;\r\n                        return `<div style=\"white-space:pre-wrap;word-wrap:break-word;\">${value}</div>`;\r\n                    }\r\n                    return '';\r\n                }\r\n            }\r\n\r\n            if (col.editor === \"textarea\" || (col.editor === false && col.formatter === \"textarea\") || (col.editor === \"autocomplete\")) {\r\n                // By default, all textareas support markdown now. \r\n                col.formatter = (cell, formatterParams) => {\r\n                    let value = cell.getValue();\r\n                    if (typeof value != \"string\") return value;\r\n                    value = MarkdownIt.render(value);\r\n                    return `<div style=\"white-space:normal;word-wrap:break-word;margin-bottom:-12px\">${value}</div>`;\r\n                }\r\n                col.variableHeight = true;\r\n                if (col.editor === \"textarea\") {\r\n                    // Set the editor to a fixed one for special keys. \r\n                    col.editor = MyTextArea;\r\n                    col.cellEditCancelled = (cell) => {\r\n                        cell.getRow().normalizeHeight();\r\n                    }\r\n                }\r\n            }\r\n            columns.push(col);\r\n        }\r\n        return columns;\r\n    }\r\n\r\n    ajaxResponse (url, params, response) {\r\n        console.log('ajaxResponse: ', response);\r\n        this.setState({ totalRecs: response.total});\r\n        return response; \r\n    }\r\n\r\n    step2 () {\r\n        const { match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let s2 = '';\r\n\r\n        let columns = this.setColumnDefinitions();\r\n        console.log(\"Columns: \", columns);\r\n        s2 = <Row>\r\n                    <div>\r\n                        <MyTabulator\r\n                            columns={columns}\r\n                            data={[]}\r\n                            options={{\r\n                                ajaxURL: `${config.apiUrl}/ds/view/editLog/${this.props.match.params.dsName}/${dsView}/${user.user}`,\r\n                                pagination:\"remote\",\r\n                                paginationDataSent: {\r\n                                    page: 'page',\r\n                                    size: 'per_page' // change 'size' param to 'per_page'\r\n                                },\r\n                                paginationDataReceived: {\r\n                                    last_page: 'total_pages'\r\n                                },\r\n                                current_page: 1,\r\n                                paginationSize: this.state.pageSize,\r\n                                paginationSizeSelector: [10, 25, 50, 100, 500, true],\r\n                                ajaxResponse: this.ajaxResponse,\r\n                                ajaxError: function (error) {\r\n                                    console.log('ajaxError', error);\r\n                                },\r\n                                index: \"_id\",\r\n                                ajaxSorting: true,\r\n                                ajaxFiltering: true,\r\n                                //height: \"500px\",\r\n                                //virtualDomBuffer: 500,\r\n                                clipboard: true,\r\n                                rowFormatter: (row) => {\r\n                                    if(!row.getData()._id){\r\n                                        row.getElement().style.backgroundColor = \"lightGray\";\r\n                                    } else {\r\n                                        row.getElement().style.backgroundColor = \"white\";\r\n                                    }  \r\n                                },\r\n                                cellMouseEnter: (e, cell) => {\r\n                                    if (cell.getElement().style.backgroundColor !== \"lightblue\") \r\n                                        cell.__dg__prevBgColor = cell.getElement().style.backgroundColor;\r\n                                    cell.getElement().style.backgroundColor = \"lightblue\";\r\n                                },\r\n                                cellMouseLeave: (e, cell) => {\r\n                                    cell.getElement().style.backgroundColor = cell.__dg__prevBgColor;\r\n                                    delete cell.__dg__prevBgColor;\r\n                                },\r\n                                renderComplete: this.renderComplete\r\n                            }}\r\n                            innerref={this.recordRef}\r\n                            />\r\n                    </div>\r\n                </Row>            \r\n        return s2;\r\n    }\r\n\r\n\r\n    render () {\r\n        const { match } = this.props;\r\n        let me = this;\r\n\r\n        document.title = `Edit-log: ${match.params.dsName}`;\r\n\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                        <h3 style={{ 'float': 'center' }}><label className=\"underline\">Editlog view: {match.params.dsName}</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <Form inline>\r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Show all filters\" checked={this.state.showAllFilters} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({showAllFilters: checked});\r\n                                    localStorage.setItem(\"showAllFilters\", JSON.stringify(checked));\r\n                                    me.toggleFilters();\r\n                                }}/>\r\n                    </Form>\r\n                    </Col>\r\n                </Row>\r\n                {/*\r\n                <Row>\r\n                    <Button onClick={this.copyToClipboard}> Copy-to-clipbard </Button>\r\n                </Row>  */}\r\n                <Row>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <b>Total records: {this.state.totalRecs}</b>\r\n                </Col>\r\n                </Row>\r\n                {this.step2()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cDsEditLog = connect(mapStateToProps)(DsEditLog);\r\n\r\n\r\nexport default cDsEditLog","import React, { Component } from 'react'\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom'\r\nimport { dsConstants } from '../../constants';\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport Select from 'react-select';\r\n\r\nclass DsBulkEdit extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            file: null,\r\n            formData: null,\r\n            range: \"\",\r\n            dsName: \"\",\r\n            setColsFrmSheet: false,\r\n            setRowsFrmSheet: false,\r\n            validate: false,\r\n            doIt: false\r\n        };\r\n        this.downloadXlsx = this.downloadXlsx.bind(this);\r\n        this.onFileSelect = this.onFileSelect.bind(this);\r\n        this.sheetSelectorOnChange = this.sheetSelectorOnChange.bind(this);\r\n        this.rangeOnChange = this.rangeOnChange.bind(this);\r\n        this.rangeSelectionDone = this.rangeSelectionDone.bind(this);\r\n    }\r\n\r\n    downloadXlsx () {\r\n        const { dispatch, match, user } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = \"default\";\r\n\r\n        dispatch(dsActions.downloadXlsx(dsName, dsView, user.user));\r\n    }\r\n\r\n    onFileSelect(event) {\r\n        const { dispatch, user } = this.props;\r\n        this.setState({file: event.target.files[0]});\r\n        let file = event.target.files[0];\r\n        if ( file ) {\r\n            let remoteFileName = user.user + '_' + file.name;\r\n            // Create an object of formData \r\n            const formData = new FormData(); \r\n            // Update the formData object \r\n            formData.append( \r\n                \"file\", \r\n                file,\r\n                remoteFileName\r\n            );     \r\n            this.setState({ file, formData });\r\n            dispatch(dsActions.uploadBulkEditXlsFile(remoteFileName, formData));\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const { dispatch } = this.props;\r\n        dispatch(dsActions.clearBulkEditStore());\r\n    }\r\n\r\n    componentWillUnmount () {\r\n    }\r\n\r\n    step1Status () {\r\n        const { dsHome } = this.props;\r\n        let s1Status = '';\r\n\r\n        if (dsHome && dsHome.dsBulkEdits && dsHome.dsBulkEdits.uploadStatus === 'fail') {\r\n            s1Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                    <b style={{color: 'red'}}>{dsHome.uploadError}</b>\r\n                                </Col>\r\n                        </Row>\r\n        }\r\n        if (dsHome && dsHome.dsBulkEdits && dsHome.dsBulkEdits.uploadStatus === 'success' && !dsHome.dsBulkEdits.sheetInfo.length) {\r\n            s1Status = <Row>\r\n                                <Col md={6} sm={6} xs={6}> \r\n                                <b style={{color: 'red'}}>Failed to recognize the sheets!</b>\r\n                                </Col>\r\n                        </Row>\r\n        }\r\n        return s1Status;\r\n    }\r\n    sheetSelectorOnChange (value) {\r\n        const { dispatch } = this.props;\r\n        console.log(value);\r\n        dispatch(dsActions.setSelectedSheet(value ? value.value : null));\r\n        // Drop the result on the floor if you are no longer the selected value. \r\n        // This is required for race-conditions when the user rapidly changes the\r\n        // selection. \r\n        // Or add a button to do the actual network call. \r\n    }\r\n\r\n    step2 () {\r\n        const { dsHome } = this.props;\r\n        let s2 = '';\r\n        if (dsHome && dsHome.dsBulkEdits && dsHome.dsBulkEdits.uploadStatus === 'success' && dsHome.dsBulkEdits.sheetInfo.length) {\r\n            let sheetOptions = [];\r\n            dsHome.dsBulkEdits.sheetInfo.map((v) => {\r\n                let row = {};\r\n                row.value = v;\r\n                row.label = v;\r\n                sheetOptions.push(row);\r\n            });\r\n            s2 = <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 2.</b> Select sheet:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Select className=\"basic-single\" classNamePrefix=\"select\" isClearable={true} name=\"sheetOptions\" options={sheetOptions} onChange={this.sheetSelectorOnChange}/>\r\n                    </Col>\r\n                 </Row>\r\n        }\r\n        return s2;\r\n    }\r\n\r\n    rangeOnChange (event) {\r\n        this.setState({ range: event.target.value });\r\n    }\r\n    rangeSelectionDone (e, doIt = false) {\r\n        const { dsHome, dispatch, match } = this.props;\r\n        let dsName = match.params.dsName;\r\n        if (doIt) {\r\n            this.setState({ doIt: true });\r\n        } else {\r\n            this.setState({ validate: true, doIt: false });\r\n            dispatch({ type: dsConstants.CLEAR_LOADSTATUS });\r\n        }\r\n        dispatch(dsActions.doBulkEditRequest(dsName, dsHome.dsBulkEdits.fileName, dsHome.dsBulkEdits.selectedSheet, this.state.range, this.state.setRowsFrmSheet, this.state.setColsFrmSheet, doIt));\r\n    }\r\n\r\n    step3 () {\r\n        const { dsHome } = this.props;\r\n        let s3 = ''; let me = this;\r\n        if (dsHome && dsHome.dsBulkEdits && dsHome.dsBulkEdits.selectedSheet && dsHome.dsBulkEdits.selectedSheet.length) {\r\n            s3 = <div>\r\n                 <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 3.</b> Specify range (must include hdrs):\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"text\" value={this.state.range} onChange={this.rangeOnChange} />\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Button onClick={this.rangeSelectionDone}> Validate! </Button> \r\n                    </Col>\r\n                 </Row>\r\n                 <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    </Col>\r\n                    <Col md={6} sm={6} xs={6}> \r\n                    <Form.Check type=\"checkbox\" label=\"&nbsp;\" checked={this.state.setRowsFrmSheet} onChange={(event) => {\r\n                            let checked = event.target.checked;\r\n                            me.setState({setRowsFrmSheet: checked})\r\n                        }}/>\r\n                    <b>Set data rows</b> as in specified range of the sheet (deletes all other rows). Uncheck this if you don't want to delete other rows in the db that is not specified in your sheet range.\r\n                    </Col>\r\n                 </Row>\r\n                 <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    </Col>\r\n                    <Col md={6} sm={6} xs={6}> \r\n                    <Form.Check type=\"checkbox\" label=\"&nbsp;\" checked={this.state.setColsFrmSheet} onChange={(event) => {\r\n                            let checked = event.target.checked;\r\n                            me.setState({setColsFrmSheet: checked})\r\n                        }}/>\r\n                    <b>Set data columns</b> as in specified range of the sheet (deletes all other columns). Uncheck this if you want to only bulk-edit the columns specified in your sheet range. All other column attributes will be untouched.\r\n                    </Col>\r\n                 </Row>\r\n                 </div>\r\n        }\r\n        return s3;\r\n    }\r\n\r\n    step3Status () {\r\n        const { dsHome, match } = this.props;\r\n        let dsName = match.params.dsName;\r\n        let s3Status = '';\r\n        let errorJsx, success = false;\r\n        try {\r\n            if (dsHome.dsBulkEdits.loadStatus.loadStatus) {\r\n                success = true;\r\n            }\r\n        } catch (e) {}\r\n        try {\r\n            if (!dsHome.dsBulkEdits.loadStatus.loadStatus) {\r\n                if (Object.keys(dsHome.dsBulkEdits.loadStatus.hdrErrors).length) {\r\n                    errorJsx = Object.entries(dsHome.dsBulkEdits.loadStatus.hdrErrors).map ((kv) => {\r\n                        return <div>[ {kv[0]} ] : [ <b style={{color: 'red'}}> {kv[1]} </b> ] </div>\r\n                    })\r\n                } else {\r\n                    errorJsx = <b style={{color: 'red'}}> {dsHome.dsBulkEdits.loadStatus.error} </b>;\r\n                }\r\n            }\r\n        } catch (e) {}\r\n        if (errorJsx) {\r\n            s3Status = <Row>\r\n                            <Col md={12} sm={12} xs={12}> \r\n                            <b>Error: </b>{errorJsx}\r\n                            </Col>                        \r\n                       </Row>\r\n        } else if (success) {\r\n            let url = `/ds/${dsName}/default`;\r\n            /*\r\n            s3Status = <Row>\r\n                            <br/><br/>\r\n                            <Col md={6} sm={6} xs={6}> \r\n                                <b style={{color: 'green'}}>Successfully updated: </b>\r\n                                <Link to={url}>Click here for your dataset</Link>\r\n                            </Col>\r\n                       </Row> */\r\n        }\r\n        return s3Status;\r\n    }\r\n\r\n    renderOprLog () {\r\n        const { dsHome } = this.props;\r\n        let s = \"\";\r\n        try {\r\n            let oprLog = dsHome.dsBulkEdits.loadStatus.oprLog;\r\n            s = <div><ol>\r\n                {\r\n                    oprLog.map(log => (<li>{log}</li>))\r\n                }\r\n            </ol></div>\r\n        } catch (e) {} \r\n        return s;\r\n    }\r\n    step4 () {\r\n        const { dsHome } = this.props;\r\n        let s4 = '';\r\n        if (this.state.validate && dsHome && dsHome.dsBulkEdits && dsHome.dsBulkEdits.loadStatus && dsHome.dsBulkEdits.loadStatus.loadStatus) {\r\n            s4 = <Row>\r\n                <Col md={2} sm={2} xs={2}> \r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}>\r\n                    <b>Will perform the following operations:</b><br/>\r\n                    {this.renderOprLog()}\r\n                </Col>\r\n                <Col md={4} sm={4} xs={4}> \r\n                <Button onClick={() => {this.rangeSelectionDone(null, true)}}> Do It! </Button> \r\n                </Col>\r\n            </Row>\r\n        }\r\n        return s4;\r\n    }\r\n\r\n    step4Status () {\r\n        const { dsHome, match } = this.props;\r\n        let dsName = match.params.dsName;\r\n        let s4Status = '';\r\n        let errorJsx, success = false;\r\n        try {\r\n            if (this.state.doIt && dsHome.dsBulkEdits.loadStatus.loadStatus) {\r\n                success = true;\r\n            }\r\n        } catch (e) {}\r\n        try {\r\n            if (this.state.doIt && !dsHome.dsBulkEdits.loadStatus.loadStatus) {\r\n                if (Object.keys(dsHome.dsBulkEdits.loadStatus.hdrErrors).length) {\r\n                    errorJsx = Object.entries(dsHome.dsBulkEdits.loadStatus.hdrErrors).map ((kv) => {\r\n                        return <div>[ {kv[0]} ] : [ <b style={{color: 'red'}}> {kv[1]} </b> ] </div>\r\n                    })\r\n                } else {\r\n                    errorJsx = <b style={{color: 'red'}}> {dsHome.dsBulkEdits.loadStatus.error} </b>;\r\n                }\r\n            }\r\n        } catch (e) {}\r\n        if (errorJsx) {\r\n            s4Status = <Row>\r\n                            <Col md={12} sm={12} xs={12}> \r\n                            <b>Error: </b>{errorJsx}\r\n                            </Col>                        \r\n                       </Row>\r\n        } else if (success) {\r\n            let url = `/ds/${dsName}/default`;\r\n            s4Status = <Row>\r\n                            <br/><br/>\r\n                            <Col md={6} sm={6} xs={6}> \r\n                                <b style={{color: 'green'}}>Successfully updated: </b>\r\n                                <Link to={url}>Click here for your dataset</Link>\r\n                            </Col>\r\n                       </Row>\r\n        }\r\n        return s4Status;\r\n    }\r\n\r\n\r\n    render () {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName;\r\n        document.title = `Bulk-edit: ${dsName}`;\r\n\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <h3 style={{ 'float': 'center' }}><label className=\"underline\">Bulk Edit for: {dsName}</label></h3>\r\n                    It is <b>highly recommended</b> that you take an <button size=\"sm\" className=\"btn btn-link\" onClick={this.downloadXlsx}><b>xlsx backup</b> </button> before you attempt this. Also, good to warn your users not to make any edits while you are doing this! \r\n                    \r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Step 1.</b> Select xls file:\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form.Control type=\"file\" name=\"file\" onChange={this.onFileSelect} />\r\n                    </Col>\r\n                </Row>\r\n                {this.step1Status()}\r\n                <br/>\r\n                {this.step2()}\r\n                <br/>\r\n                {this.step3()}\r\n                {this.step3Status()}\r\n                <br/>\r\n                {this.step4()}\r\n                {this.step4Status()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { newDs } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        newDs,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cDsBulkEdit = connect(mapStateToProps)(DsBulkEdit);\r\n\r\n\r\nexport default cDsBulkEdit","import React, { Component } from 'react'\r\nimport { Route } from 'react-router-dom'\r\nimport { matchPath } from 'react-router'\r\nimport cn from 'classnames'\r\nimport childrenWithProps from '../childrenWithProps'\r\n\r\nconst isActive = ({ location }) => (linkTo) => matchPath(location.pathname, {path: linkTo, exact: false, strict: false})\r\n\r\nclass MenuSection extends Component {\r\n  render () {\r\n    const { title, children, shared } = this.props\r\n    //const { visiblePath } = shared.getState()\r\n    //const active = visiblePath.startsWith(ancestors);\r\n    const ancestors = title;\r\n\r\n    return (\r\n      <div className={cn('menu_section', { active: true })}>\r\n        <h3>{title}</h3>\r\n        <Route render={rcp => (\r\n          <ul className=\"nav side-menu\">\r\n            { \r\n              childrenWithProps(children, { \r\n                shared,\r\n                isActive: isActive(rcp), \r\n                ancestors\r\n              })\r\n            }\r\n          </ul>\r\n        )} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MenuSection","import React, { Component } from 'react'\r\nimport cn from 'classnames'\r\nimport childrenWithProps from '../childrenWithProps'\r\n\r\nclass GroupMenuItem extends Component {\r\n  render() {\r\n    /* eslint no-unused-vars: 0 */\r\n    const { icon, title, shared, children, to, isActive, ancestors } = this.props\r\n    const { visiblePath } = shared.getState()\r\n    const chldAncestors = ancestors + \" : \" + title;\r\n    const active = visiblePath.startsWith(chldAncestors);\r\n\r\n    const onClickHdlr = () => {\r\n      visiblePath.startsWith(chldAncestors) ? shared.setVisiblePath(ancestors) : shared.setVisiblePath(chldAncestors);\r\n    }\r\n\r\n    return (\r\n      <li className={ cn({ active }) }><a href=\"##\" onClick={ onClickHdlr }>\r\n        { icon ? <i className={ `fas fa-${icon}` }></i> : '' }\r\n        { \"  \" + title }\r\n        <span className=\"fas fa-chevron-down pull-right\"></span></a>\r\n        <ul className=\"nav child_menu\" style={ { display: active ? 'block' : 'none' } }>\r\n          { childrenWithProps(children, { isActive, shared, ancestors: chldAncestors }) }\r\n        </ul>\r\n      </li>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GroupMenuItem\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport cn from 'classnames'\r\n\r\nclass MenuItem extends Component {\r\n  render () {\r\n    const { icon, title, isActive, shared, ancestors, ...rest } = this.props\r\n    const { to } = rest\r\n    const currentPage = isActive(to)\r\n    const { visiblePath } = shared.getState()\r\n    // if !visiblePath, then this is the very first render of \r\n    // the UI. If you paste a URL, this effectively opens the \r\n    // left hand side in a declarative fashion.\r\n    if (currentPage && !visiblePath)\r\n      shared.setVisiblePath(ancestors);\r\n    const onClickHdlr = () => {\r\n      window.scroll(0,0);\r\n      if (!ancestors.trim()) {\r\n        shared.setVisiblePath(ancestors);\r\n      }\r\n    }\r\n    return (\r\n      \r\n      <li className={cn({ 'current-page': currentPage })}>\r\n        <Link {...rest} onClick={onClickHdlr}>\r\n          {icon ? <i className={`fas fa-${icon}`}></i> : ''}\r\n          {\" \" + title}\r\n        </Link>\r\n      </li>\r\n    )\r\n  }\r\n}\r\nexport default MenuItem","import React, { Component } from 'react'\r\n// import { matchPath } from 'react-router'\r\nimport SharedState from '../SharedState'\r\nimport MenuSection from './MenuSection'\r\nimport GroupMenuItem from './GroupMenuItem'\r\nimport MenuItem from './MenuItem'\r\n\r\nconst childrenWithProps = (children, props) => React.Children.map(children, c => React.cloneElement(c, props))\r\n\r\nclass SideBar extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.shared = SharedState(this, {\r\n      setVisiblePath: (path) => {\r\n        console.log(`setVisiblePath: ${path}`);\r\n        this.setState({visiblePath: path});\r\n      }\r\n    })\r\n    this.state = {\r\n      visiblePath: \"\"\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props\r\n\r\n    return (\r\n      <div id=\"sidebar-menu\" className=\"main_menu_side hidden-print main_menu\">\r\n        { childrenWithProps(children, { shared: this.shared }) }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSideBar.MenuSection = MenuSection\r\nSideBar.GroupMenuItem = GroupMenuItem\r\nSideBar.MenuItem = MenuItem\r\n\r\nexport default SideBar\r\n","import SideBar from './SideBar'\r\nimport MenuSection from './MenuSection'\r\nimport GroupMenuItem from './GroupMenuItem'\r\nimport MenuItem from './MenuItem'\r\n\r\nexport default SideBar\r\n\r\nexport {\r\n  MenuSection,\r\n  GroupMenuItem,\r\n  MenuItem\r\n}","import {MenuItem} from '../../components/SideBar'\r\nimport React from 'react';\r\n\r\nconst Menu = (\r\n    <MenuItem title=\"Home\" to=\"/\" icon=\"home\" />\r\n)\r\n\r\nexport default Menu","import React, { Component } from 'react'\r\nimport { Row, Col, Button } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom'\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport 'react-tabulator/lib/styles.css'; // required styles\r\nimport 'react-tabulator/lib/css/tabulator.min.css'; // theme\r\nimport { allDsConstants } from '../../constants';\r\nimport { history } from '../../helpers';\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\nclass AllDs extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.deleteRequest = this.deleteRequest.bind(this);\r\n        this.deleteControls = this.deleteControls.bind(this);\r\n    }\r\n    componentDidMount () {\r\n        const { dispatch, user } = this.props;\r\n        dispatch(dsActions.getDsList(user.user));\r\n    }\r\n\r\n    deleteRequest ( dsName ) {\r\n        const { dispatch } = this.props;\r\n        console.log( \"Received delete request: \", dsName );\r\n        dispatch({ type: allDsConstants.SEEKING_DELETE_CONFIRM, dsName })\r\n    }\r\n\r\n    confirmedDelete ( dsName ) {\r\n        const { dispatch, user } = this.props;\r\n        console.log( \"Received delete confirmation! \", dsName );\r\n        dispatch(dsActions.deleteDs(dsName, user.user));\r\n    }\r\n\r\n    deleteControls ( dsName ) {\r\n        const { user, allDs } = this.props;\r\n        let owner = ''\r\n        for (let i = 0; i < allDs.dsList.dbList.length; i++) {\r\n            if (allDs.dsList.dbList[i].name === dsName) {\r\n                try {\r\n                    owner = allDs.dsList.dbList[i].perms.owner;\r\n                } catch (e) {\r\n                    console.log(`Owner is not found for: ${dsName}`);\r\n                    owner = user.user;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        if (owner === user.user && allDs.deleteConfirm && allDs.deleteConfirm[dsName]) {\r\n            return (<span> | <a href=\"##\" onClick={() => {this.confirmedDelete(dsName)}}>Confirm Deletion please</a></span>)\r\n        } else if (owner === user.user) {\r\n            return (<span> | <a href=\"##\" onClick={() => {this.deleteRequest(dsName)}}>Delete</a></span>)\r\n        }\r\n        return '';\r\n    }\r\n\r\n    dsList () {\r\n        const { allDs } = this.props;\r\n        try {\r\n            let listItems = allDs.dsList.dbList.map((v) => {\r\n                let url = `/ds/${v.name}/default`;\r\n                return <li><Link to={url}>{v.name}</Link>{this.deleteControls(v.name)}</li>\r\n            })\r\n            return (<Row><Col md={12} sm={12} xs={12}><ul>{listItems}</ul></Col></Row>)\r\n        } catch (e) {\r\n            console.log('dsList, exception: ', e);\r\n        }\r\n        return '';\r\n    }\r\n    \r\n    render () {\r\n        document.title = \"Datagroom - browse data-sets\";\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <h3 style={{ 'float': 'center' }}><label className=\"underline\">Your Datasets</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                {this.dsList()}\r\n                <Row>\r\n                <Button size=\"sm\" onClick={() => {history.push('/newDsXlsx')}}> New Ds (xlsx)</Button> \r\n                <Button size=\"sm\" onClick={() => {history.push('/newDsCsv')}}> New Ds (csv)</Button> \r\n                <Button size=\"sm\" onClick={() => {history.push('/newDsFrmDs')}}> Copy Ds</Button> \r\n                </Row>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { allDs } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        allDs\r\n    }\r\n}\r\n\r\nconst cAllDs = connect(mapStateToProps)(AllDs);\r\n\r\n\r\nexport default cAllDs","import React, { Component } from 'react'\r\nimport { Row, Col, Button, Form } from 'react-bootstrap'\r\nimport { connect } from 'react-redux';\r\nimport { dsActions } from '../../actions/ds.actions';\r\nimport { dsConstants } from '../../constants';\r\nimport MyTabulator from './MyTabulator';\r\nimport MyTextArea from './MyTextArea';\r\n//import 'highlight.js/styles/solarized-light.css'\r\nimport { uploadService } from '../../services';\r\nimport Modal from './Modal';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './simpleStyles.css';\r\nlet MarkdownIt = new require('markdown-it')({\r\n    linkify: true,\r\n    html: true\r\n}).use(require('markdown-it-bracketed-spans')).use(require('markdown-it-attrs')).use(require('markdown-it-container'), 'code').use(require('markdown-it-highlightjs'));\r\n\r\n// From: https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md#renderer\r\n// Remember old renderer, if overridden, or proxy to default renderer\r\nvar defaultRender = MarkdownIt.renderer.rules.link_open || function(tokens, idx, options, env, self) {\r\n    return self.renderToken(tokens, idx, options);\r\n  };\r\n\r\nMarkdownIt.renderer.rules.link_open = function (tokens, idx, options, env, self) {\r\n    // If you are sure other plugins can't add `target` - drop check below\r\n    var aIndex = tokens[idx].attrIndex('target');\r\n  \r\n    if (aIndex < 0) {\r\n      tokens[idx].attrPush(['target', '_blank']); // add new attribute\r\n    } else {\r\n      tokens[idx].attrs[aIndex][1] = '_blank';    // replace value of existing attr\r\n    }\r\n  \r\n    // pass token to default renderer.\r\n    return defaultRender(tokens, idx, options, env, self);\r\n};\r\n\r\n\r\nconst config = {};\r\nif (process.env.NODE_ENV === 'development') {\r\n    config.apiUrl = \"http://in-mvlb52:8887\"\r\n    config.apiUrl = \"http://localhost:8887\"\r\n} else {\r\n    config.apiUrl = \"\"\r\n}\r\n\r\nclass DsAttachments extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            filterButtonText: 'Enable Filters',\r\n            pageSize: 30,\r\n            totalRecs: 0,\r\n            refresh: 0, \r\n\r\n            initialHeaderFilter: [],\r\n            initialSort: [{column: \"time\", dir: \"desc\"}], \r\n            showModal: false,\r\n            modalTitle: \"Title of modal\",\r\n            modalQuestion: \"This is the modal question\",\r\n            modalCallback: null,\r\n            showAllFilters: false,\r\n        };\r\n        this.ref = null;\r\n\r\n        this.renderComplete = this.renderComplete.bind(this);\r\n        this.cellEditCheck = this.cellEditCheck.bind(this);\r\n\r\n        this.recordRef = this.recordRef.bind(this);\r\n        this.onFileSelect = this.onFileSelect.bind(this);\r\n        this.toggleFilters = this.toggleFilters.bind(this);\r\n        this.toggleSingleFilter = this.toggleSingleFilter.bind(this);\r\n        this.ajaxResponse = this.ajaxResponse.bind(this);\r\n        this.deleteRowHandler = this.deleteRowHandler.bind(this);\r\n        this.deleteRowQuestion = this.deleteRowQuestion.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n\r\n    }\r\n    componentDidMount () {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n    }\r\n    componentWillUnmount () {\r\n        const { dispatch } = this.props;\r\n    }\r\n\r\n    renderComplete () {\r\n        const { match } = this.props;\r\n        let dsName = match.params.dsName; \r\n        setTimeout(() => \r\n        window.highlightJsBadge(), 1000);\r\n    }\r\n\r\n    cellEditCheck (cell) {      \r\n        return false;\r\n    }\r\n    toggleModal (confirmed) {\r\n        this.state.modalCallback(confirmed);\r\n        this.setState({ showModal: !this.state.showModal });\r\n    }\r\n\r\n    async onFileSelect(event) {\r\n        const { match } = this.props;\r\n        let dsName = match.params.dsName;\r\n        console.log(\"Files: \", event.target.files);\r\n        // https://fb.me/react-event-pooling \r\n        event.persist();\r\n        for (let i = 0; i < event.target.files.length; i++) {\r\n            let file = event.target.files[i];\r\n            if ( file ) {\r\n                let remoteFileName = file.name.replaceAll(\" \", \"_\");\r\n                const formData = new FormData(); \r\n                formData.append( \r\n                    \"file\", \r\n                    file,\r\n                    remoteFileName\r\n                );\r\n                formData.append(\"dsName\", dsName);\r\n                await uploadService.uploadAttachment(formData);\r\n            }    \r\n        }\r\n        // Preserve filters\r\n        let initialHeaderFilter = this.ref.table.getHeaderFilters();\r\n        console.log(\"initialHeaderFilter: \", initialHeaderFilter);\r\n        this.setState({ initialHeaderFilter });\r\n        // Preserve sorters\r\n        let hdrSortersTmp = this.ref.table.getSorters();\r\n        let hdrSorters = [];\r\n        for (let i = 0; i < hdrSortersTmp.length; i++) {\r\n            let sorter = {};\r\n            sorter.column = hdrSortersTmp[i].field;\r\n            sorter.dir = hdrSortersTmp[i].dir;\r\n            hdrSorters.push(sorter);\r\n        }\r\n        this.setState({ initialSort: hdrSorters });\r\n        // showAllFilters & initialHeaderFilter is not working yet\r\n        //this.setState({ showAllFilters: false });\r\n        // Force refresh\r\n        this.setState({ refresh: this.state.refresh + 1 });\r\n    }\r\n\r\n    toggleFilters () {\r\n        const { dsHome, match } = this.props;\r\n        //let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        //console.log(\"Current definitions: \", currentDefs);\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            newVal = currentDefs[j].headerFilter ? false : 'input';\r\n            currentDefs[j].headerFilter = newVal;\r\n            try {\r\n                // If the headerFilter has to be set, then set it from the backend value. \r\n                if (newVal) {\r\n                    if (dsHome.dsViews[dsView].columnAttrs[j].headerFilterType)\r\n                        newVal = dsHome.dsViews[dsView].columnAttrs[j].headerFilterType;\r\n                }\r\n            } catch (e) {}\r\n            //this.ref.table.updateColumnDefinition(currentDefs[j].field, {editor: newVal});\r\n        }\r\n        this.ref.table.setColumns(currentDefs);\r\n        this.setState( { filterButtonText: newVal ? 'Disable Filtering' : 'Enable Filtering'} );\r\n        //let row = this.ref.table.getRows();\r\n        //console.log(row);\r\n        //row.normalizeHeight();\r\n\r\n        //this.ref.table.redraw(true);\r\n    }\r\n\r\n    recordRef (ref) {\r\n        // setting state is causing grief to the Tabulator component. \r\n        //this.setState({ ref });\r\n        this.ref = ref;\r\n        return true;\r\n    }\r\n\r\n    async deleteRowHandler (e, cell, confirmed) {\r\n        const { dispatch, match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        console.log(\"Delete row handler called...:\", confirmed);\r\n        if (confirmed) {\r\n            let _id = cell.getRow().getData()['_id'];\r\n            if (!_id) {\r\n                cell.getRow().delete();\r\n                return;\r\n            }\r\n            await uploadService.deleteOneAttachment({ dsName, dsView, user: user.user, _id });\r\n            cell.getRow().delete();\r\n            this.setState({totalRecs: this.state.totalRecs - 1});\r\n        }\r\n    }\r\n\r\n    deleteRowQuestion (e, cell) {\r\n        let me = this;\r\n        this.setState({ modalTitle: \"Delete current attachment?\", \r\n                        modalQuestion: `This will delete the attachment shown in this row. Please confirm. This cannot be undone. Pls ensure links to this attachment are also fixed!`,\r\n                        modalCallback: (confirmed) => me.deleteRowHandler(e, cell, confirmed),\r\n                        showModal: !this.state.showModal });\r\n    }\r\n\r\n    toggleSingleFilter (e, column) {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let currentDefs = this.ref.table.getColumnDefinitions();\r\n        let newVal;\r\n        for (let j = 0; j < currentDefs.length; j++) {\r\n            if (currentDefs[j].field === column.getField()) {\r\n                newVal = currentDefs[j].headerFilter ? false : 'input';\r\n                currentDefs[j].headerFilter = newVal;\r\n                try {\r\n                    // If the headerFilter has to be set, then set it from the backend value. \r\n                    if (newVal) {\r\n                        if (dsHome.dsViews[dsView].columnAttrs[j].headerFilterType)\r\n                            newVal = dsHome.dsViews[dsView].columnAttrs[j].headerFilterType;\r\n                    }\r\n                } catch (e) {}\r\n                // Comment this line and uncomment couple of lines below to use setCOlumns\r\n                // if you don't like the header row width. \r\n                this.ref.table.updateColumnDefinition(currentDefs[j].field, {headerFilter: newVal});\r\n            }\r\n        }\r\n        // uncomment this and comment updatecolumnDefinition above if you don't like header width. \r\n        //this.ref.table.setColumns(currentDefs);\r\n    }\r\n\r\n    setColumnDefinitions () {\r\n        const { match, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n\r\n        let headerMenu = [\r\n            {\r\n                label:\"Toggle Filters\",\r\n                action: this.toggleSingleFilter\r\n            }\r\n        ];\r\n        let cellContextMenu = [\r\n            {\r\n                label:\"Delete row...\",\r\n                action: this.deleteRowQuestion\r\n            },\r\n        ];\r\n        let columns = [];\r\n        let columnAttrs = [\r\n            {field: '_id', title: 'file', width: 800, formatter: \"textarea\", headerTooltip: true, hozAlign: 'left', vertAlign: 'top'}, \r\n            {field: 'size', title: 'size', width: 100, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n            {field: 'time', title: 'time', width: 160, formatter: \"textarea\", headerTooltip: true, hozAlign: 'center', vertAlign: 'middle'}, \r\n        ];\r\n        for (let i = 0; i < columnAttrs.length; i++) {\r\n            let col = JSON.parse(JSON.stringify(columnAttrs[i]));\r\n            col.headerMenu = headerMenu;\r\n            col.contextMenu = cellContextMenu;\r\n            col.editable = this.cellEditCheck;\r\n            if (this.state.initialHeaderFilter.length) {\r\n                col.headerFilter = \"input\";\r\n            }\r\n            if (col.field === '_id') {\r\n                col.formatter = (cell, formatterParams) => {\r\n                    let value = cell.getValue();\r\n                    if (value === undefined) return \"\";\r\n                    if (typeof value != \"string\") return value;\r\n\r\n                    value = '/' + value;\r\n                    let origValue = value;\r\n                    value = `Click to view: [${value}](${value})`;\r\n                    value += `\\n\\nTo use this image, copy the text below and paste into your cell!:\\n`;\r\n                    if (/(\\.png$)|(\\.jpg$)|(\\.gif$)|(\\.jpeg$)/i.test(origValue)) {\r\n                        value += \"\\n\\n``` md\\n\\n\" + `<img src=\"${origValue}\" alt=\"${origValue}\" width=\"100%\" height=\"100%\" />` + `\\n` + \"```\\n\"; \r\n                        \r\n                    } else {\r\n                        value += \"\\n\\n``` md\\n\\n\" + `[Modify link text](${origValue})` + `\\n` + \"```\\n\"; \r\n                    }\r\n                    value = MarkdownIt.render(value);\r\n                    return `<div style=\"white-space:normal;word-wrap:break-word;margin-bottom:-12px;\">${value}</div>`;\r\n                }\r\n            }\r\n            columns.push(col);\r\n        }\r\n        return columns;\r\n    }\r\n\r\n    ajaxResponse (url, params, response) {\r\n        console.log('ajaxResponse: ', response);\r\n        this.setState({ totalRecs: response.total});\r\n        return response; \r\n    }\r\n\r\n    step2 () {\r\n        const { match, user, dsHome } = this.props;\r\n        let dsName = match.params.dsName; \r\n        let dsView = match.params.dsView;\r\n        let s2 = '';\r\n\r\n        let columns = this.setColumnDefinitions();\r\n        console.log(\"Columns: \", columns);\r\n        s2 = <Row>\r\n                    <div>\r\n                        <MyTabulator\r\n                            columns={columns}\r\n                            data={[]}\r\n                            options={{\r\n                                ajaxURL: `${config.apiUrl}/ds/view/attachments/${this.props.match.params.dsName}/${dsView}/${user.user}`,\r\n                                pagination:\"remote\",\r\n                                paginationDataSent: {\r\n                                    page: 'page',\r\n                                    size: 'per_page' // change 'size' param to 'per_page'\r\n                                },\r\n                                paginationDataReceived: {\r\n                                    last_page: 'total_pages'\r\n                                },\r\n                                current_page: 1,\r\n                                initialHeaderFilter: this.state.initialHeaderFilter,\r\n                                initialSort: JSON.parse(JSON.stringify(this.state.initialSort)),\r\n                                paginationSize: this.state.pageSize,\r\n                                paginationSizeSelector: [10, 25, 50, 100, 500, true],\r\n                                ajaxResponse: this.ajaxResponse,\r\n                                ajaxError: function (error) {\r\n                                    console.log('ajaxError', error);\r\n                                },\r\n                                forceRefresh: this.state.refresh,\r\n                                index: \"_id\",\r\n                                ajaxSorting: true,\r\n                                ajaxFiltering: true,\r\n                                //height: \"500px\",\r\n                                //virtualDomBuffer: 500,\r\n                                clipboard: true,\r\n                                renderComplete: this.renderComplete\r\n                            }}\r\n                            innerref={this.recordRef}\r\n                            />\r\n                    </div>\r\n                </Row>            \r\n        return s2;\r\n    }\r\n\r\n\r\n    render () {\r\n        const { match } = this.props;\r\n        let me = this;\r\n\r\n        document.title = `Attachments: ${match.params.dsName}`;\r\n\r\n        return (\r\n            <div>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                        <h3 style={{ 'float': 'center' }}><label className=\"underline\">Attachments in: {match.params.dsName}</label></h3>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row>\r\n                    <Col md={2} sm={2} xs={2}> \r\n                    <b>Select files to upload: </b>\r\n                    </Col>\r\n                    <Col md={4} sm={4} xs={4}> \r\n                    <Form ref={ form => this.fileInputForm = form } onClick={() => ReactDOM.findDOMNode(this.fileInputForm).reset() }>\r\n                        <Form.Control type=\"file\" name=\"file\" id=\"fileInput\" multiple=\"multiple\" onChange={this.onFileSelect} /> \r\n                    </Form>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                <Row>\r\n                    <Col md={12} sm={12} xs={12}> \r\n                    <Form inline>\r\n                    <Form.Check inline type=\"checkbox\" label=\"&nbsp;Show all filters\" checked={this.state.showAllFilters} onChange={(event) => {\r\n                                    let checked = event.target.checked;\r\n                                    me.setState({showAllFilters: checked, /*refresh: this.state.refresh + 1 */});\r\n                                    localStorage.setItem(\"showAllFilters\", JSON.stringify(checked));\r\n                                    me.toggleFilters();\r\n                                    //me.ref.table.setData();\r\n                                }}/>\r\n                    </Form>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                <Col md={4} sm={4} xs={4}> \r\n                    <b>Total records: {this.state.totalRecs}</b>\r\n                </Col>\r\n                </Row>\r\n                {this.step2()}\r\n                <Modal show={this.state.showModal}\r\n                    onClose={this.toggleModal} title={this.state.modalTitle}>\r\n                    {this.state.modalQuestion}\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { user } = state.authentication;\r\n    const { home } = state;\r\n    const { dsHome } = state;\r\n    return {\r\n        user,\r\n        home,\r\n        dsHome\r\n    }\r\n}\r\n\r\nconst cDsAttachments = connect(mapStateToProps)(DsAttachments);\r\n\r\n\r\nexport default cDsAttachments","import { Route } from 'react-router';\r\nimport Upload from './upload';\r\nimport NewDsFromXls from './NewDsFromXls';\r\nimport NewDsFromCsv from './NewDsFromCsv';\r\nimport NewDsFromDs from './NewDsFromDs';\r\nimport DsHome from './DsHome';\r\nimport DsView from './DsView';\r\nimport DsViewEdit from './DsViewEdit';\r\nimport DsEditLog from './DsEditLog';\r\nimport DsBulkEdit from './DsBulkEdit';\r\nimport HomeMenu from './Menu'\r\nimport AllDs from './AllDs';\r\nimport DsAttachments from './DsAttachments';\r\nimport React from 'react'\r\n\r\nexport default [ <Route path=\"/newDsXlsx\" exact component={NewDsFromXls}/>,\r\n                 <Route path=\"/newDsCsv\" exact component={NewDsFromCsv}/>,\r\n                 <Route path=\"/newDsFrmDs\" exact component={NewDsFromDs}/>,\r\n                 <Route path=\"/test\" exact component={Upload}/>, \r\n                 <Route path=\"/\" exact component={AllDs}/>, \r\n                 <Route path=\"/ds/:dsName\" exact component={DsHome}/>, \r\n                 <Route path=\"/ds/:dsName/:dsView\" component={DsView}/>,\r\n                 <Route path=\"/dsViewEdit/:dsName/:dsView\" exact component={DsViewEdit}/>,\r\n                 <Route path=\"/dsEditLog/:dsName\" exact component={DsEditLog}/>,\r\n                 <Route path=\"/dsBulkEdit/:dsName\" exact component={DsBulkEdit}/>, \r\n                 <Route path=\"/dsAttachments/:dsName\" exact component={DsAttachments}/>,\r\n                 ]\r\nexport { HomeMenu }","import React, { Component } from 'react'\r\nimport Home from './home'\r\n\r\n\r\nclass PageContent extends Component {\r\n  render() {\r\n    const { needMargin } = this.props;\r\n    return (\r\n      <div className={needMargin ? \"right_col\" : \"right_col_noPanel\"} role=\"main\">\r\n        {Home}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PageContent\r\n","import React from 'react';\r\nimport PageContent from './PageContent';\r\nimport SideBar from '../components/SideBar';\r\nimport {HomeMenu} from './home';\r\n\r\nexport const Menu = (\r\n  <SideBar>\r\n    <SideBar.MenuSection title=\" \">\r\n      {HomeMenu}\r\n    </SideBar.MenuSection>\r\n  </SideBar>\r\n);\r\n\r\nexport default PageContent\r\n","import React, { Component } from 'react';\r\nimport { Left, Top, Footer } from '../navigation';\r\nimport PageContent, { Menu } from '../routes';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      leftVisible: false\r\n    };\r\n    this.toggleLeft = this.toggleLeft.bind(this);\r\n  }\r\n  toggleLeft() {\r\n    this.setState({\r\n      leftVisible: !this.state.leftVisible\r\n    });\r\n  }\r\n  render() {\r\n    const { user } = this.props;\r\n    const { leftVisible } = this.state;\r\n    // In Top, need to remove top_nav class (or make up one more without the margin)\r\n    // In PageContent, remove right_col class (or alternate class)\r\n    // Or check @media (max-width: 991px) in xtend.css\r\n    return (\r\n      <div className=\"container body\">\r\n        <div className=\"main_container\">\r\n          <Left user={user} visible={leftVisible}>\r\n            {Menu}\r\n          </Left>\r\n          <Top user={user} toggleCb={this.toggleLeft} needMargin={leftVisible} />\r\n          <PageContent needMargin={leftVisible} />\r\n          <Footer needMargin={leftVisible} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  const { user } = state.authentication;\r\n  return {\r\n    user\r\n  }\r\n}\r\n\r\nconst connectedApp = connect(mapStateToProps)(App);\r\n\r\nexport default connectedApp;","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\n//import \"./login.css\"; // Don't do it here, see note below. \r\n\r\nimport { userActions } from '../actions';\r\n\r\nclass LoginPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            submitted: false\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        const { name, value } = e.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        this.setState({ submitted: true });\r\n        let { username, password } = this.state;\r\n        const { dispatch } = this.props;\r\n        if (username && password) {\r\n            let m = username.match(/(.*?)@(.*)/);\r\n            if (m && (m.length >= 2)) {\r\n                username = m[1];\r\n            }        \r\n            dispatch(userActions.login(username, password));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { loggingIn, loggedIn, message } = this.props;\r\n        const { username, password, submitted } = this.state;\r\n\r\n        const { from } = this.props.location.state || { from: { pathname: \"/\" } };\r\n    \r\n        if (loggedIn) {\r\n            return <Redirect to={from} />;\r\n        }\r\n        require('./login.css');\r\n        return (\r\n            <div>\r\n                <div className=\"logincontainer\">\r\n                    <section id=\"content\">\r\n                        <h10>Welcome to Datagroom</h10>\r\n                        <br/><br/><br/>\r\n                        <form name=\"form\" onSubmit={this.handleSubmit}>\r\n                            <div>\r\n                                <input type=\"text\" name=\"username\" id=\"username\" placeholder=\"username\" value={username} onChange={this.handleChange} />\r\n                                {submitted && !username &&\r\n                                    <div className=\"help-block\">Username is required</div>\r\n                                }\r\n                                <br />\r\n                            </div>\r\n                            <div>\r\n                                <input type=\"password\" name=\"password\" id=\"password\" placeholder=\"password\" value={password} onChange={this.handleChange} autocomplete=\"current-password\" />\r\n                                {submitted && !password &&\r\n                                    <div className=\"help-block\">Password is required</div>\r\n                                }\r\n                                <br />\r\n                            </div>\r\n                            \r\n                            <div className=\"form-group\">\r\n                                <button>Log In</button>\r\n                                {/*<input type=\"submit\" value=\"Log In\" />*/}\r\n                                {loggingIn &&\r\n                                    <div style={{float: 'left'}}>\r\n                                    <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" alt=\"Waiting\"/>\r\n                                    </div>\r\n                                }\r\n                                {submitted && message &&\r\n                                    <div className=\"help-block\">{message}</div>\r\n                                }\r\n                                <div><br/><br/></div>\r\n                            </div>\r\n\r\n                        </form>\r\n                    </section>\r\n                    <div>\r\n                            <br/>\r\n                            <div className=\"clearfix\"></div>                \r\n                    </div>\r\n                    <p style={{clear:\"both\"}}></p><br/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { loggingIn, loggedIn } = state.authentication;\r\n    const { type, message } = state.alert;\r\n    return {\r\n        loggingIn,\r\n        loggedIn,\r\n        type,\r\n        message\r\n    }\r\n}\r\n\r\nconst connectedLoginPage = withRouter(connect(mapStateToProps)(LoginPage));\r\nexport { connectedLoginPage as LoginPage }; ","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nclass PrivateRoute extends React.Component {\r\n\r\n    render() {\r\n        const { loggedIn } = this.props;\r\n        const { component: Component, ...rest } = this.props;\r\n        return (\r\n            <Route {...rest} render={props => (\r\n                //localStorage.getItem('user')\r\n                loggedIn\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n            )} />        \r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { loggedIn } = state.authentication;\r\n    return {\r\n        loggedIn,\r\n    }\r\n}\r\n\r\nconst connectedPrivateRoute = connect(mapStateToProps)(PrivateRoute);\r\nexport { connectedPrivateRoute as PrivateRoute }; ","import React from 'react';\r\nimport \"reveal.js/dist/reveal.css\";\r\n//import \"reveal.js/dist/theme/white.css\";\r\nimport '../routes/home/rjs_white.css';\r\nimport Reveal from 'reveal.js';\r\n\r\nclass RevealJsPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n        this.startPreso = this.startPreso.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        this.startPreso();\r\n    }\r\n    startPreso () {\r\n        let sections = localStorage.getItem('revealjsSections');\r\n        var container = document.querySelector(\"#rj\");\r\n        let finalHtml = `<div class=\"reveal\"><div class=\"slides\">`;\r\n        \r\n        finalHtml = `<div style=\"display: flex; flex-direction: row;\">\r\n        <div class=\"reveal deck1\" style=\"width: 100%; height: 100vh; margin: 10px;\">\r\n        <div class=\"slides\">`;\r\n\r\n        finalHtml += sections;\r\n        finalHtml += `</div></div></div>`;\r\n        container.innerHTML = finalHtml;\r\n        console.log(`FinalHTML: `, finalHtml);\r\n        //Reveal.initialize();\r\n        let deck1 = new Reveal( document.querySelector( '.deck1' ), {\r\n            embedded: true,\r\n            progress: false,\r\n            keyboardCondition: 'focused',\r\n        } );\r\n        deck1.initialize();\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        //setTimeout(this.startPreso, 100);\r\n        return (\r\n            <div id=\"rj\">\r\n                Hi there, we'll show reveal js page here. \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport { RevealJsPage };\r\n","import React from \"react\";\r\n//import { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { Router, Route, Switch } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport { LoginPage } from \"./InfnLoginPage\";\r\nimport { PrivateRoute } from \"./PrivateRoute\";\r\nimport { history } from '../helpers';\r\nimport { RevealJsPage } from './revealjsPage';\r\n\r\nconst Root = ({ store }) => (\r\n    <Provider store={store}>\r\n        <Router history={history}>\r\n            <div>\r\n                <Switch>\r\n                    <Route path=\"/login\" component={LoginPage}/>\r\n                    <Route path='/revealjs' component={ RevealJsPage }/>\r\n                    <PrivateRoute path=\"/*\" component={App} />\r\n                </Switch>\r\n            </div>\r\n        </Router>\r\n    </Provider>\r\n);\r\n\r\nRoot.propTypes = {\r\n    store: PropTypes.oneOfType([\r\n        PropTypes.func.isRequired,\r\n        PropTypes.object.isRequired,\r\n    ]).isRequired,\r\n};\r\n\r\n\r\nexport default Root;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Root from \"./common/components/Root\";\r\nimport { store } from './common/helpers';\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n    <Root store={store} />,\r\n    document.getElementById(\"root\")\r\n);\r\n","import QueryParsers from './QueryParsers';\r\n\r\nfunction MyAutoCompleter (cell, onRendered, success, cancel, editorParams){\r\n    var self = this,\r\n    cellEl = cell.getElement(),\r\n    // Jayaram - setting to null initially\r\n    initialValue = cell.getValue(),\r\n    //initialValue = null,\r\n    vertNav = editorParams.verticalNavigation || \"editor\",\r\n    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\"),\r\n    input = document.createElement(\"input\"),\r\n    listEl = document.createElement(\"div\"),\r\n    allItems = [],\r\n    displayItems = [],\r\n    values = [],\r\n    currentItem = false,\r\n    blurable = true,\r\n    uniqueColumnValues = false;\r\n\r\n    // Store initial value. \r\n    var curVal = cell.getValue();\r\n    console.log(\"curVal: \", curVal);\r\n    console.log(\"initialValue before nullifying it: \", initialValue);\r\n    initialValue = null;\r\n    console.log(\"initialValue: \", initialValue);\r\n    console.log(\"initialDisplayValue: \", initialDisplayValue);\r\n\r\n    if (editorParams.conditionalValues) {\r\n        editorParams.values = [];\r\n        let rowData = cell.getRow().getData();\r\n        for (let i = 0; i < editorParams.conditionalExprs.length; i++) {\r\n            // XXX: Add more error checking here\r\n            let exprStr = editorParams.conditionalExprs[i].split(':')[0].trim();\r\n            //console.log(\"exprStr is: \", exprStr);\r\n            let expr = QueryParsers.parseExpr(exprStr);\r\n            //console.log(\"expr is: \", expr);\r\n            if (QueryParsers.evalExpr(expr, rowData)) {\r\n                let values = editorParams.conditionalExprs[i].split(':')[1].trim();\r\n                values = JSON.parse(values);\r\n                //console.log(\"eval true: \", values);\r\n                editorParams.values = values;\r\n                break;\r\n            } else {\r\n                ;//console.log(\"eval false\");\r\n            }\r\n        }\r\n    }\r\n\r\n    //style input\r\n    input.setAttribute(\"type\", \"search\");\r\n\r\n    input.style.padding = \"4px\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n\r\n    if(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n        for (let key in editorParams.elementAttributes){\r\n            if(key.charAt(0) == \"+\"){\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            }else{\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    //style list element\r\n    listEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n    listEl.addEventListener(\"mousedown\", function(e){\r\n        blurable = false;\r\n        console.log(\"listEL mousedown\");\r\n        setTimeout(function(){\r\n            blurable = true;\r\n        }, 10);\r\n    });\r\n\r\n\r\n    function genUniqueColumnValues(){\r\n        if(editorParams.values === true){\r\n            uniqueColumnValues = getUniqueColumnValues();\r\n        }else if(typeof editorParams.values === \"string\"){\r\n            uniqueColumnValues = getUniqueColumnValues(editorParams.values);\r\n        }\r\n    }\r\n\r\n    function getUniqueColumnValues(field){\r\n        var output = {},\r\n        data = self.table.getData(),\r\n        column;\r\n\r\n        if(field){\r\n            column = self.table.columnManager.getColumnByField(field);\r\n        }else{\r\n            column = cell.getColumn()._getSelf();\r\n        }\r\n\r\n        if(column){\r\n            data.forEach(function(row){\r\n                var val = column.getFieldValue(row);\r\n\r\n                if(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n                    output[val] = true;\r\n                }\r\n            });\r\n\r\n            if(editorParams.sortValuesList){\r\n                if(editorParams.sortValuesList == \"asc\"){\r\n                    output = Object.keys(output).sort();\r\n                }else{\r\n                    output = Object.keys(output).sort().reverse();\r\n                }\r\n            }else{\r\n                output = Object.keys(output);\r\n            }\r\n        }else{\r\n            console.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\r\n        }\r\n\r\n\r\n        return output;\r\n    }\r\n\r\n    function subtractArray(matches, selectedCsvs) {\r\n        let filteredMatches = [];\r\n        for (let i = 0; i < matches.length; i++) {\r\n            let found = false;\r\n            for (let j = 0; j < selectedCsvs.length; j++) {\r\n                if (matches[i].value === selectedCsvs[j].trim()) {\r\n                    found = true; \r\n                    break;\r\n                }\r\n            }\r\n            if (!found) filteredMatches.push(matches[i]);\r\n        }\r\n        return filteredMatches;\r\n    }\r\n\r\n    function filterList(term, intialLoad, selectedCsvs){\r\n        var matches = [],\r\n        values, items, searchEl;\r\n\r\n        //lookup base values list\r\n        if(uniqueColumnValues){\r\n            values = uniqueColumnValues;\r\n        }else{\r\n            values = editorParams.values || [];\r\n        }\r\n\r\n        if(editorParams.searchFunc){\r\n            matches = editorParams.searchFunc(term, values);\r\n\r\n            if(matches instanceof Promise){\r\n\r\n                addNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\r\n\r\n                matches.then((result) => {\r\n                    result = parseItems(result);\r\n                    let filteredResult = subtractArray(result, selectedCsvs);\r\n                    fillListIfNotEmpty(filteredResult, intialLoad);\r\n                }).catch((err) => {\r\n                    console.err(\"error in autocomplete search promise:\", err);\r\n                });\r\n\r\n            }else{\r\n                matches = parseItems(matches);\r\n                let filteredMatches = subtractArray(matches, selectedCsvs);\r\n                fillListIfNotEmpty(filteredMatches, intialLoad);\r\n            }\r\n        }else{\r\n            items = parseItems(values);\r\n\r\n            // Jayaram, added term as null. \r\n            if(term === \"\" || term === null){\r\n                if(editorParams.showListOnEmpty){\r\n                    matches = items;\r\n                }\r\n            }else{\r\n                items.forEach(function(item){\r\n                    if(item.value !== null || typeof item.value !== \"undefined\"){\r\n                        if(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n                            matches.push(item);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            let filteredMatches = subtractArray(matches, selectedCsvs);\r\n            fillListIfNotEmpty(filteredMatches, intialLoad);\r\n        }\r\n    }\r\n\r\n    function filterInvalids(selectedCsvs){\r\n        var matches = [],\r\n        values;\r\n\r\n        //lookup base values list\r\n        if(uniqueColumnValues){\r\n            values = uniqueColumnValues;\r\n        }else{\r\n            values = editorParams.values || [];\r\n        }\r\n        if(editorParams.searchFunc){\r\n            matches = editorParams.searchFunc(\"\", values);\r\n            // XXX: Doesn't work for Promises\r\n            if(matches instanceof Promise){\r\n                matches = [];\r\n            }else{\r\n                ;\r\n            }\r\n        }else{\r\n            matches = values;\r\n        }\r\n\r\n        if (!Array.isArray(matches)) {\r\n            matches = Object.keys(matches);\r\n        }\r\n        // You have matches now. Ensure selectedCsvs are all in matches. \r\n        let filteredValidCsvs = [];\r\n        for (let i = 0; i < selectedCsvs.length; i++) {\r\n            let found = false;\r\n            for (let j = 0; j < matches.length; j++) {\r\n                //console.log(`Cmp: ..${selectedCsvs[i].trim()}.. and ..${matches[j]}..`);\r\n                if (selectedCsvs[i].trim() === matches[j]) {\r\n                    found = true; break;\r\n                }\r\n            }\r\n            if (found) filteredValidCsvs.push(selectedCsvs[i].trim());\r\n        }\r\n        return filteredValidCsvs;\r\n    }\r\n\r\n    function eliminateDups (values) {\r\n        // Eliminate duplicates.\r\n        let filteredMap = {};\r\n        for (let i = 0; i < values.length; i++) {\r\n            filteredMap[values[i]] = 1;\r\n        }\r\n        return Object.keys(filteredMap);\r\n    }\r\n\r\n    function addNotice(notice){\r\n        var searchEl = document.createElement(\"div\");\r\n\r\n        clearList();\r\n\r\n        if(notice !== false){\r\n            searchEl.classList.add(\"tabulator-edit-select-list-notice\");\r\n            searchEl.tabIndex = 0;\r\n\r\n            if(notice instanceof Node){\r\n                searchEl.appendChild(notice);\r\n            }else{\r\n                searchEl.innerHTML = notice;\r\n            }\r\n\r\n            listEl.appendChild(searchEl);\r\n        }\r\n    }\r\n\r\n    function parseItems(inputValues){\r\n        var itemList = [];\r\n\r\n        if(Array.isArray(inputValues)){\r\n            inputValues.forEach(function(value){\r\n\r\n                var item = {};\r\n\r\n                if(typeof value === \"object\"){\r\n                    item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\r\n                    item.value = value.value;\r\n                }else{\r\n                    item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\r\n                    item.value = value;\r\n                }\r\n\r\n                itemList.push(item);\r\n            });\r\n        }else{\r\n            for(var key in inputValues){\r\n                var item = {\r\n                    title:editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\r\n                    value:key,\r\n                };\r\n\r\n                itemList.push(item);\r\n            }\r\n        }\r\n\r\n        return itemList;\r\n    }\r\n\r\n    function clearList(){\r\n        while(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n    }\r\n\r\n    function fillListIfNotEmpty(items, intialLoad){\r\n        if(items.length){\r\n            fillList(items, intialLoad);\r\n        }else{\r\n            if(editorParams.emptyPlaceholder){\r\n                addNotice(editorParams.emptyPlaceholder);\r\n            }\r\n        }\r\n    }\r\n\r\n    function fillList(items, intialLoad){\r\n        var current = false;\r\n\r\n        clearList();\r\n\r\n        displayItems = items;\r\n\r\n        displayItems.forEach(function(item){\r\n            var el = item.element;\r\n\r\n            if(!el){\r\n                el = document.createElement(\"div\");\r\n                el.classList.add(\"tabulator-edit-select-list-item\");\r\n                el.tabIndex = 0;\r\n                el.innerHTML = item.title;\r\n\r\n                el.addEventListener(\"click\", function(e){\r\n                    setCurrentItem(item);\r\n                    chooseItem();\r\n                });\r\n\r\n                el.addEventListener(\"mousedown\", function(e){\r\n                    blurable = false;\r\n                    console.log(\"eL mousedown\");\r\n\r\n                    setTimeout(function(){\r\n                        blurable = true;\r\n                    }, 10);\r\n                });\r\n\r\n                item.element = el;\r\n\r\n                if(intialLoad && item.value == initialValue){\r\n                    input.value = item.title;\r\n                    item.element.classList.add(\"active\");\r\n                    current = true;\r\n                }\r\n\r\n                if(item === currentItem){\r\n                    item.element.classList.add(\"active\");\r\n                    current = true;\r\n                }\r\n            }\r\n\r\n            listEl.appendChild(el);\r\n        });\r\n\r\n        if(!current){\r\n            setCurrentItem(false);\r\n        }\r\n    }\r\n\r\n    function isExactMatch(term){\r\n        var matches = [],\r\n        values, items, searchEl;\r\n\r\n        //lookup base values list\r\n        if(uniqueColumnValues){\r\n            values = uniqueColumnValues;\r\n        }else{\r\n            values = editorParams.values || [];\r\n        }\r\n\r\n        if(editorParams.searchFunc){\r\n            matches = editorParams.searchFunc(term, values);\r\n            // Not ready for Promises\r\n            if(matches instanceof Promise) {\r\n                return {status: false, match: \"\"};\r\n            }else{\r\n                ;\r\n            }\r\n        }else{\r\n            items = parseItems(values);\r\n\r\n            if(term === \"\"){\r\n                if(editorParams.showListOnEmpty){\r\n                    matches = items;\r\n                }\r\n            }else{\r\n                items.forEach(function(item){\r\n                    if(item.value !== null || typeof item.value !== \"undefined\"){\r\n                        if(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n                            matches.push(item);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        if (matches.length === 1) {\r\n            return {status: true, match: matches[0].value}\r\n        } else {\r\n            return {status: false, match: \"\"};\r\n        }\r\n    }\r\n\r\n    function chooseItem(){\r\n        hideList();\r\n        console.log(\"Chooseitem!\");\r\n        if(currentItem){\r\n            if(initialValue !== currentItem.value){\r\n                //initialValue = currentItem.value;\r\n                //input.value = currentItem.title;\r\n                let successVal = \"\";\r\n                let csvs = input.value.split(',');\r\n                for (let i = 0; i < csvs.length - 1; i++) {\r\n                    if (successVal) successVal += ', ';\r\n                    successVal += csvs[i].trim();\r\n                }\r\n                if (successVal) successVal += ', '\r\n                successVal += currentItem.value.trim();\r\n                let vals = successVal.split(',');\r\n                vals = eliminateDups (vals);\r\n                if (!editorParams.freetext) {\r\n                    vals = filterInvalids(vals);\r\n                }\r\n                successVal = vals.join(', ');\r\n                success(successVal);\r\n            }else{\r\n                cancel();\r\n            }\r\n        } else {\r\n            let successVal = \"\";\r\n            let csvs = input.value.split(',');\r\n            for (let i = 0; i < csvs.length - 1; i++) {\r\n                if (successVal) successVal += ', ';\r\n                successVal += csvs[i].trim();\r\n            }\r\n            // Deal with 'auto-complete' of last term. \r\n            let lastTerm = csvs[csvs.length - 1];\r\n            let { status, match } = isExactMatch (lastTerm);\r\n            if (status) {\r\n                if (successVal) successVal += ', ';\r\n                successVal += match;\r\n            }\r\n\r\n            if (csvs.length === 1 && editorParams.freetext) {\r\n                if (successVal) successVal += ', ';\r\n                successVal += input.value.trim();\r\n            }\r\n            if (successVal === \"\" && editorParams.allowEmpty) {\r\n                success(successVal);\r\n            } else if (successVal) {\r\n                let vals = successVal.split(',');\r\n                vals = eliminateDups (vals);\r\n                if (!editorParams.freetext) {\r\n                    vals = filterInvalids(vals);\r\n                }\r\n                successVal = vals.join(', ');\r\n                if (successVal !== initialDisplayValue) {\r\n                    success(successVal);\r\n                } else {\r\n                    cancel();\r\n                }\r\n            } else {\r\n                cancel();\r\n            }\r\n        }\r\n    }\r\n    \r\n\tfunction elOffset(el) {\r\n\t\tvar box = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n\t\t};\r\n\t}\r\n\r\n    function showList(){\r\n        if(!listEl.parentNode){\r\n            while(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n            var offset = elOffset(cellEl);\r\n\r\n            listEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n            listEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n            listEl.style.left = offset.left + \"px\";\r\n            document.body.appendChild(listEl);\r\n        }\r\n    }\r\n\r\n    function setCurrentItem(item, showInputValue){\r\n        if(currentItem && currentItem.element){\r\n            currentItem.element.classList.remove(\"active\");\r\n        }\r\n\r\n        currentItem = item;\r\n\r\n        if(item && item.element){\r\n            item.element.classList.add(\"active\");\r\n        }\r\n    }\r\n\r\n    function hideList(){\r\n        if(listEl.parentNode){\r\n            listEl.parentNode.removeChild(listEl);\r\n        }\r\n\r\n        removeScrollListener();\r\n    }\r\n\r\n\r\n    function cancelItem(){\r\n        hideList();\r\n        cancel();\r\n    }\r\n\r\n    function removeScrollListener() {\r\n        self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n    }\r\n\r\n    //allow key based navigation\r\n    input.addEventListener(\"keydown\", function(e){\r\n        var index;\r\n\r\n        switch(e.keyCode){\r\n            case 38: //up arrow\r\n            index = displayItems.indexOf(currentItem);\r\n\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if(index > 0){\r\n                    setCurrentItem(displayItems[index - 1]);\r\n                }else{\r\n                    setCurrentItem(false);\r\n                }\r\n            }\r\n            break;\r\n\r\n            case 40: //down arrow\r\n\r\n            index = displayItems.indexOf(currentItem);\r\n\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < displayItems.length - 1)){\r\n\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if(index < displayItems.length - 1){\r\n                    if(index == -1){\r\n                        setCurrentItem(displayItems[0]);\r\n                    }else{\r\n                        setCurrentItem(displayItems[index + 1]);\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n\r\n\r\n            case 37: //left arrow\r\n            case 39: //right arrow\r\n            e.stopImmediatePropagation();\r\n            e.stopPropagation();\r\n            // e.preventDefault();\r\n            break;\r\n\r\n            case 13: //enter\r\n            chooseItem();\r\n            break;\r\n\r\n            case 27: //escape\r\n            cancelItem();\r\n            break;\r\n\r\n            case 36: //home\r\n            case 35: //end\r\n            //prevent table navigation while using input element\r\n            e.stopImmediatePropagation();\r\n            break;\r\n            default:\r\n                break;\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"keyup\", function(e){\r\n\r\n        switch(e.keyCode){\r\n            case 38: //up arrow\r\n            case 37: //left arrow\r\n            case 39: //up arrow\r\n            case 40: //right arrow\r\n            case 13: //enter\r\n            case 27: //escape\r\n            break;\r\n\r\n            default:\r\n            let csvs = input.value.split(',');\r\n            let selectedCsvs = [];\r\n            if (csvs.length > 1) selectedCsvs = csvs.slice(0, csvs.length-1)\r\n            filterList(csvs[csvs.length-1].trim(), false, selectedCsvs);\r\n        }\r\n\r\n    });\r\n\r\n    input.addEventListener(\"search\", function(e){\r\n        // Appears to not be useful. \r\n        filterList(input.value, false, []);\r\n    });\r\n\r\n    input.addEventListener(\"blur\", function(e){\r\n        if(blurable){\r\n            chooseItem();\r\n        } else {\r\n            console.log(\"Not calling chooseItem!\");\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"focus\", function(e){\r\n        genUniqueColumnValues();\r\n        showList();\r\n\r\n        input.value = (initialDisplayValue !== '' && initialDisplayValue !== null) ? initialDisplayValue + ',': '';\r\n\r\n        let csvs = input.value.split(',');\r\n        let selectedCsvs = [];\r\n        if (csvs.length > 1) selectedCsvs = csvs.slice(0, csvs.length-1)\r\n        filterList('', true, selectedCsvs);\r\n    });\r\n\r\n\r\n    onRendered(function(){\r\n        input.style.height = \"100%\";\r\n        input.focus({preventScroll: true});\r\n    });\r\n\r\n    if(editorParams.mask){\r\n        this.table.modules.edit.maskInput(input, editorParams);\r\n    }\r\n\r\n    setTimeout(() => {\r\n        this.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n    }, 10);\r\n\r\n    genUniqueColumnValues();\r\n    input.value = initialDisplayValue + ',';\r\n    let csvs = input.value.split(',');\r\n    let selectedCsvs = [];\r\n    if (csvs.length > 1) selectedCsvs = csvs.slice(0, csvs.length-1)\r\n    filterList('', true, selectedCsvs);\r\n\r\n    return input;\r\n}\r\n\r\nexport default MyAutoCompleter;"],"sourceRoot":""}